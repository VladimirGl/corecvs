<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DeepView: core/buffers/rgb24/rgb24Buffer.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">DeepView
   &#160;<span id="projectnumber">0.02</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">core/buffers/rgb24/rgb24Buffer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="rgb24Buffer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**</span>
<a name="l00002"></a>00002 <span class="comment"> * \file rgb24Buffer.cpp</span>
<a name="l00003"></a>00003 <span class="comment"> * \brief Add Comment Here</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * \ingroup cppcorefiles</span>
<a name="l00006"></a>00006 <span class="comment"> * \date Mar 1, 2010</span>
<a name="l00007"></a>00007 <span class="comment"> * \author alexander</span>
<a name="l00008"></a>00008 <span class="comment"> */</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;<a class="code" href="global_8h.html" title="This file holds the global includes, mostly for debuging, tracing and profiling.">global.h</a>&quot;</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="rectangle_8h.html" title="Add Comment Here.">rectangle.h</a>&quot;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="rgb24Buffer_8h.html" title="a header for GRGB24buffer.cpp">rgb24Buffer.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="hardcodeFont_8h.html" title="Add Comment Here.">hardcodeFont.h</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="readers_8h.html" title="a header for different structure readers">readers.h</a>&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;../../math/vector/fixedVector.h&quot;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#undef rad2     // it&#39;s defined at win hdrs</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>
<a name="l00019"></a>00019 <span class="keyword">namespace </span>corecvs {
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 
<a name="l00022"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#ab8a6d7087360246760f84e5a030bdeaa">00022</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#ab8a6d7087360246760f84e5a030bdeaa">RGB24Buffer::drawG12Buffer</a>(<a class="code" href="classcorecvs_1_1G12Buffer.html" title="TODO: Add consts where it should go.">G12Buffer</a> *src, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> y, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> x)
<a name="l00023"></a>00023 {
<a name="l00024"></a>00024     <a class="code" href="global_8h.html#aa38fef22b6434d04309637be89dac846">ASSERT_TRUE</a>((this-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a> == src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a> &amp;&amp; this-&gt;w == src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>), <span class="stringliteral">&quot;Wrong sizes&quot;</span>);
<a name="l00025"></a>00025     <span class="keywordtype">int</span> i,j;
<a name="l00026"></a>00026     <span class="keywordflow">for</span> (i = 0; i &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>; i++)
<a name="l00027"></a>00027     {
<a name="l00028"></a>00028         <span class="keywordflow">for</span> (j = 0; j &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j++)
<a name="l00029"></a>00029         {
<a name="l00030"></a>00030             <a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> grey = src-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j) &gt;&gt; 4;
<a name="l00031"></a>00031             this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i + y, j + x) = <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a>(grey, grey, grey);
<a name="l00032"></a>00032         }
<a name="l00033"></a>00033     }
<a name="l00034"></a>00034 }
<a name="l00035"></a>00035 
<a name="l00036"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a2cd70ed01a27c4942052899707784264">00036</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a2cd70ed01a27c4942052899707784264">RGB24Buffer::drawG8Buffer</a>(<a class="code" href="classcorecvs_1_1G8Buffer.html">G8Buffer</a> *src, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> y, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> x)
<a name="l00037"></a>00037 {
<a name="l00038"></a>00038     <a class="code" href="global_8h.html#aa38fef22b6434d04309637be89dac846">ASSERT_TRUE</a>((this-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a> == src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a> &amp;&amp; this-&gt;w == src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>), <span class="stringliteral">&quot;Wrong sizes&quot;</span>);
<a name="l00039"></a>00039     <span class="keywordtype">int</span> i,j;
<a name="l00040"></a>00040     <span class="keywordflow">for</span> (i = 0; i &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>; i++)
<a name="l00041"></a>00041     {
<a name="l00042"></a>00042         <span class="keywordflow">for</span> (j = 0; j &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j++)
<a name="l00043"></a>00043         {
<a name="l00044"></a>00044             <a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> grey = src-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j);
<a name="l00045"></a>00045             this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i + y, j + x) = <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a>(grey, grey, grey);
<a name="l00046"></a>00046         }
<a name="l00047"></a>00047     }
<a name="l00048"></a>00048 }
<a name="l00049"></a>00049 <span class="comment"></span>
<a name="l00050"></a>00050 <span class="comment">/**</span>
<a name="l00051"></a>00051 <span class="comment"> * This function implements the Bresenham algorithm.</span>
<a name="l00052"></a>00052 <span class="comment"> * More details on the Bresenham algorithm here - http://en.wikipedia.org/wiki/Bresenham_algorithm</span>
<a name="l00053"></a>00053 <span class="comment"> *</span>
<a name="l00054"></a>00054 <span class="comment"> * NB! This function doesn&#39;t perform clipping it just draws nothing</span>
<a name="l00055"></a>00055 <span class="comment"> * You must clip yourself</span>
<a name="l00056"></a>00056 <span class="comment"> */</span>
<a name="l00057"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#abc609be3c25e3614285783385e53b7e9">00057</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#abc609be3c25e3614285783385e53b7e9" title="This function implements the Bresenham algorithm.">RGB24Buffer::drawLineSimple</a> (<span class="keywordtype">int</span> x1, <span class="keywordtype">int</span> y1, <span class="keywordtype">int</span> x2, <span class="keywordtype">int</span> y2, <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color )
<a name="l00058"></a>00058 {
<a name="l00059"></a>00059     <span class="keywordflow">if</span> (x1 &lt; 0 || y1 &lt; 0 || x1 &gt;= <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a> || y1 &gt;= <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>)
<a name="l00060"></a>00060         <span class="keywordflow">return</span>;
<a name="l00061"></a>00061     <span class="keywordflow">if</span> (x2 &lt; 0 || y2 &lt; 0 || x2 &gt;= <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a> || y2 &gt;= <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>)
<a name="l00062"></a>00062         <span class="keywordflow">return</span>;
<a name="l00063"></a>00063 
<a name="l00064"></a>00064     <span class="keywordtype">int</span>    dx = (x2 &gt;= x1) ? x2 - x1 : x1 - x2;
<a name="l00065"></a>00065     <span class="keywordtype">int</span>    dy = (y2 &gt;= y1) ? y2 - y1 : y1 - y2;
<a name="l00066"></a>00066     <span class="keywordtype">int</span>    sx = (x2 &gt;= x1) ? 1 : -1;
<a name="l00067"></a>00067     <span class="keywordtype">int</span>    sy = (y2 &gt;= y1) ? 1 : -1;
<a name="l00068"></a>00068     <span class="keywordtype">int</span> x;
<a name="l00069"></a>00069     <span class="keywordtype">int</span> y;
<a name="l00070"></a>00070     <span class="keywordtype">int</span> i;
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     <span class="keywordflow">if</span> ( dy &lt;= dx )
<a name="l00074"></a>00074     {
<a name="l00075"></a>00075         <span class="keywordtype">int</span>    d  = ( dy &lt;&lt; 1 ) - dx;
<a name="l00076"></a>00076         <span class="keywordtype">int</span>    d1 = dy &lt;&lt; 1;
<a name="l00077"></a>00077         <span class="keywordtype">int</span>    d2 = ( dy - dx ) &lt;&lt; 1;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079         <a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y1, x1) = color;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081         <span class="keywordflow">for</span> (x = x1 + sx, y = y1, i = 1; i &lt;= dx; i++, x += sx )
<a name="l00082"></a>00082         {
<a name="l00083"></a>00083             <span class="keywordflow">if</span> ( d &gt; 0 )
<a name="l00084"></a>00084             {
<a name="l00085"></a>00085                 d += d2;
<a name="l00086"></a>00086                 y += sy;
<a name="l00087"></a>00087             }
<a name="l00088"></a>00088             <span class="keywordflow">else</span>
<a name="l00089"></a>00089             {
<a name="l00090"></a>00090                 d += d1;
<a name="l00091"></a>00091             }
<a name="l00092"></a>00092 
<a name="l00093"></a>00093             <a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y, x) = color;
<a name="l00094"></a>00094         }
<a name="l00095"></a>00095     }
<a name="l00096"></a>00096     <span class="keywordflow">else</span>
<a name="l00097"></a>00097     {
<a name="l00098"></a>00098         <span class="keywordtype">int</span>    d  = ( dx &lt;&lt; 1 ) - dy;
<a name="l00099"></a>00099         <span class="keywordtype">int</span>    d1 = dx &lt;&lt; 1;
<a name="l00100"></a>00100         <span class="keywordtype">int</span>    d2 = ( dx - dy ) &lt;&lt; 1;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102         <a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y1, x1) = color;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104         <span class="keywordflow">for</span> (x = x1, y = y1 + sy, i = 1; i &lt;= dy; i++, y += sy )
<a name="l00105"></a>00105         {
<a name="l00106"></a>00106             <span class="keywordflow">if</span> ( d &gt; 0 )
<a name="l00107"></a>00107             {
<a name="l00108"></a>00108                 d += d2;
<a name="l00109"></a>00109                 x += sx;
<a name="l00110"></a>00110             }
<a name="l00111"></a>00111             <span class="keywordflow">else</span>
<a name="l00112"></a>00112             {
<a name="l00113"></a>00113                 d += d1;
<a name="l00114"></a>00114             }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116             <a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y, x) = color;
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119 }
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 
<a name="l00122"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a196a513657c7398482eed191cfca6089">00122</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a196a513657c7398482eed191cfca6089" title="This function is used to draw a pixel in the buffer.">RGB24Buffer::drawPixel</a> ( <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color)
<a name="l00123"></a>00123 {
<a name="l00124"></a>00124     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#af38950daefa219f81a0e89ee186075f1" title="Checks if coordinate lies within the buffer area.">isValidCoord</a>(y, x))
<a name="l00125"></a>00125     {
<a name="l00126"></a>00126         <a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y, x) = color;
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 }
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#ae56270aa4152561575c30d4371a5b658">00130</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#ae56270aa4152561575c30d4371a5b658">RGB24Buffer::drawLine</a>(<span class="keywordtype">int</span> x1, <span class="keywordtype">int</span> y1, <span class="keywordtype">int</span> x2, <span class="keywordtype">int</span> y2, <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color )
<a name="l00131"></a>00131 {
<a name="l00132"></a>00132     <a class="code" href="classcorecvs_1_1Rectangle.html">Rectangle&lt;int&gt;</a> rect;
<a name="l00133"></a>00133     rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a> = <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2d&lt;int&gt;</a>(0,0);
<a name="l00134"></a>00134     rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a43d141a7eced0c4c2f56f9e805e6d6f1">size</a>   = <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2d&lt;int&gt;</a>(<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a> - 1,<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a> - 1);
<a name="l00135"></a>00135     <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2d32</a> lineStart(x1,y1);
<a name="l00136"></a>00136     <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2d32</a> lineEnd(x2,y2);
<a name="l00137"></a>00137     rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a4e194fd13323165a076ad8c9c57275ae">clipCohenSutherland</a>(lineStart, lineEnd);
<a name="l00138"></a>00138     <a class="code" href="classcorecvs_1_1RGB24Buffer.html#abc609be3c25e3614285783385e53b7e9" title="This function implements the Bresenham algorithm.">drawLineSimple</a>(lineStart.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), lineStart.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(),lineEnd.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), lineEnd.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(), color);
<a name="l00139"></a>00139 }
<a name="l00140"></a>00140 
<a name="l00141"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a263f6ce1765d6a4b673ba56a9a28d7f2">00141</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a263f6ce1765d6a4b673ba56a9a28d7f2">RGB24Buffer::drawSprite</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color, <span class="keywordtype">int</span> d[][2], <span class="keywordtype">int</span> pointNum)
<a name="l00142"></a>00142 {
<a name="l00143"></a>00143     <span class="keywordtype">int</span> i;
<a name="l00144"></a>00144     <span class="keywordflow">for</span> (i = 0; i &lt; pointNum; i++ )
<a name="l00145"></a>00145     {
<a name="l00146"></a>00146         <span class="keywordtype">int</span> xn = x + d[i][0];
<a name="l00147"></a>00147         <span class="keywordtype">int</span> yn = y + d[i][1];
<a name="l00148"></a>00148         <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a196a513657c7398482eed191cfca6089" title="This function is used to draw a pixel in the buffer.">drawPixel</a>(xn, yn, color);
<a name="l00149"></a>00149     }
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 <span class="comment"></span>
<a name="l00152"></a>00152 <span class="comment">/**</span>
<a name="l00153"></a>00153 <span class="comment"> *  Draws a marker at the point having the form of</span>
<a name="l00154"></a>00154 <span class="comment"> *  &lt;pre&gt;</span>
<a name="l00155"></a>00155 <span class="comment"> *  #   #</span>
<a name="l00156"></a>00156 <span class="comment"> *   # #</span>
<a name="l00157"></a>00157 <span class="comment"> *    o</span>
<a name="l00158"></a>00158 <span class="comment"> *   # #</span>
<a name="l00159"></a>00159 <span class="comment"> *  #   #</span>
<a name="l00160"></a>00160 <span class="comment"> *  &lt;/pre&gt;</span>
<a name="l00161"></a>00161 <span class="comment"> *</span>
<a name="l00162"></a>00162 <span class="comment"> **/</span>
<a name="l00163"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a425a4ff4e6ce1c1fd9b61b7450114e9f">00163</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a425a4ff4e6ce1c1fd9b61b7450114e9f" title="This function is used to draw a sort of marker over the buffer.">RGB24Buffer::drawCrosshare1</a> (<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color)
<a name="l00164"></a>00164 {
<a name="l00165"></a>00165     <span class="keywordtype">int</span> d[8][2] = {{1,1},{2,2},{-1,-1},{-2,-2},{-1,1},{-2,2},{1,-1},{2,-2}};
<a name="l00166"></a>00166     this-&gt;<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a263f6ce1765d6a4b673ba56a9a28d7f2">drawSprite</a>(x, y, color, d, 8);
<a name="l00167"></a>00167 }
<a name="l00168"></a>00168 <span class="comment"></span>
<a name="l00169"></a>00169 <span class="comment">/**  Draws a marker at the point having the form of</span>
<a name="l00170"></a>00170 <span class="comment"> *  &lt;pre&gt;</span>
<a name="l00171"></a>00171 <span class="comment"> *   # #</span>
<a name="l00172"></a>00172 <span class="comment"> *  #   #</span>
<a name="l00173"></a>00173 <span class="comment"> * # # # #</span>
<a name="l00174"></a>00174 <span class="comment"> *    o</span>
<a name="l00175"></a>00175 <span class="comment"> * # # # #</span>
<a name="l00176"></a>00176 <span class="comment"> *  #   #</span>
<a name="l00177"></a>00177 <span class="comment"> *   # #</span>
<a name="l00178"></a>00178 <span class="comment"> *  &lt;/pre&gt;</span>
<a name="l00179"></a>00179 <span class="comment"> */</span>
<a name="l00180"></a>00180 
<a name="l00181"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a11a914c073f66ff5a6c3dce326e3a75a">00181</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a11a914c073f66ff5a6c3dce326e3a75a" title="This function is used to draw a sort of marker over the buffer.">RGB24Buffer::drawCrosshare2</a> (<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color)
<a name="l00182"></a>00182 {
<a name="l00183"></a>00183     <span class="keywordtype">int</span> d[16][2] = {{1,1},{2,2},{-1,-1},{-2,-2},{-1,1},{-2,2},{1,-1},{2,-2},
<a name="l00184"></a>00184             {1,3},{3,1},{-1,-3},{-3,-1},{1,-3},{3,-1},{-1,3},{-3,1}};
<a name="l00185"></a>00185     this-&gt;<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a263f6ce1765d6a4b673ba56a9a28d7f2">drawSprite</a>(x, y, color, d, 16);
<a name="l00186"></a>00186 }
<a name="l00187"></a>00187 <span class="comment"></span>
<a name="l00188"></a>00188 <span class="comment">/**  Draws a marker at the point having the form of</span>
<a name="l00189"></a>00189 <span class="comment"> *  &lt;pre&gt;</span>
<a name="l00190"></a>00190 <span class="comment"> *   \#\#\#</span>
<a name="l00191"></a>00191 <span class="comment"> *   \#o\#</span>
<a name="l00192"></a>00192 <span class="comment"> *   \#\#\#</span>
<a name="l00193"></a>00193 <span class="comment"> *  &lt;/pre&gt;</span>
<a name="l00194"></a>00194 <span class="comment"> */</span>
<a name="l00195"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a7880dca29ef63d3ed9e2320acc5a0841">00195</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a7880dca29ef63d3ed9e2320acc5a0841" title="This function is used to draw a sort of marker over the buffer.">RGB24Buffer::drawCrosshare3</a> (<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color)
<a name="l00196"></a>00196 {
<a name="l00197"></a>00197     <span class="keywordtype">int</span> d[8][2] = {{1,1},{1,0},{1,-1},{0,-1},{-1,-1},{-1,0},{-1,1},{0,1}};
<a name="l00198"></a>00198     this-&gt;<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a263f6ce1765d6a4b673ba56a9a28d7f2">drawSprite</a>(x, y, color, d, 8);
<a name="l00199"></a>00199 }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a0da19ff79a43ceec868ddf787575d418">00202</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a0da19ff79a43ceec868ddf787575d418">RGB24Buffer::drawFlowBuffer</a>(<a class="code" href="classcorecvs_1_1FlowBuffer.html" title="This is actually a version of Displacement Buffer.">FlowBuffer</a> *src, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> y, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> x)
<a name="l00203"></a>00203 {
<a name="l00204"></a>00204     <span class="keywordtype">int</span> i,j;
<a name="l00205"></a>00205     <span class="keywordflow">for</span> (i = 0; i &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>; i++)
<a name="l00206"></a>00206     {
<a name="l00207"></a>00207         <span class="keywordflow">for</span> (j = 0; j &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j++)
<a name="l00208"></a>00208         {
<a name="l00209"></a>00209             <span class="keywordflow">if</span> (!src-&gt;<a class="code" href="classcorecvs_1_1FlowBuffer.html#ab3e0bc7a8cd0eb01fd86f20de3aa5a99">isElementKnown</a>(i,j))
<a name="l00210"></a>00210             {
<a name="l00211"></a>00211                 <span class="keywordflow">continue</span>;
<a name="l00212"></a>00212             }
<a name="l00213"></a>00213             <a class="code" href="classcorecvs_1_1Vector2d.html">FlowElement</a> vec = src-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j);
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 <span class="preprocessor">#ifdef ASSERTS</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span>            <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2d32</a> res(vec);
<a name="l00217"></a>00217             res += <a class="code" href="namespacecorecvs.html#aee6f3bc6f4b08d8c01da863541eab544">Vector2d32</a>(j, i);
<a name="l00218"></a>00218             <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#af38950daefa219f81a0e89ee186075f1" title="Checks if coordinate lies within the buffer area.">isValidCoord</a>(res))
<a name="l00219"></a>00219             {
<a name="l00220"></a>00220                 <a class="code" href="global_8h.html#a52f9c107723d7daf1945bafba566ae00">ASSERT_FAIL</a>(<span class="stringliteral">&quot;Overflow in the flow&quot;</span>);
<a name="l00221"></a>00221             }
<a name="l00222"></a>00222 <span class="preprocessor">#endif</span>
<a name="l00223"></a>00223 <span class="preprocessor"></span>
<a name="l00224"></a>00224             <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color = <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a>(128 + (vec.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() * 5),128 + (vec.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() * 5), 0);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226             this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i + y, j + x) = color;
<a name="l00227"></a>00227         }
<a name="l00228"></a>00228     }
<a name="l00229"></a>00229 }
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 
<a name="l00232"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#aa14ed4f5105eafe2bd4cb7f0886566b2">00232</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#aa14ed4f5105eafe2bd4cb7f0886566b2">RGB24Buffer::drawFlowBuffer1</a>(<a class="code" href="classcorecvs_1_1FlowBuffer.html" title="This is actually a version of Displacement Buffer.">FlowBuffer</a> *src, <span class="keywordtype">double</span> colorScaler, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> y, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> x)
<a name="l00233"></a>00233 {
<a name="l00234"></a>00234     <span class="keywordtype">int</span> i,j;
<a name="l00235"></a>00235     <span class="keywordflow">for</span> (i = 0; i &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>; i++)
<a name="l00236"></a>00236     {
<a name="l00237"></a>00237         <span class="keywordflow">for</span> (j = 0; j &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j++)
<a name="l00238"></a>00238         {
<a name="l00239"></a>00239             <span class="keywordflow">if</span> (!src-&gt;<a class="code" href="classcorecvs_1_1FlowBuffer.html#ab3e0bc7a8cd0eb01fd86f20de3aa5a99">isElementKnown</a>(i,j))
<a name="l00240"></a>00240             {
<a name="l00241"></a>00241                 <span class="keywordflow">continue</span>;
<a name="l00242"></a>00242             }
<a name="l00243"></a>00243             <a class="code" href="classcorecvs_1_1Vector2d.html">FlowElement</a> vec = src-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j);
<a name="l00244"></a>00244 
<a name="l00245"></a>00245             <span class="comment">//RGBColor color = RGBColor(128 + (vec.x() * 5),128 + (vec.y() * 5), 0);</span>
<a name="l00246"></a>00246             <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color = <a class="code" href="classcorecvs_1_1RGBColor.html#a3a40b8a43b31869f5ad2eae052ebe7e2" title="Helper method that allows to represent the double value in interval 0..1 With a color coding...">RGBColor::rainbow1</a>(!vec / colorScaler);
<a name="l00247"></a>00247             <a class="code" href="classcorecvs_1_1RGB24Buffer.html#abc609be3c25e3614285783385e53b7e9" title="This function implements the Bresenham algorithm.">drawLineSimple</a>(j + x, i + y, j + vec.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() + x, i + vec.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() + y, color);
<a name="l00248"></a>00248         }
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250 }
<a name="l00251"></a>00251 
<a name="l00252"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a1f02cef978af663f8d3284192b898eaf">00252</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a1f02cef978af663f8d3284192b898eaf">RGB24Buffer::drawFlowBuffer2</a>(<a class="code" href="classcorecvs_1_1FlowBuffer.html" title="This is actually a version of Displacement Buffer.">FlowBuffer</a> *src, <span class="keywordtype">double</span> colorShift, <span class="keywordtype">double</span> colorScaler, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> y, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> x)
<a name="l00253"></a>00253 {
<a name="l00254"></a>00254     <span class="keywordtype">int</span> i,j;
<a name="l00255"></a>00255     <span class="keywordflow">for</span> (i = 0; i &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>; i++)
<a name="l00256"></a>00256     {
<a name="l00257"></a>00257         <span class="keywordflow">for</span> (j = 0; j &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j++)
<a name="l00258"></a>00258         {
<a name="l00259"></a>00259             <span class="keywordflow">if</span> (!src-&gt;<a class="code" href="classcorecvs_1_1FlowBuffer.html#ab3e0bc7a8cd0eb01fd86f20de3aa5a99">isElementKnown</a>(i,j))
<a name="l00260"></a>00260             {
<a name="l00261"></a>00261                 <span class="keywordflow">continue</span>;
<a name="l00262"></a>00262             }
<a name="l00263"></a>00263             <a class="code" href="classcorecvs_1_1Vector2d.html">FlowElement</a> vec = src-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265             <span class="comment">//RGBColor color = RGBColor(128 + (vec.x() * 5),128 + (vec.y() * 5), 0);</span>
<a name="l00266"></a>00266             <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color = <a class="code" href="classcorecvs_1_1RGBColor.html#a3a40b8a43b31869f5ad2eae052ebe7e2" title="Helper method that allows to represent the double value in interval 0..1 With a color coding...">RGBColor::rainbow1</a>((!vec - colorShift) / colorScaler);
<a name="l00267"></a>00267             this-&gt;<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a7880dca29ef63d3ed9e2320acc5a0841" title="This function is used to draw a sort of marker over the buffer.">drawCrosshare3</a>(j + x, i + y, color);
<a name="l00268"></a>00268         }
<a name="l00269"></a>00269     }
<a name="l00270"></a>00270 }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 
<a name="l00273"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#ac0c410d549f6603f1a4e36eae4540ee9">00273</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#ac0c410d549f6603f1a4e36eae4540ee9">RGB24Buffer::drawFlowBuffer3</a>(<a class="code" href="classcorecvs_1_1FlowBuffer.html" title="This is actually a version of Displacement Buffer.">FlowBuffer</a> *src, <span class="keywordtype">double</span> colorScaler, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> y, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> x)
<a name="l00274"></a>00274 {
<a name="l00275"></a>00275     <span class="keywordtype">int</span> i,j;
<a name="l00276"></a>00276     <span class="keywordflow">for</span> (i = 0; i &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>; i++)
<a name="l00277"></a>00277     {
<a name="l00278"></a>00278         <span class="keywordflow">for</span> (j = 0; j &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j++)
<a name="l00279"></a>00279         {
<a name="l00280"></a>00280             <span class="keywordflow">if</span> (!src-&gt;<a class="code" href="classcorecvs_1_1FlowBuffer.html#ab3e0bc7a8cd0eb01fd86f20de3aa5a99">isElementKnown</a>(i,j))
<a name="l00281"></a>00281             {
<a name="l00282"></a>00282                 <span class="keywordflow">continue</span>;
<a name="l00283"></a>00283             }
<a name="l00284"></a>00284             <a class="code" href="classcorecvs_1_1Vector2d.html">FlowElement</a> vec = src-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j);
<a name="l00285"></a>00285 
<a name="l00286"></a>00286             <span class="comment">//RGBColor color = RGBColor(128 + (vec.x() * 5),128 + (vec.y() * 5), 0);</span>
<a name="l00287"></a>00287             <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color = <a class="code" href="classcorecvs_1_1RGBColor.html#a3a40b8a43b31869f5ad2eae052ebe7e2" title="Helper method that allows to represent the double value in interval 0..1 With a color coding...">RGBColor::rainbow1</a>(!vec / colorScaler);
<a name="l00288"></a>00288             <a class="code" href="classcorecvs_1_1RGB24Buffer.html#abc609be3c25e3614285783385e53b7e9" title="This function implements the Bresenham algorithm.">drawLineSimple</a>(j + x, i + y, j + vec.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() + x, i + vec.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() + y, color);
<a name="l00289"></a>00289             this-&gt;<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a7880dca29ef63d3ed9e2320acc5a0841" title="This function is used to draw a sort of marker over the buffer.">drawCrosshare3</a>(j + vec.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() + x, i+ vec.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() + y, color);
<a name="l00290"></a>00290         }
<a name="l00291"></a>00291     }
<a name="l00292"></a>00292 }
<a name="l00293"></a>00293 
<a name="l00294"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a04add0ccc88deee6fb809fe8cba12b1c">00294</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a04add0ccc88deee6fb809fe8cba12b1c">RGB24Buffer::drawCorrespondanceList</a>(<a class="code" href="classcorecvs_1_1CorrespondanceList.html">CorrespondanceList</a> *src, <span class="keywordtype">double</span> colorScaler, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> y, <a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a> x)
<a name="l00295"></a>00295 {
<a name="l00296"></a>00296     <span class="keywordflow">if</span> (src == NULL) {
<a name="l00297"></a>00297         <span class="keywordflow">return</span>;
<a name="l00298"></a>00298     }
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     CorrespondanceList::iterator it;
<a name="l00301"></a>00301     <span class="keywordflow">for</span> (it = src-&gt;begin(); it != src-&gt;end(); ++it)
<a name="l00302"></a>00302     {
<a name="l00303"></a>00303         <a class="code" href="classcorecvs_1_1PrimitiveCorrespondance.html">Correspondance</a> &amp;tmpCorr = (*it);
<a name="l00304"></a>00304         <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2dd</a> from = tmpCorr.<a class="code" href="classcorecvs_1_1PrimitiveCorrespondance.html#a7e145fce848c60e43c00ca37a190d4f9" title="The point in the &quot;left&quot; image.">start</a>;
<a name="l00305"></a>00305         <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2dd</a> to = tmpCorr.<a class="code" href="classcorecvs_1_1PrimitiveCorrespondance.html#aed37cdeecc7906800f583de5ccaf00d4" title="The point in the &quot;right&quot; image.">end</a>;
<a name="l00306"></a>00306         <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2dd</a> vec = to - from;
<a name="l00307"></a>00307         <span class="comment">//RGBColor color = RGBColor(128 + (vec.x() * 5),128 + (vec.y() * 5), 0);</span>
<a name="l00308"></a>00308         <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color = <a class="code" href="classcorecvs_1_1RGBColor.html#a3a40b8a43b31869f5ad2eae052ebe7e2" title="Helper method that allows to represent the double value in interval 0..1 With a color coding...">RGBColor::rainbow1</a>(!vec / colorScaler);
<a name="l00309"></a>00309         <a class="code" href="classcorecvs_1_1RGB24Buffer.html#abc609be3c25e3614285783385e53b7e9" title="This function implements the Bresenham algorithm.">drawLineSimple</a>(from.x() + x, from.y() + y, to.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() + x, to.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() + y, color);
<a name="l00310"></a>00310         this-&gt;<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a7880dca29ef63d3ed9e2320acc5a0841" title="This function is used to draw a sort of marker over the buffer.">drawCrosshare3</a>(to.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() + x, to.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() + y, color);
<a name="l00311"></a>00311     }
<a name="l00312"></a>00312 }
<a name="l00313"></a>00313 
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="preprocessor">#if 0</span>
<a name="l00318"></a>00318 <span class="preprocessor"></span><span class="keywordtype">void</span> RGB24Buffer::drawRectangle(<span class="keyword">const</span> <a class="code" href="classcorecvs_1_1Rectangle.html">Rectangle&lt;int32_t&gt;</a> &amp;rect, <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color, <span class="keywordtype">int</span> style)
<a name="l00319"></a>00319 {
<a name="l00320"></a>00320     <span class="keywordflow">if</span> (style == 1)
<a name="l00321"></a>00321     {
<a name="l00322"></a>00322         this-&gt;<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a7880dca29ef63d3ed9e2320acc5a0841" title="This function is used to draw a sort of marker over the buffer.">drawCrosshare3</a>(rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>()                ,rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), color);
<a name="l00323"></a>00323         this-&gt;<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a7880dca29ef63d3ed9e2320acc5a0841" title="This function is used to draw a sort of marker over the buffer.">drawCrosshare3</a>(rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() + rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a43d141a7eced0c4c2f56f9e805e6d6f1">size</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(),rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), color);
<a name="l00324"></a>00324         this-&gt;<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a7880dca29ef63d3ed9e2320acc5a0841" title="This function is used to draw a sort of marker over the buffer.">drawCrosshare3</a>(rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>()                ,rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() + rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a43d141a7eced0c4c2f56f9e805e6d6f1">size</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), color);
<a name="l00325"></a>00325         this-&gt;<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a7880dca29ef63d3ed9e2320acc5a0841" title="This function is used to draw a sort of marker over the buffer.">drawCrosshare3</a>(rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() + rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a43d141a7eced0c4c2f56f9e805e6d6f1">size</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(),rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() + rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a43d141a7eced0c4c2f56f9e805e6d6f1">size</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), color);
<a name="l00326"></a>00326         <span class="keywordflow">return</span>;
<a name="l00327"></a>00327     }
<a name="l00328"></a>00328 
<a name="l00329"></a>00329     <span class="keywordflow">if</span> (style == 0)
<a name="l00330"></a>00330     {
<a name="l00331"></a>00331         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a43d141a7eced0c4c2f56f9e805e6d6f1">size</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(); i++)
<a name="l00332"></a>00332         {
<a name="l00333"></a>00333             this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() + i, rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>()) = color;
<a name="l00334"></a>00334             this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() + i, rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() + rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a43d141a7eced0c4c2f56f9e805e6d6f1">size</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>()) = color;
<a name="l00335"></a>00335         }
<a name="l00336"></a>00336 
<a name="l00337"></a>00337         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1; j &lt; rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a43d141a7eced0c4c2f56f9e805e6d6f1">size</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() - 1; j++)
<a name="l00338"></a>00338         {
<a name="l00339"></a>00339             this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(), rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() + j) = color;
<a name="l00340"></a>00340             this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() + rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a43d141a7eced0c4c2f56f9e805e6d6f1">size</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(), rect.<a class="code" href="classcorecvs_1_1Rectangle.html#a16349bb07bca54bb2f1d2e2b6c5d8bdf">corner</a>.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() +  j) = color;
<a name="l00341"></a>00341         }
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 }
<a name="l00347"></a>00347 <span class="preprocessor">#endif</span>
<a name="l00348"></a>00348 <span class="preprocessor"></span>
<a name="l00349"></a>00349 <span class="preprocessor">#if 0</span>
<a name="l00350"></a>00350 <span class="preprocessor"></span><span class="keywordtype">void</span> RGB24Buffer::rgb24DrawDisplacementBuffer(<a class="code" href="classcorecvs_1_1RGB24Buffer.html">RGB24Buffer</a> *dst, <a class="code" href="classcorecvs_1_1DisplacementBuffer.html" title="This buffer stores a buffer deformation - a shift of the buffer pixels.">DisplacementBuffer</a> *src, <span class="keywordtype">double</span> step)
<a name="l00351"></a>00351 {
<a name="l00352"></a>00352     <span class="keywordtype">int</span> move[8][2] = {
<a name="l00353"></a>00353             {1 ,0},  {1 ,1},  {0 ,1},  {-1,1},
<a name="l00354"></a>00354             {-1,0},    {-1,-1}, {0 ,-1}, {1 ,-1}
<a name="l00355"></a>00355     };
<a name="l00356"></a>00356     <span class="keywordtype">int</span> i,j;
<a name="l00357"></a>00357     <span class="keywordflow">for</span> (i = 1; i &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a> - 1; i++)
<a name="l00358"></a>00358     {
<a name="l00359"></a>00359         <span class="keywordflow">for</span> (j = 1; j &lt; src-&gt;<a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a> - 1; j++)
<a name="l00360"></a>00360         {
<a name="l00361"></a>00361             <a class="code" href="structcorecvs_1_1vector2Dd__tag.html">vector2Dd</a> current;
<a name="l00362"></a>00362             displacementBufferGetDisplacement(src, j, i, &amp;current.<a class="code" href="structcorecvs_1_1vector2Dd__tag.html#ae3229c53fdb736dc55d338d78b80ae3b">x</a>, &amp;current.<a class="code" href="structcorecvs_1_1vector2Dd__tag.html#ad00e6bfd174685957f3ba97126e00d2b">y</a>);
<a name="l00363"></a>00363             <a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> color = 0xFFFFFF;
<a name="l00364"></a>00364             <span class="keywordtype">double</span> len = <a class="code" href="namespacecorecvs.html#a3233d076fa283c5aa0ff377a5a102410">vector2DdLength</a>(&amp;current);
<a name="l00365"></a>00365             <span class="keywordtype">int</span> m  = (int)(len / step);
<a name="l00366"></a>00366             <span class="keywordtype">int</span> m2 = (int)(len / (step / 2));
<a name="l00367"></a>00367             <span class="keywordtype">double</span> limit     =  step * (m + 1);
<a name="l00368"></a>00368             <span class="keywordtype">double</span> limit_low = (step / 2) * (m2 + 1);
<a name="l00369"></a>00369 
<a name="l00370"></a>00370             <span class="keywordtype">int</span> k;
<a name="l00371"></a>00371             <span class="keywordflow">for</span> (k = 0; k &lt; 8; k++)
<a name="l00372"></a>00372             {
<a name="l00373"></a>00373                 <a class="code" href="structcorecvs_1_1vector2Dd__tag.html">vector2Dd</a> check;
<a name="l00374"></a>00374                 displacementBufferGetDisplacement(src, j + move[k][0]   , i + move[k][1], &amp;check.<a class="code" href="structcorecvs_1_1vector2Dd__tag.html#ae3229c53fdb736dc55d338d78b80ae3b">x</a>, &amp;check.<a class="code" href="structcorecvs_1_1vector2Dd__tag.html#ad00e6bfd174685957f3ba97126e00d2b">y</a>);
<a name="l00375"></a>00375 
<a name="l00376"></a>00376                 <span class="keywordflow">if</span> (<a class="code" href="namespacecorecvs.html#a3233d076fa283c5aa0ff377a5a102410">vector2DdLength</a>(&amp;check) &gt; limit_low)
<a name="l00377"></a>00377                     color = 0xAFAFAF;
<a name="l00378"></a>00378                 <span class="keywordflow">if</span> (<a class="code" href="namespacecorecvs.html#a3233d076fa283c5aa0ff377a5a102410">vector2DdLength</a>(&amp;check) &gt; limit)
<a name="l00379"></a>00379                     color = 0x0;
<a name="l00380"></a>00380             }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382             RGB24ELEM(dst, j, i) = color;
<a name="l00383"></a>00383         }
<a name="l00384"></a>00384     }
<a name="l00385"></a>00385 }
<a name="l00386"></a>00386 
<a name="l00387"></a>00387 <span class="keywordtype">void</span> RGB24Buffer::rgb24DrawHistogram(<a class="code" href="classcorecvs_1_1RGB24Buffer.html">RGB24Buffer</a> *dst, <a class="code" href="classcorecvs_1_1Histogram.html" title="Histogram class.">Histogram</a> *hist, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> w, <a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> flags)
<a name="l00388"></a>00388 {
<a name="l00389"></a>00389     <span class="keywordtype">int</span> i,j,k;
<a name="l00390"></a>00390 
<a name="l00391"></a>00391     <span class="keywordflow">if</span> (h == 0)
<a name="l00392"></a>00392         <span class="keywordflow">return</span>;
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 
<a name="l00395"></a>00395     <span class="keywordtype">int</span> intervalStart = (flags &amp; <a class="code" href="rgb24Buffer_8h.html#a3dfd09d14cbf7f90a5d5293332129e88">FLAGS_INCLUDE_MARGIN</a>) ? 0 : 1;
<a name="l00396"></a>00396     <span class="keywordtype">int</span> intervalEnd   = (flags &amp; <a class="code" href="rgb24Buffer_8h.html#a3dfd09d14cbf7f90a5d5293332129e88">FLAGS_INCLUDE_MARGIN</a>) ? BUFFER_MAX_VALUE : BUFFER_MAX_VALUE - 1;
<a name="l00397"></a>00397     <span class="keywordtype">double</span> px = intervalStart;
<a name="l00398"></a>00398 
<a name="l00399"></a>00399 
<a name="l00400"></a>00400     <span class="keywordtype">double</span> dx = (double)(intervalEnd - intervalStart) / <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>;
<a name="l00401"></a>00401 
<a name="l00402"></a>00402 
<a name="l00403"></a>00403     <a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> globalmax = 0;
<a name="l00404"></a>00404     <span class="keywordflow">for</span> (i = intervalStart; i &lt; intervalEnd; i++)
<a name="l00405"></a>00405     {
<a name="l00406"></a>00406         <span class="keywordflow">if</span> (hist-&gt;<a class="code" href="classcorecvs_1_1Histogram.html#ab538ef5ff44f920c9256af4c946f399c">data</a>[i] &gt; globalmax)
<a name="l00407"></a>00407             globalmax = hist-&gt;<a class="code" href="classcorecvs_1_1Histogram.html#ab538ef5ff44f920c9256af4c946f399c">data</a>[i];
<a name="l00408"></a>00408     }
<a name="l00409"></a>00409 
<a name="l00410"></a>00410     <span class="keywordtype">double</span> scale = (double)h / (globalmax + 1);
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 
<a name="l00413"></a>00413     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; i++)
<a name="l00414"></a>00414     {
<a name="l00415"></a>00415         <span class="keywordtype">int</span> step = (int)dx + 1 ;
<a name="l00416"></a>00416         <span class="keywordtype">int</span> max  =  0;
<a name="l00417"></a>00417         <span class="keywordtype">int</span> min  =  0xFFFF;
<a name="l00418"></a>00418         <span class="keywordtype">int</span> sum =   0;
<a name="l00419"></a>00419         <span class="keywordtype">int</span> count;
<a name="l00420"></a>00420 
<a name="l00421"></a>00421         <span class="keywordflow">for</span>(j = px, count = 0; j &lt; px + step &amp;&amp; j &lt; (intervalEnd - 1); j++, count ++)
<a name="l00422"></a>00422         {
<a name="l00423"></a>00423             <span class="keywordtype">int</span> val = hist-&gt;<a class="code" href="classcorecvs_1_1Histogram.html#ab538ef5ff44f920c9256af4c946f399c">data</a>[j];
<a name="l00424"></a>00424             sum += val;
<a name="l00425"></a>00425             <span class="keywordflow">if</span> (val &gt; max) max = val;
<a name="l00426"></a>00426             <span class="keywordflow">if</span> (val &lt; min) min = val;
<a name="l00427"></a>00427         }
<a name="l00428"></a>00428 
<a name="l00429"></a>00429         sum /= count;
<a name="l00430"></a>00430 
<a name="l00431"></a>00431         <a class="code" href="global_8h.html#a8fc171473e59dec1134d86647268481f" title="TODO: Add flush.">DOTRACE</a>((<span class="stringliteral">&quot;%d %d %d\n&quot;</span>, min, sum, max));
<a name="l00432"></a>00432 
<a name="l00433"></a>00433         <span class="keywordflow">for</span> (k = 0; k &lt; min * scale ; k++)
<a name="l00434"></a>00434         {
<a name="l00435"></a>00435             RGB24ELEM(dst, i + x, y + h - k) = 0xFF0000;
<a name="l00436"></a>00436         }
<a name="l00437"></a>00437         <span class="keywordflow">for</span> (; k &lt; sum * scale; k++)
<a name="l00438"></a>00438         {
<a name="l00439"></a>00439             RGB24ELEM(dst, i + x, y + h - k) = 0x00FF00;
<a name="l00440"></a>00440         }
<a name="l00441"></a>00441         <span class="keywordflow">for</span> (; k &lt; max * scale; k++)
<a name="l00442"></a>00442         {
<a name="l00443"></a>00443             RGB24ELEM(dst, i + x, y + h - k) = 0x0000FF;
<a name="l00444"></a>00444         }
<a name="l00445"></a>00445 
<a name="l00446"></a>00446         px += dx;
<a name="l00447"></a>00447     }
<a name="l00448"></a>00448 
<a name="l00449"></a>00449 
<a name="l00450"></a>00450 }
<a name="l00451"></a>00451 <span class="preprocessor">#endif</span>
<a name="l00452"></a>00452 <span class="preprocessor"></span>
<a name="l00453"></a>00453 
<a name="l00454"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#aa94c5efc3912b2c14a60cb098794d40f">00454</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#aa94c5efc3912b2c14a60cb098794d40f">RGB24Buffer::drawHistogram1024x512</a>(<a class="code" href="classcorecvs_1_1Histogram.html" title="Histogram class.">Histogram</a> *hist, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> flags)
<a name="l00455"></a>00455 {
<a name="l00456"></a>00456     <span class="keywordtype">int</span> i,j,k;
<a name="l00457"></a>00457 <span class="comment"></span>
<a name="l00458"></a>00458 <span class="comment">    /**</span>
<a name="l00459"></a>00459 <span class="comment">     *  TODO: Add asserts</span>
<a name="l00460"></a>00460 <span class="comment">     **/</span>
<a name="l00461"></a>00461 
<a name="l00462"></a>00462     <span class="keywordtype">int</span> intervalStart = (flags &amp; <a class="code" href="rgb24Buffer_8h.html#a3dfd09d14cbf7f90a5d5293332129e88">FLAGS_INCLUDE_MARGIN</a>) ? 0 : 1;
<a name="l00463"></a>00463     <span class="keywordtype">int</span> intervalEnd   = (flags &amp; <a class="code" href="rgb24Buffer_8h.html#a3dfd09d14cbf7f90a5d5293332129e88">FLAGS_INCLUDE_MARGIN</a>) ? <a class="code" href="classcorecvs_1_1G12Buffer.html#a049bb3934646dbcf411df2ffde1478ac">G12Buffer::BUFFER_MAX_VALUE</a> : <a class="code" href="classcorecvs_1_1G12Buffer.html#a049bb3934646dbcf411df2ffde1478ac">G12Buffer::BUFFER_MAX_VALUE</a> - 1;
<a name="l00464"></a>00464 
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 
<a name="l00467"></a>00467     <span class="keywordtype">unsigned</span> globalmax = 0;
<a name="l00468"></a>00468     <span class="keywordflow">for</span> (i = intervalStart; i &lt; intervalEnd; i++)
<a name="l00469"></a>00469     {
<a name="l00470"></a>00470         <span class="keywordflow">if</span> (hist-&gt;<a class="code" href="classcorecvs_1_1Histogram.html#ab538ef5ff44f920c9256af4c946f399c">data</a>[i] &gt; globalmax)
<a name="l00471"></a>00471             globalmax = hist-&gt;<a class="code" href="classcorecvs_1_1Histogram.html#ab538ef5ff44f920c9256af4c946f399c">data</a>[i];
<a name="l00472"></a>00472     }
<a name="l00473"></a>00473 
<a name="l00474"></a>00474     <span class="keywordtype">unsigned</span> shift = 0;
<a name="l00475"></a>00475     <span class="keywordflow">while</span> ((1U &lt;&lt; shift) &lt; globalmax)
<a name="l00476"></a>00476         shift++;
<a name="l00477"></a>00477 
<a name="l00478"></a>00478 
<a name="l00479"></a>00479     <span class="keywordflow">for</span> (i = 0; i &lt; 1024; i++)
<a name="l00480"></a>00480     {
<a name="l00481"></a>00481         <span class="keywordtype">int</span> max  =  0;
<a name="l00482"></a>00482         <span class="keywordtype">int</span> min  =  0xFFFF;
<a name="l00483"></a>00483         <span class="keywordtype">int</span> sum =   0;
<a name="l00484"></a>00484         <span class="keywordtype">int</span> count = 4;
<a name="l00485"></a>00485 
<a name="l00486"></a>00486         <span class="keywordflow">for</span>(j = 0; j &lt; count; j++)
<a name="l00487"></a>00487         {
<a name="l00488"></a>00488             <span class="keywordtype">int</span> val = hist-&gt;<a class="code" href="classcorecvs_1_1Histogram.html#ab538ef5ff44f920c9256af4c946f399c">data</a>[i * count + j];
<a name="l00489"></a>00489             sum += val;
<a name="l00490"></a>00490             <span class="keywordflow">if</span> (val &gt; max) max = val;
<a name="l00491"></a>00491             <span class="keywordflow">if</span> (val &lt; min) min = val;
<a name="l00492"></a>00492         }
<a name="l00493"></a>00493 
<a name="l00494"></a>00494         sum /= count;
<a name="l00495"></a>00495 
<a name="l00496"></a>00496         <a class="code" href="global_8h.html#a8fc171473e59dec1134d86647268481f" title="TODO: Add flush.">DOTRACE</a>((<span class="stringliteral">&quot;%d %d %d\n&quot;</span>, min, sum, max));
<a name="l00497"></a>00497 
<a name="l00498"></a>00498         <span class="keywordtype">int</span> minColumn = (min &lt;&lt; 9) &gt;&gt; shift;
<a name="l00499"></a>00499         <span class="keywordtype">int</span> maxColumn = (max &lt;&lt; 9) &gt;&gt; shift;
<a name="l00500"></a>00500         <span class="keywordtype">int</span> sumColumn = (sum &lt;&lt; 9) &gt;&gt; shift;
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 
<a name="l00503"></a>00503         <span class="keywordflow">for</span> (k = 0; k &lt; minColumn ; k++)
<a name="l00504"></a>00504         {
<a name="l00505"></a>00505             this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y + 512 - k,  i + x) = <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a>(0xFF,0,0);
<a name="l00506"></a>00506         }
<a name="l00507"></a>00507         <span class="keywordflow">for</span> (; k &lt; sumColumn; k++)
<a name="l00508"></a>00508         {
<a name="l00509"></a>00509             this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y + 512 - k, i + x) = <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a>(0, 0xFF,0);
<a name="l00510"></a>00510         }
<a name="l00511"></a>00511         <span class="keywordflow">for</span> (; k &lt; maxColumn; k++)
<a name="l00512"></a>00512         {
<a name="l00513"></a>00513             this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y + 512 - k, i + x) = <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a>(0, 0, 0xFF);
<a name="l00514"></a>00514         }
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516 }
<a name="l00517"></a>00517 
<a name="l00518"></a>00518 <span class="comment">// TODO: make this more pretty</span>
<a name="l00519"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#adbeb7b462839ff80ced476bb1dd242f8">00519</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#adbeb7b462839ff80ced476bb1dd242f8">RGB24Buffer::drawArc</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> rad, <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color)
<a name="l00520"></a>00520 {
<a name="l00521"></a>00521     <span class="keywordtype">int</span> rad2 = rad * rad;
<a name="l00522"></a>00522     <span class="keywordtype">int</span> olddx = 0;
<a name="l00523"></a>00523     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dy = -rad + 1; dy &lt;= 0; dy++)
<a name="l00524"></a>00524     {
<a name="l00525"></a>00525         <span class="keywordtype">int</span> newdx = (int)sqrt((<span class="keywordtype">float</span>)(rad2 - (dy - 0.5) * (dy - 0.5)));
<a name="l00526"></a>00526 
<a name="l00527"></a>00527         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dx = olddx; dx &lt;= newdx ; dx++) {
<a name="l00528"></a>00528             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#af38950daefa219f81a0e89ee186075f1" title="Checks if coordinate lies within the buffer area.">isValidCoord</a>(y - dy, x + dx))  this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y - dy, x + dx) = color;
<a name="l00529"></a>00529             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#af38950daefa219f81a0e89ee186075f1" title="Checks if coordinate lies within the buffer area.">isValidCoord</a>(y + dy, x + dx))  this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y + dy, x + dx) = color;
<a name="l00530"></a>00530             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#af38950daefa219f81a0e89ee186075f1" title="Checks if coordinate lies within the buffer area.">isValidCoord</a>(y - dy, x - dx))  this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y - dy, x - dx) = color;
<a name="l00531"></a>00531             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#af38950daefa219f81a0e89ee186075f1" title="Checks if coordinate lies within the buffer area.">isValidCoord</a>(y + dy, x - dx))  this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y + dy, x - dx) = color;
<a name="l00532"></a>00532         }
<a name="l00533"></a>00533 
<a name="l00534"></a>00534         olddx = newdx;
<a name="l00535"></a>00535     }
<a name="l00536"></a>00536 }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 
<a name="l00539"></a>00539 
<a name="l00540"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a157411c09b33ea796cd0df48c46c63a9">00540</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a157411c09b33ea796cd0df48c46c63a9">RGB24Buffer::drawArc1</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> rad, <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> color)
<a name="l00541"></a>00541 {
<a name="l00542"></a>00542     <span class="keywordtype">int</span> rad2 = rad * rad;
<a name="l00543"></a>00543     <span class="keywordtype">int</span> olddx = 0;
<a name="l00544"></a>00544     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dy = -rad + 1; dy &lt;= 0; dy++)
<a name="l00545"></a>00545     {
<a name="l00546"></a>00546         <span class="keywordtype">int</span> newdx = (int)sqrt((<span class="keywordtype">float</span>)(rad2 - (dy - 0.5) * (dy - 0.5)));
<a name="l00547"></a>00547 
<a name="l00548"></a>00548         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dx = olddx; dx &lt;= newdx ; dx++) {
<a name="l00549"></a>00549             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#af38950daefa219f81a0e89ee186075f1" title="Checks if coordinate lies within the buffer area.">isValidCoord</a>(y - dy, x + dx))  this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y - dy, x + dx) = color;
<a name="l00550"></a>00550             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#af38950daefa219f81a0e89ee186075f1" title="Checks if coordinate lies within the buffer area.">isValidCoord</a>(y + dy, x + dx))  this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y + dy, x + dx) = color;
<a name="l00551"></a>00551             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#af38950daefa219f81a0e89ee186075f1" title="Checks if coordinate lies within the buffer area.">isValidCoord</a>(y - dy, x - dx))  this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y - dy, x - dx) = color;
<a name="l00552"></a>00552             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#af38950daefa219f81a0e89ee186075f1" title="Checks if coordinate lies within the buffer area.">isValidCoord</a>(y + dy, x - dx))  this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(y + dy, x - dx) = color;
<a name="l00553"></a>00553         }
<a name="l00554"></a>00554 
<a name="l00555"></a>00555         olddx = newdx;
<a name="l00556"></a>00556     }
<a name="l00557"></a>00557 }
<a name="l00558"></a>00558 
<a name="l00559"></a>00559 
<a name="l00560"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a6e1c979e8253e2023136495c4ef4848c">00560</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#a6e1c979e8253e2023136495c4ef4848c" title="Draw Function.">RGB24Buffer::drawFunction</a>(
<a name="l00561"></a>00561         <span class="keywordtype">double</span> zx, <span class="keywordtype">double</span> zy,
<a name="l00562"></a>00562         <span class="keywordtype">double</span> zh, <span class="keywordtype">double</span> zw,
<a name="l00563"></a>00563         <a class="code" href="classcorecvs_1_1FunctionArgs.html" title="This class is a virtual version of a .">FunctionArgs</a> &amp;f)
<a name="l00564"></a>00564 {
<a name="l00565"></a>00565    <span class="keywordtype">int</span> i,j;
<a name="l00566"></a>00566    <span class="keywordflow">if</span> (f.<a class="code" href="classcorecvs_1_1FunctionArgs.html#aa837d1c8bd9362e7e2290abbad0a61ee">inputs</a> &lt; 2)
<a name="l00567"></a>00567        <span class="keywordflow">return</span>;
<a name="l00568"></a>00568 
<a name="l00569"></a>00569    <span class="keywordtype">double</span> *<a class="code" href="structin.html">in</a> =  <span class="keyword">new</span> <span class="keywordtype">double</span>[f.<a class="code" href="classcorecvs_1_1FunctionArgs.html#aa837d1c8bd9362e7e2290abbad0a61ee">inputs</a>];
<a name="l00570"></a>00570    <span class="keywordtype">double</span> *out = <span class="keyword">new</span> <span class="keywordtype">double</span>[f.<a class="code" href="classcorecvs_1_1FunctionArgs.html#ab8daa69226fddaaeb41278265dbffa1b">outputs</a>];
<a name="l00571"></a>00571    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; f.<a class="code" href="classcorecvs_1_1FunctionArgs.html#aa837d1c8bd9362e7e2290abbad0a61ee">inputs</a>; i++)
<a name="l00572"></a>00572        in[i] = 0.0;
<a name="l00573"></a>00573 
<a name="l00574"></a>00574 
<a name="l00575"></a>00575    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>; i++)
<a name="l00576"></a>00576    {
<a name="l00577"></a>00577        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j++)
<a name="l00578"></a>00578        {
<a name="l00579"></a>00579            in[0] = (i * zh / <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>)  + zy;
<a name="l00580"></a>00580            in[1] = (j * zw / <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>)  + zx;
<a name="l00581"></a>00581            f(in, out);
<a name="l00582"></a>00582            <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> result = <a class="code" href="classcorecvs_1_1RGBColor.html#a83130c46ce753b48015af139184e8da0" title="Helper method that allows to represent the double value in interval 0..1 With a real rainbow color co...">RGBColor::rainbow</a>(out[0]);
<a name="l00583"></a>00583            <a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j) = result;
<a name="l00584"></a>00584        }
<a name="l00585"></a>00585    }
<a name="l00586"></a>00586 
<a name="l00587"></a>00587    <span class="keyword">delete</span>[] <a class="code" href="mjpegDecoder_8cpp.html#aceaa8fa3989c696f63de60be33752910">in</a>;
<a name="l00588"></a>00588    <span class="keyword">delete</span>[] out;
<a name="l00589"></a>00589 }
<a name="l00590"></a>00590 
<a name="l00591"></a>00591 
<a name="l00592"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#af1eea99d617a211ad0e57c9f32153d7d">00592</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#af1eea99d617a211ad0e57c9f32153d7d">RGB24Buffer::drawIsolines</a>(
<a name="l00593"></a>00593         <span class="keywordtype">double</span> zx, <span class="keywordtype">double</span> zy,
<a name="l00594"></a>00594         <span class="keywordtype">double</span> zh, <span class="keywordtype">double</span> zw,
<a name="l00595"></a>00595         <span class="keywordtype">double</span> steps,
<a name="l00596"></a>00596         <a class="code" href="classcorecvs_1_1FunctionArgs.html" title="This class is a virtual version of a .">FunctionArgs</a> &amp;f)
<a name="l00597"></a>00597 {
<a name="l00598"></a>00598    <span class="keywordtype">int</span> i,j;
<a name="l00599"></a>00599    <span class="keywordflow">if</span> (f.<a class="code" href="classcorecvs_1_1FunctionArgs.html#aa837d1c8bd9362e7e2290abbad0a61ee">inputs</a> &lt; 2)
<a name="l00600"></a>00600        <span class="keywordflow">return</span>;
<a name="l00601"></a>00601 
<a name="l00602"></a>00602    <a class="code" href="classcorecvs_1_1AbstractBuffer.html" title="This is a common buffer template.">AbstractBuffer&lt;double&gt;</a> *values = <span class="keyword">new</span> <a class="code" href="classcorecvs_1_1AbstractBuffer.html" title="This is a common buffer template.">AbstractBuffer&lt;double&gt;</a>(this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a6be5a0969d374904dc4ff6cd576c9332" title="Buffer size getter.">getSize</a>());
<a name="l00603"></a>00603 
<a name="l00604"></a>00604    <span class="keywordtype">double</span> *<a class="code" href="structin.html">in</a> =  <span class="keyword">new</span> <span class="keywordtype">double</span>[f.<a class="code" href="classcorecvs_1_1FunctionArgs.html#aa837d1c8bd9362e7e2290abbad0a61ee">inputs</a> ];
<a name="l00605"></a>00605    <span class="keywordtype">double</span> *out = <span class="keyword">new</span> <span class="keywordtype">double</span>[f.<a class="code" href="classcorecvs_1_1FunctionArgs.html#ab8daa69226fddaaeb41278265dbffa1b">outputs</a>];
<a name="l00606"></a>00606    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; f.<a class="code" href="classcorecvs_1_1FunctionArgs.html#aa837d1c8bd9362e7e2290abbad0a61ee">inputs</a>; i++) {
<a name="l00607"></a>00607        in[i] = 0.0;
<a name="l00608"></a>00608    }
<a name="l00609"></a>00609 
<a name="l00610"></a>00610    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>; i++)
<a name="l00611"></a>00611    {
<a name="l00612"></a>00612        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j++)
<a name="l00613"></a>00613        {
<a name="l00614"></a>00614            in[0] = (i * zh / <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>)  + zy;
<a name="l00615"></a>00615            in[1] = (j * zw / <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>)  + zx;
<a name="l00616"></a>00616            f(in, out);
<a name="l00617"></a>00617            values-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j) = out[0];
<a name="l00618"></a>00618           <span class="comment">/* if (j == w / 2) {</span>
<a name="l00619"></a>00619 <span class="comment">               printf(&quot;out: [%d %d] %lf\n&quot;, i, j, out[0]);</span>
<a name="l00620"></a>00620 <span class="comment">           }*/</span>
<a name="l00621"></a>00621        }
<a name="l00622"></a>00622    }
<a name="l00623"></a>00623 
<a name="l00624"></a>00624    <span class="keywordflow">for</span> (i = 1; i &lt; h - 1; i++)
<a name="l00625"></a>00625    {
<a name="l00626"></a>00626        <span class="keywordflow">for</span> (j = 1; j &lt; w - 1; j++)
<a name="l00627"></a>00627        {
<a name="l00628"></a>00628            <span class="keywordtype">double</span> c = values-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j);
<a name="l00629"></a>00629            <span class="keywordtype">double</span> r = values-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j + 1);
<a name="l00630"></a>00630            <span class="keywordtype">double</span> l = values-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i + 1,j);
<a name="l00631"></a>00631 
<a name="l00632"></a>00632            <span class="keywordtype">double</span> ls = ((int) (c * steps)) / steps;
<a name="l00633"></a>00633            <span class="keywordtype">double</span> hs = ((int) (c * steps) + 1) / steps;
<a name="l00634"></a>00634            <span class="keywordflow">if</span> (r &lt; ls || r &gt; hs ||
<a name="l00635"></a>00635                l &lt; ls || l &gt; hs )
<a name="l00636"></a>00636                <a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j) = <a class="code" href="classcorecvs_1_1RGBColor.html#af71af180c1a4aa8058e56383d5cd49dd">RGBColor::gray</a>(128);
<a name="l00637"></a>00637        }
<a name="l00638"></a>00638    }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640    deletearr_safe(in);
<a name="l00641"></a>00641    deletearr_safe(out);
<a name="l00642"></a>00642    delete_safe(values);
<a name="l00643"></a>00643 }
<a name="l00644"></a>00644 
<a name="l00645"></a>00645 
<a name="l00646"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#ac702eae78cf518c1f8d81db7598c999d">00646</a> <span class="keywordtype">void</span> <a class="code" href="classcorecvs_1_1RGB24Buffer.html#ac702eae78cf518c1f8d81db7598c999d">RGB24Buffer::fillWithYUYV</a> (<a class="code" href="stdint__win_8h.html#a9a941819355e6f658991890ff66b4b0e">uint8_t</a> *yuyv)
<a name="l00647"></a>00647 {
<a name="l00648"></a>00648     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>; i++)
<a name="l00649"></a>00649     {
<a name="l00650"></a>00650         <span class="keywordtype">int</span> j = 0;
<a name="l00651"></a>00651 <span class="preprocessor">#ifdef WITH_SSE</span>
<a name="l00652"></a>00652 <span class="preprocessor"></span>        <span class="keyword">const</span> <span class="keywordtype">int</span> span = SSEReader8BBBBBBBB_DDDDDDDD::BYTE_STEP / <span class="keyword">sizeof</span>(<a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a>);
<a name="l00653"></a>00653         <span class="comment">/* Checking that we have a full span to read */</span>
<a name="l00654"></a>00654         <span class="keywordflow">for</span> (; j + span &lt;= <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a> ; j += span)
<a name="l00655"></a>00655         {
<a name="l00656"></a>00656             <a class="code" href="classcorecvs_1_1FixedVector.html">FixedVector&lt;Int16x8,4&gt;</a> r = <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#aeb4700e605ab656937deb7d76963aa62">SSEReader8BBBB_DDDD::read</a>((<a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> *)yuyv);
<a name="l00657"></a>00657 
<a name="l00658"></a>00658             <a class="code" href="classcorecvs_1_1Int16x8.html">Int16x8</a> cy1 = r[0] - <a class="code" href="classcorecvs_1_1Int16x8.html">Int16x8</a>((<a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>) 16);
<a name="l00659"></a>00659             Int16x8 cu  = r[1] - Int16x8((<a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>)128);
<a name="l00660"></a>00660             Int16x8 cy2 = r[2] - Int16x8((<a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>) 16);
<a name="l00661"></a>00661             Int16x8 cv  = r[3] - Int16x8((<a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>)128);
<a name="l00662"></a>00662 
<a name="l00663"></a>00663             Int16x8 con0  ((<a class="code" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a>)0);
<a name="l00664"></a>00664             Int16x8 con255((<a class="code" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a>)0xFF);
<a name="l00665"></a>00665 
<a name="l00666"></a>00666             <span class="comment">/* coefficients */</span>
<a name="l00667"></a>00667 
<a name="l00668"></a>00668             <span class="comment">/* This is a hack to fit into 16bit register */</span>
<a name="l00669"></a>00669             Int16x8 con100((<a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>)(100 / 4));
<a name="l00670"></a>00670             Int16x8 con128((<a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>)(128 / 4));
<a name="l00671"></a>00671             Int16x8 con208((<a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>)(208 / 4));
<a name="l00672"></a>00672             Int16x8 con298((<a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>)(298 / 4));
<a name="l00673"></a>00673             Int16x8 con516((<a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>)(516 / 4));
<a name="l00674"></a>00674             Int16x8 con409((<a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>)(409 / 4));
<a name="l00675"></a>00675 
<a name="l00676"></a>00676             <a class="code" href="classcorecvs_1_1FixedVector.html">FixedVector&lt;Int16x8, 8&gt;</a> result;
<a name="l00677"></a>00677             <span class="keyword">enum</span> {
<a name="l00678"></a>00678                 B1,
<a name="l00679"></a>00679                 G1,
<a name="l00680"></a>00680                 R1,
<a name="l00681"></a>00681                 ZERO1,
<a name="l00682"></a>00682                 B2,
<a name="l00683"></a>00683                 G2,
<a name="l00684"></a>00684                 R2,
<a name="l00685"></a>00685                 ZERO2
<a name="l00686"></a>00686             };
<a name="l00687"></a>00687 
<a name="l00688"></a>00688             Int16x8 dr = con128               + con409 * cv;
<a name="l00689"></a>00689             Int16x8 dg = con128 - con100 * cu - con208 * cv;
<a name="l00690"></a>00690             Int16x8 db = con128 + con516 * cu              ;
<a name="l00691"></a>00691 
<a name="l00692"></a>00692             Int16x8 dy1 = con298 * cy1;
<a name="l00693"></a>00693             Int16x8 dy2 = con298 * cy2;
<a name="l00694"></a>00694 
<a name="l00695"></a>00695             result[R1] = (dy1 + dr) &gt;&gt; 6;
<a name="l00696"></a>00696             result[G1] = (dy1 + dg) &gt;&gt; 6;
<a name="l00697"></a>00697             result[B1] = (dy1 + db) &gt;&gt; 6;
<a name="l00698"></a>00698             result[ZERO1] = Int16x8((<a class="code" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a>)0);
<a name="l00699"></a>00699 
<a name="l00700"></a>00700             result[R2] = (dy2 + dr) &gt;&gt; 6;
<a name="l00701"></a>00701             result[G2] = (dy2 + dg) &gt;&gt; 6;
<a name="l00702"></a>00702             result[B2] = (dy2 + db) &gt;&gt; 6;
<a name="l00703"></a>00703             result[ZERO2] = Int16x8((<a class="code" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a>)0);
<a name="l00704"></a>00704 
<a name="l00705"></a>00705 <span class="preprocessor">#ifdef USE_NONUNROLLED_LOOP</span>
<a name="l00706"></a>00706 <span class="preprocessor"></span>            <span class="comment">/* TODO: Use saturated arithmetics instead probably*/</span>
<a name="l00707"></a>00707             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = B1; k &lt; ZERO1; k++)
<a name="l00708"></a>00708             {
<a name="l00709"></a>00709 
<a name="l00710"></a>00710                 result[k] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[k] &gt; con255, con255   , result[k]);
<a name="l00711"></a>00711                 result[k] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[k] &gt; con0  , result[k], con0     );
<a name="l00712"></a>00712                 <span class="keywordtype">int</span> k1 = k + B2;
<a name="l00713"></a>00713                 result[k1] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[k1] &gt; con255, con255   , result[k1]);
<a name="l00714"></a>00714                 result[k1] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[k1] &gt; con0  , result[k1], con0     );
<a name="l00715"></a>00715             }
<a name="l00716"></a>00716 <span class="preprocessor">#else</span>
<a name="l00717"></a>00717 <span class="preprocessor"></span>            result[R1] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[R1] &gt; con255, con255   , result[R1]);
<a name="l00718"></a>00718             result[R1] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[R1] &gt; con0  , result[R1], con0     );
<a name="l00719"></a>00719             result[G1] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[G1] &gt; con255, con255   , result[G1]);
<a name="l00720"></a>00720             result[G1] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[G1] &gt; con0  , result[G1], con0     );
<a name="l00721"></a>00721             result[B1] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[B1] &gt; con255, con255   , result[B1]);
<a name="l00722"></a>00722             result[B1] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[B1] &gt; con0  , result[B1], con0     );
<a name="l00723"></a>00723 
<a name="l00724"></a>00724             result[R2] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[R2] &gt; con255, con255   , result[R2]);
<a name="l00725"></a>00725             result[R2] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[R2] &gt; con0  , result[R2], con0     );
<a name="l00726"></a>00726             result[G2] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[G2] &gt; con255, con255   , result[G2]);
<a name="l00727"></a>00727             result[G2] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[G2] &gt; con0  , result[G2], con0     );
<a name="l00728"></a>00728             result[B2] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[B2] &gt; con255, con255   , result[B2]);
<a name="l00729"></a>00729             result[B2] = <a class="code" href="classcorecvs_1_1SSEMath.html#a4530a03f4095c6f7a5056be6303e5feb">SSEMath::selector</a>(result[B2] &gt; con0  , result[B2], con0     );
<a name="l00730"></a>00730 <span class="preprocessor">#endif</span>
<a name="l00731"></a>00731 <span class="preprocessor"></span>
<a name="l00732"></a>00732             <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a32a28f978d0aa9b433c23218e3485c99">SSEReader8BBBBBBBB_DDDDDDDD::write</a>(result, (<a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> *)&amp;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j));
<a name="l00733"></a>00733             yuyv += SSEReader8BBBB_DDDD::BYTE_STEP;
<a name="l00734"></a>00734         }
<a name="l00735"></a>00735 <span class="preprocessor">#endif</span>
<a name="l00736"></a>00736 <span class="preprocessor"></span>
<a name="l00737"></a>00737         <span class="keywordflow">for</span> (; j + 2 &lt;= <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j+=2)
<a name="l00738"></a>00738         {
<a name="l00739"></a>00739             <span class="keywordtype">int</span> y1 = yuyv[0];
<a name="l00740"></a>00740             <span class="keywordtype">int</span> u  = yuyv[1];
<a name="l00741"></a>00741             <span class="keywordtype">int</span> y2 = yuyv[2];
<a name="l00742"></a>00742             <span class="keywordtype">int</span> v  = yuyv[3];
<a name="l00743"></a>00743 
<a name="l00744"></a>00744             <span class="keywordtype">int</span> cy1 = y1 -  16;
<a name="l00745"></a>00745             <span class="keywordtype">int</span> cu  = u  - 128;
<a name="l00746"></a>00746             <span class="keywordtype">int</span> cy2 = y2 -  16;
<a name="l00747"></a>00747             <span class="keywordtype">int</span> cv  = v  - 128;
<a name="l00748"></a>00748 
<a name="l00749"></a>00749             <span class="keywordtype">int</span> r1 = ((298 * cy1            + 409 * cv + 128) &gt;&gt; 8);
<a name="l00750"></a>00750             <span class="keywordtype">int</span> g1 = ((298 * cy1 - 100 * cu - 208 * cv + 128) &gt;&gt; 8);
<a name="l00751"></a>00751             <span class="keywordtype">int</span> b1 = ((298 * cy1 + 516 * cu            + 128) &gt;&gt; 8);
<a name="l00752"></a>00752 
<a name="l00753"></a>00753             <span class="keywordflow">if</span> (r1 &gt; 255) r1 = 255;  <span class="keywordflow">if</span> (r1 &lt; 0) r1 = 0;
<a name="l00754"></a>00754             <span class="keywordflow">if</span> (g1 &gt; 255) g1 = 255;  <span class="keywordflow">if</span> (g1 &lt; 0) g1 = 0;
<a name="l00755"></a>00755             <span class="keywordflow">if</span> (b1 &gt; 255) b1 = 255;  <span class="keywordflow">if</span> (b1 &lt; 0) b1 = 0;
<a name="l00756"></a>00756 
<a name="l00757"></a>00757             <span class="keywordtype">int</span> r2 = ((298 * cy2            + 409 * cv + 128) &gt;&gt; 8);
<a name="l00758"></a>00758             <span class="keywordtype">int</span> g2 = ((298 * cy2 - 100 * cu - 208 * cv + 128) &gt;&gt; 8);
<a name="l00759"></a>00759             <span class="keywordtype">int</span> b2 = ((298 * cy2 + 516 * cu            + 128) &gt;&gt; 8);
<a name="l00760"></a>00760 
<a name="l00761"></a>00761             <span class="keywordflow">if</span> (r2 &gt; 255) r2 = 255;  <span class="keywordflow">if</span> (r2 &lt; 0) r2 = 0;
<a name="l00762"></a>00762             <span class="keywordflow">if</span> (g2 &gt; 255) g2 = 255;  <span class="keywordflow">if</span> (g2 &lt; 0) g2 = 0;
<a name="l00763"></a>00763             <span class="keywordflow">if</span> (b2 &gt; 255) b2 = 255;  <span class="keywordflow">if</span> (b2 &lt; 0) b2 = 0;
<a name="l00764"></a>00764 
<a name="l00765"></a>00765             <a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j) = <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a>(r1,g1,b1);
<a name="l00766"></a>00766             <a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j + 1) = <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a>(r2,g2,b2);
<a name="l00767"></a>00767             yuyv += 4;
<a name="l00768"></a>00768         }
<a name="l00769"></a>00769     }
<a name="l00770"></a>00770 }
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 
<a name="l00773"></a><a class="code" href="classcorecvs_1_1RGB24Buffer.html#a48e0896b4b3685b9476d1c55d45a1bec">00773</a> <a class="code" href="classcorecvs_1_1G12Buffer.html" title="TODO: Add consts where it should go.">G12Buffer</a> *<a class="code" href="classcorecvs_1_1RGB24Buffer.html#a48e0896b4b3685b9476d1c55d45a1bec">RGB24Buffer::toG12Buffer</a>()
<a name="l00774"></a>00774 {
<a name="l00775"></a>00775     <a class="code" href="classcorecvs_1_1G12Buffer.html" title="TODO: Add consts where it should go.">G12Buffer</a> *toReturn = <span class="keyword">new</span> <a class="code" href="classcorecvs_1_1G12Buffer.html" title="TODO: Add consts where it should go.">G12Buffer</a>(h,w, <span class="keyword">false</span>);
<a name="l00776"></a>00776     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a88e969182e3f07bb3600de841b409e9b">h</a>; i++)
<a name="l00777"></a>00777     {
<a name="l00778"></a>00778         <a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a> *<a class="code" href="structin.html">in</a>  = &amp;this-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,0);
<a name="l00779"></a>00779         <a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> *out = &amp;toReturn-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,0);
<a name="l00780"></a>00780         <span class="keywordtype">int</span> j = 0;
<a name="l00781"></a>00781 <span class="preprocessor">#ifdef WITH_SSE_</span>
<a name="l00782"></a>00782 <span class="preprocessor"></span>        <span class="keyword">const</span> <span class="keywordtype">int</span> inspan  = SSEReader8BBBB_DDDD::BYTE_STEP / <span class="keyword">sizeof</span>(<a class="code" href="classcorecvs_1_1RGBColor.html" title="I use inheritance because no new data members will be added.">RGBColor</a>);
<a name="l00783"></a>00783         <span class="keyword">const</span> <span class="keywordtype">int</span> outspan = 8;
<a name="l00784"></a>00784 
<a name="l00785"></a>00785         <a class="code" href="classcorecvs_1_1Int16x8.html">Int16x8</a> conR(11);
<a name="l00786"></a>00786         <a class="code" href="classcorecvs_1_1Int16x8.html">Int16x8</a> conG(16);
<a name="l00787"></a>00787         <a class="code" href="classcorecvs_1_1Int16x8.html">Int16x8</a> conB( 5);
<a name="l00788"></a>00788 
<a name="l00789"></a>00789         <span class="keywordflow">for</span> (; j + inspan &lt;= <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j += inspan)
<a name="l00790"></a>00790         {
<a name="l00791"></a>00791             <a class="code" href="classcorecvs_1_1FixedVector.html">FixedVector&lt;Int16x8,4&gt;</a> r = <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#aeb4700e605ab656937deb7d76963aa62">SSEReader8BBBB_DDDD::read</a>((<a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>*)in);
<a name="l00792"></a>00792             <span class="keyword">enum</span> {B1, G1, R1};
<a name="l00793"></a>00793 
<a name="l00794"></a>00794             <a class="code" href="classcorecvs_1_1Int16x8.html">Int16x8</a> result = (conR * r[R1] + conG * r[G1] + conB * r[B1]) &gt;&gt; 1;
<a name="l00795"></a>00795             result.<a class="code" href="classcorecvs_1_1Int16x8.html#ac2b1cbe147350d2bded6f7057a20b171">save</a>(out);
<a name="l00796"></a>00796             in  += inspan;
<a name="l00797"></a>00797             out += outspan;
<a name="l00798"></a>00798         }
<a name="l00799"></a>00799 
<a name="l00800"></a>00800 <span class="preprocessor">#endif</span>
<a name="l00801"></a>00801 <span class="preprocessor"></span>        <span class="keywordflow">for</span> (; j &lt; <a class="code" href="classcorecvs_1_1AbstractBufferParams.html#a7ff3d372b9a613e451a379a4427e2623">w</a>; j++)
<a name="l00802"></a>00802         {
<a name="l00803"></a>00803             <a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> result = <a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i,j).luma12();
<a name="l00804"></a>00804             <span class="keywordflow">if</span> (result &gt; <a class="code" href="classcorecvs_1_1G12Buffer.html#a049bb3934646dbcf411df2ffde1478ac">G12Buffer::BUFFER_MAX_VALUE</a> - 1) result = <a class="code" href="classcorecvs_1_1G12Buffer.html#a049bb3934646dbcf411df2ffde1478ac">G12Buffer::BUFFER_MAX_VALUE</a> - 1;
<a name="l00805"></a>00805             toReturn-&gt;<a class="code" href="classcorecvs_1_1AbstractBuffer.html#a98f72526738a0c4ce8a0b72a3b5c28b9" title="The element getter.">element</a>(i, j) = result;
<a name="l00806"></a>00806         }
<a name="l00807"></a>00807     }
<a name="l00808"></a>00808     <span class="keywordflow">return</span> toReturn;
<a name="l00809"></a>00809 }
<a name="l00810"></a>00810 
<a name="l00811"></a>00811 
<a name="l00812"></a>00812 } <span class="comment">//namespace corecvs</span>
<a name="l00813"></a>00813 
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 12 2013 23:44:36 for DeepView by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
