<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DeepView: AbstractCalculationThread Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">DeepView
   &#160;<span id="projectnumber">0.02</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#signals">Signals</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-slots">Protected Slots</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">AbstractCalculationThread Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="AbstractCalculationThread" -->
<p><code>#include &lt;<a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for AbstractCalculationThread:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classAbstractCalculationThread__inherit__graph.svg" width="200" height="195"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for AbstractCalculationThread:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classAbstractCalculationThread__coll__graph.svg" width="100%" height="280"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classAbstractCalculationThread-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4da">CalculationState</a> { <br/>
&#160;&#160;<a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa412a72e1bad8e8e5cf6d8091436d9229">CALCULATION_NOT_STARTED</a> =  0, 
<a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa18fa0ad2c8623bdff08e207269c7c512">CALCULATION_AWAITING_DATA</a>, 
<a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa39f4901f2976e282b09e0027050c3b88">CALCULATION_ACTIVE</a>, 
<a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa4435235084300335baa70c1115c39985">CALCULATION_PAUSED</a>, 
<br/>
&#160;&#160;<a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daaeee748c80d24a1e00dcca18edf06e55c">CALCULATION_TERMINATED</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="signals"></a>
Signals</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#ac58abb000054cad2dbd74475277dcc3d">processingFinished</a> (<a class="el" href="classAbstractOutputData.html">AbstractOutputData</a> *output)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#accff9f3bbf936d31d194b17756aa8ebc">calculationStateChanged</a> (<a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4da">AbstractCalculationThread::CalculationState</a> state)</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a7b2f8cc7e56e691f5e539b78c6a4e0be">AbstractCalculationThread</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#ab222577c7db4b2c4081fe131e13f7d25">~AbstractCalculationThread</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a4c447a4cceb3cbf61d827c7ef6b4c9bb">run</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a195e9fbf4625286e9df8309c7e1b3461">setCalculationState</a> (<a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4da">CalculationState</a> state)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4da">CalculationState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a64d2f2e8f290eb5a0f7416112081ea10">getCalculationState</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFrames.html">Frames</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a165e9c3a97101c8ca445c995889ac6f3">getFramesHolder</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a1b793a97bb171d37d3258bda7fbf404a">setImageCaptureInterface</a> (<a class="el" href="classImageCaptureInterface.html">ImageCaptureInterface</a> *captureInterface)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcorecvs_1_1FiltersCollection.html">FiltersCollection</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#ac1f5153f75cba89d4b1213c1e9237812">mFiltersCollection</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a0245b40575283af33ea2e0077d54364e">stateNames</a> []</td></tr>
<tr><td colspan="2"><h2><a name="pro-slots"></a>
Protected Slots</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a7ebfcd2976250c8ad15e643517a70a08">newFrameReady</a> (<a class="el" href="structframe__data__t.html">frame_data_t</a> frameData)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">New frame data is ready to be processed.  <a href="#a7ebfcd2976250c8ad15e643517a70a08"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a0947cebe1b8817e7e50cb02f88ed9070">pauseCalculation</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pauses calculation.  <a href="#a0947cebe1b8817e7e50cb02f88ed9070"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a0315964951143d0a3f5a28aca612feeb">resumeCalculation</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Resumes calculation Should only be called as a asynchronous slot function.  <a href="#a0315964951143d0a3f5a28aca612feeb"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classAbstractOutputData.html">AbstractOutputData</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a7e6948d0d2093157fc18acfdf36d35ae">processNewData</a> ()=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the main calculation routine called when a new frame is received.  <a href="#a7e6948d0d2093157fc18acfdf36d35ae"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classImageCaptureInterface.html">ImageCaptureInterface</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a69089cfc7f126d9803d2dfd98714d0e5">mCaptureInterface</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The capture interface we fetch the frames from.  <a href="#a69089cfc7f126d9803d2dfd98714d0e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFrames.html">Frames</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a7b69d907795df8dbd9544fb16d474446">mFrames</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last two sets of frames acquired from the capture device(s)  <a href="#a7b69d907795df8dbd9544fb16d474446"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a51d905729ecbbe8b6a5050bded987717">mInterframeDelay</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay between this and previous frame.  <a href="#a51d905729ecbbe8b6a5050bded987717"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#a40e40e0f791e5f4817369c7bcdd63860">mLastFrameTimeStamp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4da">CalculationState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e">mCurrentState</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Current calculation state This state can't be changed directly, but can be queried.  <a href="#af7fe7173f1c1af49a9d215b35922435e"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00036">36</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a0e17177076222f19148df7f86ea4d4da"></a><!-- doxytag: member="AbstractCalculationThread::CalculationState" ref="a0e17177076222f19148df7f86ea4d4da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4da">AbstractCalculationThread::CalculationState</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a0e17177076222f19148df7f86ea4d4daa412a72e1bad8e8e5cf6d8091436d9229"></a><!-- doxytag: member="CALCULATION_NOT_STARTED" ref="a0e17177076222f19148df7f86ea4d4daa412a72e1bad8e8e5cf6d8091436d9229" args="" -->CALCULATION_NOT_STARTED</em>&nbsp;</td><td>
<p>Thread is just created but still not running. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0e17177076222f19148df7f86ea4d4daa18fa0ad2c8623bdff08e207269c7c512"></a><!-- doxytag: member="CALCULATION_AWAITING_DATA" ref="a0e17177076222f19148df7f86ea4d4daa18fa0ad2c8623bdff08e207269c7c512" args="" -->CALCULATION_AWAITING_DATA</em>&nbsp;</td><td>
<p>Thread is blocked waiting for signals with frames. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0e17177076222f19148df7f86ea4d4daa39f4901f2976e282b09e0027050c3b88"></a><!-- doxytag: member="CALCULATION_ACTIVE" ref="a0e17177076222f19148df7f86ea4d4daa39f4901f2976e282b09e0027050c3b88" args="" -->CALCULATION_ACTIVE</em>&nbsp;</td><td>
<p>Thread is processing the frame. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0e17177076222f19148df7f86ea4d4daa4435235084300335baa70c1115c39985"></a><!-- doxytag: member="CALCULATION_PAUSED" ref="a0e17177076222f19148df7f86ea4d4daa4435235084300335baa70c1115c39985" args="" -->CALCULATION_PAUSED</em>&nbsp;</td><td>
<p>Thread is paused, it will ignore incoming frames. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0e17177076222f19148df7f86ea4d4daaeee748c80d24a1e00dcca18edf06e55c"></a><!-- doxytag: member="CALCULATION_TERMINATED" ref="a0e17177076222f19148df7f86ea4d4daaeee748c80d24a1e00dcca18edf06e55c" args="" -->CALCULATION_TERMINATED</em>&nbsp;</td><td>
<p>Thread has exited. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00041">41</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa412a72e1bad8e8e5cf6d8091436d9229" title="Thread is just created but still not running.">CALCULATION_NOT_STARTED</a> = 0, <span class="comment">/**&lt; Thread is just created but still not running */</span>
            <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa18fa0ad2c8623bdff08e207269c7c512" title="Thread is blocked waiting for signals with frames.">CALCULATION_AWAITING_DATA</a>,   <span class="comment">/**&lt; Thread is blocked waiting for signals with frames */</span>
            <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa39f4901f2976e282b09e0027050c3b88" title="Thread is processing the frame.">CALCULATION_ACTIVE</a>,          <span class="comment">/**&lt; Thread is processing the frame */</span>
            <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa4435235084300335baa70c1115c39985" title="Thread is paused, it will ignore incoming frames.">CALCULATION_PAUSED</a>,          <span class="comment">/**&lt; Thread is paused, it will ignore incoming frames */</span>
            <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daaeee748c80d24a1e00dcca18edf06e55c" title="Thread has exited.">CALCULATION_TERMINATED</a>       <span class="comment">/**&lt; Thread has exited */</span>
        };
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7b2f8cc7e56e691f5e539b78c6a4e0be"></a><!-- doxytag: member="AbstractCalculationThread::AbstractCalculationThread" ref="a7b2f8cc7e56e691f5e539b78c6a4e0be" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAbstractCalculationThread.html#a7b2f8cc7e56e691f5e539b78c6a4e0be">AbstractCalculationThread::AbstractCalculationThread</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="abstractCalculationThread_8cpp_source.html#l00035">35</a> of file <a class="el" href="abstractCalculationThread_8cpp_source.html">abstractCalculationThread.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                     :
    <a class="code" href="classAbstractCalculationThread.html#a69089cfc7f126d9803d2dfd98714d0e5" title="The capture interface we fetch the frames from.">mCaptureInterface</a>(NULL)
  , <a class="code" href="classAbstractCalculationThread.html#a51d905729ecbbe8b6a5050bded987717" title="Delay between this and previous frame.">mInterframeDelay</a>(0)
  , <a class="code" href="classAbstractCalculationThread.html#a40e40e0f791e5f4817369c7bcdd63860">mLastFrameTimeStamp</a>(0)
  , <a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a>(<a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa412a72e1bad8e8e5cf6d8091436d9229" title="Thread is just created but still not running.">CALCULATION_NOT_STARTED</a>)
{
    qRegisterMetaType&lt;AbstractCalculationThread::CalculationState&gt;(<span class="stringliteral">&quot;AbstractCalculationThread::CalculationState&quot;</span>);

    <span class="comment">// TODO: this is a workaround to fix the problem of AbstractCalculationThread slots</span>
    <span class="comment">//       being processed in a wrong thread context.</span>
    <span class="comment">//       AbstractCalculationThread should not inherit from QThread but rather be</span>
    <span class="comment">//       created in the context of a new thread.</span>
    moveToThread(<span class="keyword">this</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab222577c7db4b2c4081fe131e13f7d25"></a><!-- doxytag: member="AbstractCalculationThread::~AbstractCalculationThread" ref="ab222577c7db4b2c4081fe131e13f7d25" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classAbstractCalculationThread.html#ab222577c7db4b2c4081fe131e13f7d25">AbstractCalculationThread::~AbstractCalculationThread</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00086">86</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>
<div class="fragment"><pre class="fragment">{}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="accff9f3bbf936d31d194b17756aa8ebc"></a><!-- doxytag: member="AbstractCalculationThread::calculationStateChanged" ref="accff9f3bbf936d31d194b17756aa8ebc" args="(AbstractCalculationThread::CalculationState state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classAbstractCalculationThread.html#accff9f3bbf936d31d194b17756aa8ebc">AbstractCalculationThread::calculationStateChanged</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4da">AbstractCalculationThread::CalculationState</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="abstractCalculationThread_8cpp_source.html#l00066">newFrameReady()</a>, <a class="el" href="abstractCalculationThread_8cpp_source.html#l00144">pauseCalculation()</a>, and <a class="el" href="abstractCalculationThread_8cpp_source.html#l00161">resumeCalculation()</a>.</p>

</div>
</div>
<a class="anchor" id="a64d2f2e8f290eb5a0f7416112081ea10"></a><!-- doxytag: member="AbstractCalculationThread::getCalculationState" ref="a64d2f2e8f290eb5a0f7416112081ea10" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4da">CalculationState</a> <a class="el" href="classAbstractCalculationThread.html#a64d2f2e8f290eb5a0f7416112081ea10">AbstractCalculationThread::getCalculationState</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00095">95</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>References <a class="el" href="abstractCalculationThread_8h_source.html#l00135">mCurrentState</a>.</p>

<p>Referenced by <a class="el" href="baseHostDialog_8cpp_source.html#l00605">BaseHostDialog::play()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keywordflow">return</span> <a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a165e9c3a97101c8ca445c995889ac6f3"></a><!-- doxytag: member="AbstractCalculationThread::getFramesHolder" ref="a165e9c3a97101c8ca445c995889ac6f3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFrames.html">Frames</a>* <a class="el" href="classAbstractCalculationThread.html#a165e9c3a97101c8ca445c995889ac6f3">AbstractCalculationThread::getFramesHolder</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00100">100</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>References <a class="el" href="abstractCalculationThread_8h_source.html#l00122">mFrames</a>.</p>

<p>Referenced by <a class="el" href="baseHostDialog_8cpp_source.html#l00446">BaseHostDialog::initCalculator()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keywordflow">return</span> &amp;<a class="code" href="classAbstractCalculationThread.html#a7b69d907795df8dbd9544fb16d474446" title="Holds the last two sets of frames acquired from the capture device(s)">mFrames</a>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a7ebfcd2976250c8ad15e643517a70a08"></a><!-- doxytag: member="AbstractCalculationThread::newFrameReady" ref="a7ebfcd2976250c8ad15e643517a70a08" args="(frame_data_t frameData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classAbstractCalculationThread.html#a7ebfcd2976250c8ad15e643517a70a08">AbstractCalculationThread::newFrameReady</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structframe__data__t.html">frame_data_t</a>&#160;</td>
          <td class="paramname"><em>frameData</em></td><td>)</td>
          <td><code> [protected, virtual, slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>New frame data is ready to be processed. </p>
<p>Connect this slot to the newFrameReady signal emitted by the capture interface. In this slot we actually grab the frames and trigger the calculation.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Do not override this implementation unless you really know what you are doing.</dd></dl>
<p>This function processes the newFrames from the input queue. Depending on current state this function either processes of ignores input data.</p>
<p>If current state is CALCULATION_AWAITING_DATA the state is changed to CALCULATION_ACTIVE and the awaiting events queue is flushed by QCoreApplication::processEvents();</p>
<p>If current state is not CALCULATION_AWAITING_DATA all input is ignored </p>
<p>Here is the trick, this function can call newFrameReady recursively, but it will exit with dropped frame. No other function can change currentState, only next state is altered.</p>

<p>Definition at line <a class="el" href="abstractCalculationThread_8cpp_source.html#l00066">66</a> of file <a class="el" href="abstractCalculationThread_8cpp_source.html">abstractCalculationThread.cpp</a>.</p>

<p>References <a class="el" href="abstractCalculationThread_8h_source.html#l00045">CALCULATION_ACTIVE</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00044">CALCULATION_AWAITING_DATA</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00046">CALCULATION_PAUSED</a>, <a class="el" href="classAbstractCalculationThread.html#accff9f3bbf936d31d194b17756aa8ebc">calculationStateChanged()</a>, <a class="el" href="global_8h_source.html#l00147">DOTRACE</a>, <a class="el" href="frames_8cpp_source.html#l00051">Frames::fetchNewFrames()</a>, <a class="el" href="frames_8h_source.html#l00037">Frames::getCurrentFrame()</a>, <a class="el" href="frames_8h_source.html#l00025">Frames::MAX_INPUTS_NUMBER</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00117">mCaptureInterface</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00135">mCurrentState</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00122">mFrames</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00127">mInterframeDelay</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00129">mLastFrameTimeStamp</a>, <a class="el" href="classAbstractCalculationThread.html#ac58abb000054cad2dbd74475277dcc3d">processingFinished()</a>, <a class="el" href="classAbstractCalculationThread.html#a7e6948d0d2093157fc18acfdf36d35ae">processNewData()</a>, <a class="el" href="global_8h_source.html#l00137">SYNC_PRINT</a>, <a class="el" href="imageCaptureInterface_8h_source.html#l00020">frame_data_t::timestamp</a>, and <a class="el" href="frames_8h_source.html#l00044">Frames::timestamp()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//    cout &lt;&lt; &quot;AbstractCalculationThread::newFrameReady called...&quot; &lt;&lt; endl;</span>

    <span class="comment">//L_INFO_P(&quot;new frame notification&quot;);</span>

    <span class="keywordflow">if</span> (!<a class="code" href="classAbstractCalculationThread.html#a69089cfc7f126d9803d2dfd98714d0e5" title="The capture interface we fetch the frames from.">mCaptureInterface</a>)
    {
        cerr &lt;&lt; <span class="stringliteral">&quot;Image capture interface was not initialized\n&quot;</span>;
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> != <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa18fa0ad2c8623bdff08e207269c7c512" title="Thread is blocked waiting for signals with frames.">CALCULATION_AWAITING_DATA</a>) {
        <span class="keywordflow">if</span> (<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> == <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa39f4901f2976e282b09e0027050c3b88" title="Thread is processing the frame.">CALCULATION_ACTIVE</a>) {
            <a class="code" href="global_8h.html#a8fc171473e59dec1134d86647268481f" title="TODO: Add flush.">DOTRACE</a>((<span class="stringliteral">&quot;AbstractCalculationThread::dropped frame\n&quot;</span>));
        }
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (frameData.<a class="code" href="structframe__data__t.html#a96d1b8ad57306e82d3e94720b164cf47">timestamp</a> &lt;= <a class="code" href="classAbstractCalculationThread.html#a40e40e0f791e5f4817369c7bcdd63860">mLastFrameTimeStamp</a>)
    {
        <span class="comment">//cout &lt;&lt; &quot;Frame was received second time. Previous TS: &quot;&lt;&lt; lastFrameTimeStamp &lt;&lt; &quot; Current TS: &quot; &lt;&lt; frameData.timestamp &lt;&lt; &quot;\n&quot;;</span>
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> = <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa39f4901f2976e282b09e0027050c3b88" title="Thread is processing the frame.">CALCULATION_ACTIVE</a>;
    <span class="comment">//emit calculationStateChanged(getCalculationState());</span>
<span class="comment"></span>
<span class="comment">    /**</span>
<span class="comment">     * Here is the trick, this function can call newFrameReady recursively,</span>
<span class="comment">     * but it will exit with dropped frame.</span>
<span class="comment">     * No other function can change currentState, only next state is altered.</span>
<span class="comment">     *</span>
<span class="comment">     **/</span>
    QCoreApplication::processEvents();

    <span class="comment">/* On exit from processEvents() we have flushed input queue of the thread */</span>
    <span class="comment">/* State can be changed already while in processEvents */</span>
    <span class="keywordflow">if</span> (<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> == <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa39f4901f2976e282b09e0027050c3b88" title="Thread is processing the frame.">CALCULATION_ACTIVE</a>)
    {
        <a class="code" href="stdint__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> oldStamp   = <a class="code" href="classAbstractCalculationThread.html#a7b69d907795df8dbd9544fb16d474446" title="Holds the last two sets of frames acquired from the capture device(s)">mFrames</a>.<a class="code" href="classFrames.html#a281e40269cffff48d34c1da9cdeb4506">timestamp</a>();
        <a class="code" href="classAbstractCalculationThread.html#a7b69d907795df8dbd9544fb16d474446" title="Holds the last two sets of frames acquired from the capture device(s)">mFrames</a>.<a class="code" href="classFrames.html#a7456fca6f6756fe65dee67dd8287411e">fetchNewFrames</a>(<a class="code" href="classAbstractCalculationThread.html#a69089cfc7f126d9803d2dfd98714d0e5" title="The capture interface we fetch the frames from.">mCaptureInterface</a>);
        <a class="code" href="classAbstractCalculationThread.html#a51d905729ecbbe8b6a5050bded987717" title="Delay between this and previous frame.">mInterframeDelay</a>    = <a class="code" href="classAbstractCalculationThread.html#a7b69d907795df8dbd9544fb16d474446" title="Holds the last two sets of frames acquired from the capture device(s)">mFrames</a>.<a class="code" href="classFrames.html#a281e40269cffff48d34c1da9cdeb4506">timestamp</a>() - oldStamp;
        <a class="code" href="classAbstractCalculationThread.html#a40e40e0f791e5f4817369c7bcdd63860">mLastFrameTimeStamp</a> = <a class="code" href="classAbstractCalculationThread.html#a7b69d907795df8dbd9544fb16d474446" title="Holds the last two sets of frames acquired from the capture device(s)">mFrames</a>.<a class="code" href="classFrames.html#a281e40269cffff48d34c1da9cdeb4506">timestamp</a>();
<span class="comment">/*</span>
<span class="comment">        cout &lt;&lt; &quot;AbstractCalculationThread::requesting frame...&quot; &lt;&lt; endl;</span>
<span class="comment">        if (interframeDelay == 0) {</span>
<span class="comment">            printf(&quot;Strange - two frames with same timestamp\n&quot;);</span>
<span class="comment">        }</span>
<span class="comment">*/</span>
        <span class="keywordtype">bool</span> ok = <span class="keyword">false</span>;

        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0; <span class="keywordtype">id</span> &lt;  <a class="code" href="classFrames.html#a4ea890cbf5b42306b2f6c9df09a8b687a21fbb034d44df7e056fc99ad39bbca2e">Frames::MAX_INPUTS_NUMBER</a>; <span class="keywordtype">id</span>++) {
            ok |= (<a class="code" href="classAbstractCalculationThread.html#a7b69d907795df8dbd9544fb16d474446" title="Holds the last two sets of frames acquired from the capture device(s)">mFrames</a>.<a class="code" href="classFrames.html#a574575a77ec087df67dd270caa832edc">getCurrentFrame</a>((<a class="code" href="classFrames.html#a4ea890cbf5b42306b2f6c9df09a8b687">Frames::FrameSourceId</a>)<span class="keywordtype">id</span>) != NULL);
        }

        <span class="keywordflow">if</span> (ok) <span class="comment">/* At least one input is active */</span>
        {
            <a class="code" href="classAbstractOutputData.html" title="An empty stub for the output data obtained as the result of the calculation.">AbstractOutputData</a> *res = <a class="code" href="classAbstractCalculationThread.html#a7e6948d0d2093157fc18acfdf36d35ae" title="This is the main calculation routine called when a new frame is received.">processNewData</a>();
            <span class="keywordflow">if</span> (res != NULL)
            {
                <span class="comment">/* TODO: Possibly needs redesign. If signal is not processed there will</span>
<span class="comment">                be a memory leak. Use Smart pointers here */</span>
                emit <a class="code" href="classAbstractCalculationThread.html#ac58abb000054cad2dbd74475277dcc3d">processingFinished</a>(res);
            }
        } <span class="keywordflow">else</span> {
            <a class="code" href="global_8h.html#a49199ac38fc95393d7b14a6f0524e46d">SYNC_PRINT</a>((<span class="stringliteral">&quot;AbstractCalculationThread::newFrameReady(): No good frames. All frames are NULL\n&quot;</span>));
        }
    }

    <span class="keywordflow">if</span> (<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> == <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa4435235084300335baa70c1115c39985" title="Thread is paused, it will ignore incoming frames.">CALCULATION_PAUSED</a>) {
        emit <a class="code" href="classAbstractCalculationThread.html#accff9f3bbf936d31d194b17756aa8ebc">calculationStateChanged</a>(<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a>);
<span class="comment">//        threadPaused.wakeAll();</span>
    } <span class="keywordflow">else</span> {
        <a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> = <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa18fa0ad2c8623bdff08e207269c7c512" title="Thread is blocked waiting for signals with frames.">CALCULATION_AWAITING_DATA</a>;
    }
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classAbstractCalculationThread_a7ebfcd2976250c8ad15e643517a70a08_cgraph.svg" width="100%" height="270"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0947cebe1b8817e7e50cb02f88ed9070"></a><!-- doxytag: member="AbstractCalculationThread::pauseCalculation" ref="a0947cebe1b8817e7e50cb02f88ed9070" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classAbstractCalculationThread.html#a0947cebe1b8817e7e50cb02f88ed9070">AbstractCalculationThread::pauseCalculation</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual, slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pauses calculation. </p>
<p>Should only be called as a asynchronous slot function </p>

<p>Definition at line <a class="el" href="abstractCalculationThread_8cpp_source.html#l00144">144</a> of file <a class="el" href="abstractCalculationThread_8cpp_source.html">abstractCalculationThread.cpp</a>.</p>

<p>References <a class="el" href="abstractCalculationThread_8h_source.html#l00045">CALCULATION_ACTIVE</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00044">CALCULATION_AWAITING_DATA</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00046">CALCULATION_PAUSED</a>, <a class="el" href="classAbstractCalculationThread.html#accff9f3bbf936d31d194b17756aa8ebc">calculationStateChanged()</a>, and <a class="el" href="abstractCalculationThread_8h_source.html#l00135">mCurrentState</a>.</p>

<p>Referenced by <a class="el" href="baseCalculationThread_8cpp_source.html#l00063">BaseCalculationThread::initData()</a>, and <a class="el" href="recorderThread_8cpp_source.html#l00072">RecorderThread::processNewData()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ((<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> != <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa39f4901f2976e282b09e0027050c3b88" title="Thread is processing the frame.">CALCULATION_ACTIVE</a>) &amp;&amp; (<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> != <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa18fa0ad2c8623bdff08e207269c7c512" title="Thread is blocked waiting for signals with frames.">CALCULATION_AWAITING_DATA</a>))
    {
        cout &lt;&lt; <span class="stringliteral">&quot;There is no calculation in progress - can&#39;t pause.\n&quot;</span>;
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> == <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa18fa0ad2c8623bdff08e207269c7c512" title="Thread is blocked waiting for signals with frames.">CALCULATION_AWAITING_DATA</a>)
    {
        <a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> = <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa4435235084300335baa70c1115c39985" title="Thread is paused, it will ignore incoming frames.">CALCULATION_PAUSED</a>;
        emit <a class="code" href="classAbstractCalculationThread.html#accff9f3bbf936d31d194b17756aa8ebc">calculationStateChanged</a>(<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a>);
<span class="comment">//        threadPaused.wakeAll();</span>
    }
    <a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> = <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa4435235084300335baa70c1115c39985" title="Thread is paused, it will ignore incoming frames.">CALCULATION_PAUSED</a>;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classAbstractCalculationThread_a0947cebe1b8817e7e50cb02f88ed9070_cgraph.svg" width="100%" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac58abb000054cad2dbd74475277dcc3d"></a><!-- doxytag: member="AbstractCalculationThread::processingFinished" ref="ac58abb000054cad2dbd74475277dcc3d" args="(AbstractOutputData *output)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classAbstractCalculationThread.html#ac58abb000054cad2dbd74475277dcc3d">AbstractCalculationThread::processingFinished</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAbstractOutputData.html">AbstractOutputData</a> *&#160;</td>
          <td class="paramname"><em>output</em></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="abstractCalculationThread_8cpp_source.html#l00066">newFrameReady()</a>.</p>

</div>
</div>
<a class="anchor" id="a7e6948d0d2093157fc18acfdf36d35ae"></a><!-- doxytag: member="AbstractCalculationThread::processNewData" ref="a7e6948d0d2093157fc18acfdf36d35ae" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classAbstractOutputData.html">AbstractOutputData</a>* <a class="el" href="classAbstractCalculationThread.html#a7e6948d0d2093157fc18acfdf36d35ae">AbstractCalculationThread::processNewData</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is the main calculation routine called when a new frame is received. </p>

<p>Implemented in <a class="el" href="classBaseCalculationThread.html#a3ca1747230f995e6e6c36af232f3b43f">BaseCalculationThread</a>, and <a class="el" href="classRecorderThread.html#a829d457d9b719805753ab03d57b55ceb">RecorderThread</a>.</p>

<p>Referenced by <a class="el" href="abstractCalculationThread_8cpp_source.html#l00066">newFrameReady()</a>.</p>

</div>
</div>
<a class="anchor" id="a0315964951143d0a3f5a28aca612feeb"></a><!-- doxytag: member="AbstractCalculationThread::resumeCalculation" ref="a0315964951143d0a3f5a28aca612feeb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classAbstractCalculationThread.html#a0315964951143d0a3f5a28aca612feeb">AbstractCalculationThread::resumeCalculation</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual, slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resumes calculation Should only be called as a asynchronous slot function. </p>

<p>Definition at line <a class="el" href="abstractCalculationThread_8cpp_source.html#l00161">161</a> of file <a class="el" href="abstractCalculationThread_8cpp_source.html">abstractCalculationThread.cpp</a>.</p>

<p>References <a class="el" href="abstractCalculationThread_8h_source.html#l00044">CALCULATION_AWAITING_DATA</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00043">CALCULATION_NOT_STARTED</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00046">CALCULATION_PAUSED</a>, <a class="el" href="classAbstractCalculationThread.html#accff9f3bbf936d31d194b17756aa8ebc">calculationStateChanged()</a>, and <a class="el" href="abstractCalculationThread_8h_source.html#l00135">mCurrentState</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> == <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa412a72e1bad8e8e5cf6d8091436d9229" title="Thread is just created but still not running.">CALCULATION_NOT_STARTED</a>)
    {
        cout &lt;&lt; <span class="stringliteral">&quot;Use start() for the first time.\n&quot;</span>;
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> == <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa4435235084300335baa70c1115c39985" title="Thread is paused, it will ignore incoming frames.">CALCULATION_PAUSED</a>)
    {
        <a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> = <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa18fa0ad2c8623bdff08e207269c7c512" title="Thread is blocked waiting for signals with frames.">CALCULATION_AWAITING_DATA</a>;
        emit <a class="code" href="classAbstractCalculationThread.html#accff9f3bbf936d31d194b17756aa8ebc">calculationStateChanged</a>(<a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a>);
    }
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classAbstractCalculationThread_a0315964951143d0a3f5a28aca612feeb_cgraph.svg" width="100%" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4c447a4cceb3cbf61d827c7ef6b4c9bb"></a><!-- doxytag: member="AbstractCalculationThread::run" ref="a4c447a4cceb3cbf61d827c7ef6b4c9bb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classAbstractCalculationThread.html#a4c447a4cceb3cbf61d827c7ef6b4c9bb">AbstractCalculationThread::run</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="abstractCalculationThread_8cpp_source.html#l00051">51</a> of file <a class="el" href="abstractCalculationThread_8cpp_source.html">abstractCalculationThread.cpp</a>.</p>

<p>References <a class="el" href="abstractCalculationThread_8h_source.html#l00044">CALCULATION_AWAITING_DATA</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00047">CALCULATION_TERMINATED</a>, and <a class="el" href="abstractCalculationThread_8h_source.html#l00135">mCurrentState</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//    stateLock.lock();</span>
    <a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> = <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daa18fa0ad2c8623bdff08e207269c7c512" title="Thread is blocked waiting for signals with frames.">CALCULATION_AWAITING_DATA</a>;
<span class="comment">//    stateLock.unlock();</span>

    cout &lt;&lt; <span class="stringliteral">&quot;AbstractCalculationThread::run(): starting event loop.\n&quot;</span>;
    exec();
    cout &lt;&lt; <span class="stringliteral">&quot;AbstractCalculationThread::run(): event loop terminated.\n&quot;</span>;

<span class="comment">//    stateLock.lock();</span>
    <a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> = <a class="code" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4daaeee748c80d24a1e00dcca18edf06e55c" title="Thread has exited.">CALCULATION_TERMINATED</a>;
<span class="comment">//    stateLock.unlock();</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a195e9fbf4625286e9df8309c7e1b3461"></a><!-- doxytag: member="AbstractCalculationThread::setCalculationState" ref="a195e9fbf4625286e9df8309c7e1b3461" args="(CalculationState state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="classAbstractCalculationThread.html#a195e9fbf4625286e9df8309c7e1b3461">AbstractCalculationThread::setCalculationState</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4da">CalculationState</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00090">90</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>References <a class="el" href="abstractCalculationThread_8h_source.html#l00135">mCurrentState</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <a class="code" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e" title="Current calculation state This state can&#39;t be changed directly, but can be queried.">mCurrentState</a> = state;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a1b793a97bb171d37d3258bda7fbf404a"></a><!-- doxytag: member="AbstractCalculationThread::setImageCaptureInterface" ref="a1b793a97bb171d37d3258bda7fbf404a" args="(ImageCaptureInterface *captureInterface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classAbstractCalculationThread.html#a1b793a97bb171d37d3258bda7fbf404a">AbstractCalculationThread::setImageCaptureInterface</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classImageCaptureInterface.html">ImageCaptureInterface</a> *&#160;</td>
          <td class="paramname"><em>captureInterface</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00107">107</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>References <a class="el" href="abstractCalculationThread_8h_source.html#l00117">mCaptureInterface</a>, and <a class="el" href="abstractCalculationThread_8h_source.html#l00129">mLastFrameTimeStamp</a>.</p>

<p>Referenced by <a class="el" href="baseHostDialog_8cpp_source.html#l00304">BaseHostDialog::initCapture()</a>, and <a class="el" href="baseHostDialog_8cpp_source.html#l00220">BaseHostDialog::stopCalculation()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <a class="code" href="classAbstractCalculationThread.html#a69089cfc7f126d9803d2dfd98714d0e5" title="The capture interface we fetch the frames from.">mCaptureInterface</a> = captureInterface;
            <a class="code" href="classAbstractCalculationThread.html#a40e40e0f791e5f4817369c7bcdd63860">mLastFrameTimeStamp</a> = 0;
        }
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a69089cfc7f126d9803d2dfd98714d0e5"></a><!-- doxytag: member="AbstractCalculationThread::mCaptureInterface" ref="a69089cfc7f126d9803d2dfd98714d0e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classImageCaptureInterface.html">ImageCaptureInterface</a>* <a class="el" href="classAbstractCalculationThread.html#a69089cfc7f126d9803d2dfd98714d0e5">AbstractCalculationThread::mCaptureInterface</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The capture interface we fetch the frames from. </p>

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00117">117</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>Referenced by <a class="el" href="abstractCalculationThread_8cpp_source.html#l00066">newFrameReady()</a>, and <a class="el" href="abstractCalculationThread_8h_source.html#l00107">setImageCaptureInterface()</a>.</p>

</div>
</div>
<a class="anchor" id="af7fe7173f1c1af49a9d215b35922435e"></a><!-- doxytag: member="AbstractCalculationThread::mCurrentState" ref="af7fe7173f1c1af49a9d215b35922435e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAbstractCalculationThread.html#a0e17177076222f19148df7f86ea4d4da">CalculationState</a> <a class="el" href="classAbstractCalculationThread.html#af7fe7173f1c1af49a9d215b35922435e">AbstractCalculationThread::mCurrentState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Current calculation state This state can't be changed directly, but can be queried. </p>

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00135">135</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>Referenced by <a class="el" href="abstractCalculationThread_8h_source.html#l00095">getCalculationState()</a>, <a class="el" href="abstractCalculationThread_8cpp_source.html#l00066">newFrameReady()</a>, <a class="el" href="abstractCalculationThread_8cpp_source.html#l00144">pauseCalculation()</a>, <a class="el" href="abstractCalculationThread_8cpp_source.html#l00161">resumeCalculation()</a>, <a class="el" href="abstractCalculationThread_8cpp_source.html#l00051">run()</a>, and <a class="el" href="abstractCalculationThread_8h_source.html#l00090">setCalculationState()</a>.</p>

</div>
</div>
<a class="anchor" id="ac1f5153f75cba89d4b1213c1e9237812"></a><!-- doxytag: member="AbstractCalculationThread::mFiltersCollection" ref="ac1f5153f75cba89d4b1213c1e9237812" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcorecvs_1_1FiltersCollection.html">FiltersCollection</a> <a class="el" href="classAbstractCalculationThread.html#ac1f5153f75cba89d4b1213c1e9237812">AbstractCalculationThread::mFiltersCollection</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00152">152</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>Referenced by <a class="el" href="baseCalculationThread_8cpp_source.html#l00026">BaseCalculationThread::BaseCalculationThread()</a>, <a class="el" href="baseCalculationThread_8cpp_source.html#l00244">BaseCalculationThread::graphChanged()</a>, and <a class="el" href="baseHostDialog_8cpp_source.html#l00093">BaseHostDialog::initGraphPresentation()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b69d907795df8dbd9544fb16d474446"></a><!-- doxytag: member="AbstractCalculationThread::mFrames" ref="a7b69d907795df8dbd9544fb16d474446" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFrames.html">Frames</a> <a class="el" href="classAbstractCalculationThread.html#a7b69d907795df8dbd9544fb16d474446">AbstractCalculationThread::mFrames</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the last two sets of frames acquired from the capture device(s) </p>

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00122">122</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>Referenced by <a class="el" href="baseCalculationThread_8cpp_source.html#l00095">BaseCalculationThread::executeFilterGraph()</a>, <a class="el" href="abstractCalculationThread_8h_source.html#l00100">getFramesHolder()</a>, <a class="el" href="baseCalculationThread_8cpp_source.html#l00063">BaseCalculationThread::initData()</a>, <a class="el" href="abstractCalculationThread_8cpp_source.html#l00066">newFrameReady()</a>, <a class="el" href="recorderThread_8cpp_source.html#l00072">RecorderThread::processNewData()</a>, <a class="el" href="baseCalculationThread_8cpp_source.html#l00329">BaseCalculationThread::recalculateCache()</a>, and <a class="el" href="baseCalculationThread_8cpp_source.html#l00176">BaseCalculationThread::transformInputFrames()</a>.</p>

</div>
</div>
<a class="anchor" id="a51d905729ecbbe8b6a5050bded987717"></a><!-- doxytag: member="AbstractCalculationThread::mInterframeDelay" ref="a51d905729ecbbe8b6a5050bded987717" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="el" href="classAbstractCalculationThread.html#a51d905729ecbbe8b6a5050bded987717">AbstractCalculationThread::mInterframeDelay</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delay between this and previous frame. </p>

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00127">127</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>Referenced by <a class="el" href="abstractCalculationThread_8cpp_source.html#l00066">newFrameReady()</a>.</p>

</div>
</div>
<a class="anchor" id="a40e40e0f791e5f4817369c7bcdd63860"></a><!-- doxytag: member="AbstractCalculationThread::mLastFrameTimeStamp" ref="a40e40e0f791e5f4817369c7bcdd63860" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="el" href="classAbstractCalculationThread.html#a40e40e0f791e5f4817369c7bcdd63860">AbstractCalculationThread::mLastFrameTimeStamp</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00129">129</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>Referenced by <a class="el" href="abstractCalculationThread_8cpp_source.html#l00066">newFrameReady()</a>, and <a class="el" href="abstractCalculationThread_8h_source.html#l00107">setImageCaptureInterface()</a>.</p>

</div>
</div>
<a class="anchor" id="a0245b40575283af33ea2e0077d54364e"></a><!-- doxytag: member="AbstractCalculationThread::stateNames" ref="a0245b40575283af33ea2e0077d54364e" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * <a class="el" href="classAbstractCalculationThread.html#a0245b40575283af33ea2e0077d54364e">AbstractCalculationThread::stateNames</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
    <span class="stringliteral">&quot;Not started&quot;</span>,    
    <span class="stringliteral">&quot;Awaiting data&quot;</span>,  
    <span class="stringliteral">&quot;Active&quot;</span>,         
    <span class="stringliteral">&quot;Paused&quot;</span>,         
    <span class="stringliteral">&quot;Terminated&quot;</span>      
}
</pre></div>
<p>Definition at line <a class="el" href="abstractCalculationThread_8h_source.html#l00050">50</a> of file <a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a>.</p>

<p>Referenced by <a class="el" href="baseHostDialog_8cpp_source.html#l00632">BaseHostDialog::calculationStateChanged()</a>, and <a class="el" href="baseHostDialog_8cpp_source.html#l00605">BaseHostDialog::play()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>applications/base/<a class="el" href="abstractCalculationThread_8h_source.html">abstractCalculationThread.h</a></li>
<li>applications/base/<a class="el" href="abstractCalculationThread_8cpp_source.html">abstractCalculationThread.cpp</a></li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 12 2013 23:44:42 for DeepView by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
