<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DeepView: corecvs::StereoAligner Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">DeepView
   &#160;<span id="projectnumber">0.02</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacecorecvs.html">corecvs</a>      </li>
      <li class="navelem"><a class="el" href="classcorecvs_1_1StereoAligner.html">StereoAligner</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">corecvs::StereoAligner Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="corecvs::StereoAligner" -->
<p><code>#include &lt;<a class="el" href="stereoAligner_8h_source.html">stereoAligner.h</a>&gt;</code></p>

<p><a href="classcorecvs_1_1StereoAligner-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1StereoAligner.html#aba7cc25e1c14a6bfea66ad4c2822682d">StereoAligner</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1StereoAligner.html#a4a83409ab3639e3784e7a1daf8bfff1d">getAlignmentTransformation</a> (const <a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> &amp;F, <a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *leftTransform, <a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *rightTransform, <a class="el" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a> z=<a class="el" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>(0.0, 1.0, 0.0))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This function implements the simple rectification.  <a href="#a4a83409ab3639e3784e7a1daf8bfff1d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1StereoAligner.html#af1ce446a4e73589d4d4c48214b747fb9">getLateralCorrection</a> (<a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *leftTransform, <a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *rightTransform, <a class="el" href="classcorecvs_1_1CorrespondanceList.html">CorrespondanceList</a> *list, unsigned threshold=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1StereoAligner.html#ab43f4f4bf32180773f08c7d7f1f62285">getLateralCorrectionFixPoint</a> (<a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *leftTransform, <a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *rightb, <a class="el" href="namespacecorecvs.html#af76dfccc4f8b3f0a802cc2dd27a3b303">Vector2dd</a> fixedPoint)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1StereoAligner.html#a161543983492c219c6ba1564db333333">getBestZ</a> (const <a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> &amp;F, const <a class="el" href="namespacecorecvs.html#af76dfccc4f8b3f0a802cc2dd27a3b303">Vector2dd</a> &amp;rect, unsigned granularity=512, double *leftDistortions=NULL, double *rightDistortions=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1StereoAligner.html#aa3dd0c4493aae3c1b23fc953c3b8bbb7">getDistortion</a> (<a class="el" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a> projective, const <a class="el" href="namespacecorecvs.html#af76dfccc4f8b3f0a802cc2dd27a3b303">Vector2dd</a> &amp;rect)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="stereoAligner_8h_source.html#l00038">38</a> of file <a class="el" href="stereoAligner_8h_source.html">stereoAligner.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aba7cc25e1c14a6bfea66ad4c2822682d"></a><!-- doxytag: member="corecvs::StereoAligner::StereoAligner" ref="aba7cc25e1c14a6bfea66ad4c2822682d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcorecvs_1_1StereoAligner.html#aba7cc25e1c14a6bfea66ad4c2822682d">corecvs::StereoAligner::StereoAligner</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stereoAligner_8h_source.html#l00042">42</a> of file <a class="el" href="stereoAligner_8h_source.html">stereoAligner.h</a>.</p>
<div class="fragment"><pre class="fragment">{}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4a83409ab3639e3784e7a1daf8bfff1d"></a><!-- doxytag: member="corecvs::StereoAligner::getAlignmentTransformation" ref="a4a83409ab3639e3784e7a1daf8bfff1d" args="(const Matrix33 &amp;F, Matrix33 *leftTransform, Matrix33 *rightTransform, Vector3dd z=Vector3dd(0.0, 1.0, 0.0))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcorecvs_1_1StereoAligner.html#a4a83409ab3639e3784e7a1daf8bfff1d">corecvs::StereoAligner::getAlignmentTransformation</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> &amp;&#160;</td>
          <td class="paramname"><em>F</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *&#160;</td>
          <td class="paramname"><em>firstTransform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *&#160;</td>
          <td class="paramname"><em>secondTransform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>&#160;</td>
          <td class="paramname"><em>z</em> = <code><a class="el" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>(0.0,1.0,0.0)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function implements the simple rectification. </p>
<p>It is not optimal in any sense. This rectification is universal for both essential and fundamental matrix. In essential case it could be done simpler.</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ {p'}^T F p = 0 \]" src="form_259.png"/>
</p>
<p>We actually want to transform <img class="formulaInl" alt="$p$" src="form_260.png"/> and <img class="formulaInl" alt="$p'$" src="form_261.png"/> to <img class="formulaInl" alt="$q$" src="form_262.png"/> and <img class="formulaInl" alt="$q'$" src="form_263.png"/> to satisfy the following condition:</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ {q'}^T I_{\times} q = 0,~~where~~I_{\times} = \pmatrix { 0 &amp; 0 &amp; 0 \cr 0 &amp; 0 &amp; -1 \cr 0 &amp; 1 &amp; 0 } \]" src="form_264.png"/>
</p>
<p>This will be done, by presenting</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ F = H_{1}^T I_{\times} H_{2} \]" src="form_265.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ {p'}^T H_{1}^T I_{\times} H_{2} p = 0 \]" src="form_266.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ {\underbrace{(H_{1} p')}_{q'}}^T I_{\times} \underbrace{(H_{2} p)}_{q} = 0 \]" src="form_267.png"/>
</p>
<p>The main idea is selecting two connected directions in both cameras This function does the following decomposition </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ H_{1} = R' P' ~~ and ~~ H_{2} = R P \]" src="form_268.png"/>
</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ F = (R' P')^T I_{\times} R P \]" src="form_269.png"/>
</p>
<p>Let <img class="formulaInl" alt="$E_1$" src="form_270.png"/> be the left nullspace of <img class="formulaInl" alt="$F$" src="form_271.png"/>, and <img class="formulaInl" alt="$E_2$" src="form_272.png"/> the second one. Left nullspace vector is the direction to the second optical center in the first coordinate system.</p>
<p>Quite obviously the common rectified plane should be parallel to this line. So we need one more constraint to define this plane and the ability to calculate this direction in both First and Second coordinate systems.</p>
<p>Let's choose arbitary vector z (most probably it would be close to Y direction) And have a look at following vectors</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ w^{3D}_1 = z \times {E_1} \]" src="form_273.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ w^{3D}_2 = F z \]" src="form_274.png"/>
</p>
<p><img class="formulaInl" alt="$w^{3D}_1$" src="form_275.png"/> and <img class="formulaInl" alt="$w^{3D}_2$" src="form_276.png"/> are the normal vectors to the same plane but in first and second coordinate system respectively. And this plane will be paralle to <img class="formulaInl" alt="$E_1$" src="form_270.png"/> in first coordinate system and to <img class="formulaInl" alt="$E_2$" src="form_272.png"/> in the second. Let's prove this step by step.</p>
<p>1. <img class="formulaInl" alt="$w^{3D}_1$" src="form_275.png"/> is ortogonal both to <img class="formulaInl" alt="$z$" src="form_231.png"/> and <img class="formulaInl" alt="$E_1$" src="form_270.png"/> - obvious 2. Consider the point in space ortogonal to <img class="formulaInl" alt="$w^{3D}_1$" src="form_275.png"/>. It can be decomposed by <img class="formulaInl" alt="$z$" src="form_231.png"/> and <img class="formulaInl" alt="$E_1$" src="form_270.png"/> <img class="formulaInl" alt="$a=\alpha z + \beta {E_1} $" src="form_277.png"/></p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ F = {\left( \pmatrix { {w_2}_y f_{22} - f_{12} &amp; f_{02} - {w_2}_x f_{22} &amp; 0 \cr {w_2}_x f_{22} - f_{02} &amp; {w_2}_y f_{22} - f_{12} &amp; 0 \cr 0 &amp; 0 &amp; 1 } \pmatrix { 1 &amp; 0 &amp; 0 \cr 0 &amp; 1 &amp; 0 \cr {w_1}_x &amp; {w_1}_y &amp; 1 } \right)}^T \pmatrix { 0 &amp; 0 &amp; 0 \cr 0 &amp; 0 &amp; -1 \cr 0 &amp; 1 &amp; 0 } \pmatrix { f_{21} - {w_1}_y f_{22} &amp; {w_1}_x f_{22} - f_{20} &amp; 0 \cr f_{20} - {w_1}_x f_{22} &amp; f_{21} - {w_1}_y f_{22} &amp; f_{22} \cr 0 &amp; 0 &amp; 1 } \pmatrix { 1 &amp; 0 &amp; 0 \cr 0 &amp; 1 &amp; 0 \cr {w_2}_x &amp; {w_2}_y &amp; 1 } \]" src="form_278.png"/>
</p>
<p>The rotational part can be reduced to :</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ {R'}^T I_{\times} R = \pmatrix{ 0 &amp; 0 &amp; f_{02} - f_{22} {w_2}_x \cr 0 &amp; 0 &amp; f_{12} - f_{22} {w_2}_y \cr f_{20}-f_{22} {w_1}_x &amp; f_{21} - f_{22} {w_1}_y &amp; f_{22}} \]" src="form_279.png"/>
</p>
<p>If one wants to apply the transformations to input images. F is a transform computed for first pair of images. The following formulas could be used:</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} {p'}^T F p &amp;=&amp; 0 \\ q' &amp;=&amp; A p' \\ q &amp;=&amp; B p \\ {q'}^T G q &amp;=&amp; (A p')^T G B p = {p'}^T A^T G B p\\ G &amp;=&amp; {A^T}^{-1} F B^{-1} \end{eqnarray*}" src="form_280.png"/>
</p>
<p>This could be presented as:</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ G = {A^T}^{-1} F B^{-1} = {A^T}^{-1} H_{1}^T I_x H_{2} B^{-1} \]" src="form_281.png"/>
</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ G = \underbrace{{A^T}^{-1} H_{1}^T}_{H_{G1}^T} I_x \underbrace{H_{2} B^{-1}}_{H_{G2}} \]" src="form_282.png"/>
</p>
<p>Finally align transformations and there inverses are</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} H_{G1} &amp;=&amp; ({A^T}^{-1} H_{1}^T)^T = H_{1} A^{-1} \\ H_{G2} &amp;=&amp; H_{2} B^{-1} \\ H_{G1}^{-1} &amp;=&amp; A H_{1}^{-1} \\ H_{G2}^{-1} &amp;=&amp; B H_{2}^{-1} \end{eqnarray*}" src="form_283.png"/>
</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">F</td><td>input fundamental or essential matrix </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">leftTransform</td><td>output left transform <img class="formulaInl" alt="$H_{1}$" src="form_284.png"/> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rightTransform</td><td>output right transform <img class="formulaInl" alt="$H_{2}$" src="form_285.png"/> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">z</td><td>free vector <img class="formulaInl" alt="$z$" src="form_231.png"/> </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000012">Todo:</a></b></dt><dd>TODO In fact this vector should be guessed </dd></dl>

<p>Definition at line <a class="el" href="stereoAligner_8cpp_source.html#l00212">212</a> of file <a class="el" href="stereoAligner_8cpp_source.html">stereoAligner.cpp</a>.</p>

<p>References <a class="el" href="matrix33_8h_source.html#l00246">corecvs::Matrix33::a()</a>, <a class="el" href="global_8h_source.html#l00107">ASSERT_TRUE</a>, <a class="el" href="matrix33_8cpp_source.html#l00071">corecvs::Matrix33::det()</a>, <a class="el" href="vectorOperations_8h_source.html#l00149">corecvs::VectorOperationsBase&lt; RealType, ElementType &gt;::notTooFar()</a>, <a class="el" href="essentialMatrix_8h_source.html#l00494">corecvs::EssentialMatrix::nullspaces()</a>, <a class="el" href="matrix33_8h_source.html#l00174">corecvs::Matrix33::print()</a>, <a class="el" href="vectorOperations_8h_source.html#l00525">corecvs::VectorOperationsBase&lt; RealType, ElementType &gt;::print()</a>, <a class="el" href="vectorOperations_8h_source.html#l00531">corecvs::VectorOperationsBase&lt; RealType, ElementType &gt;::println()</a>, <a class="el" href="matrix33_8cpp_source.html#l00455">corecvs::Matrix33::Projective()</a>, <a class="el" href="matrix33_8cpp_source.html#l00431">corecvs::Matrix33::Scale2()</a>, <a class="el" href="matrix33_8cpp_source.html#l00124">corecvs::Matrix33::transposed()</a>, <a class="el" href="vector2d_8h_source.html#l00050">corecvs::Vector2d&lt; ElementType &gt;::x()</a>, and <a class="el" href="vector2d_8h_source.html#l00055">corecvs::Vector2d&lt; ElementType &gt;::y()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a> E1;
    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a> E2;
    <a class="code" href="classcorecvs_1_1EssentialMatrix.html" title="Both essential and fundamental matrices hold the following property:">EssentialMatrix</a>(F).<a class="code" href="classcorecvs_1_1EssentialMatrix.html#a79d5938b0f4cbcd9607a2f1d1467718b" title="Calculating vectors for left and right nullspaces of the 3 by 3 matrix of rank 2.">nullspaces</a>(&amp;E1, &amp;E2);


<span class="preprocessor">#ifdef TRACE</span>
<span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;Fundamental Matrix:\n&quot;</span>);
    F.<a class="code" href="classcorecvs_1_1Matrix33.html#ae38482e004b7670a910628ab650c8141">print</a>();
    printf(<span class="stringliteral">&quot;\n&quot;</span>);
    printf(<span class="stringliteral">&quot;Epipoles:\n&quot;</span>);
    E1.<a class="code" href="classcorecvs_1_1VectorOperationsBase.html#a1936a3be5eb2b4252362eadc9e2318a2">print</a>();
    printf(<span class="stringliteral">&quot;\n&quot;</span>);
    E2.<a class="code" href="classcorecvs_1_1VectorOperationsBase.html#a1936a3be5eb2b4252362eadc9e2318a2">print</a>();
    printf(<span class="stringliteral">&quot;\n&quot;</span>);
    printf(<span class="stringliteral">&quot;Z Direction:\n&quot;</span>);
    z.<a class="code" href="classcorecvs_1_1VectorOperationsBase.html#a7b9c5a3c775f0b9f5cc70bd390c9fd85">println</a>();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="comment"></span>
<span class="comment">    /// \todo TODO In fact this vector should be guessed</span>
<span class="comment"></span>    <span class="comment">//vector3Dd z = {-0.75,0.75,0};</span>
    <span class="comment">//vector3Dd z = {0.75,-0.75,0};</span>
    <span class="comment">//Vector3dd z1 = Vector3dd(1.,0.,0.);</span>

    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a> w1 = z ^ E1;
    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a> w2 = z * F;

<span class="preprocessor">#ifdef TRACE</span>
<span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;Projective correctives:\n&quot;</span>);
    w1.<a class="code" href="classcorecvs_1_1VectorOperationsBase.html#a1936a3be5eb2b4252362eadc9e2318a2">print</a>();
    printf(<span class="stringliteral">&quot;\n&quot;</span>);
    w2.<a class="code" href="classcorecvs_1_1VectorOperationsBase.html#a1936a3be5eb2b4252362eadc9e2318a2">print</a>();
    printf(<span class="stringliteral">&quot;\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2dd</a> w1_2d = (<a class="code" href="namespacecorecvs.html#af76dfccc4f8b3f0a802cc2dd27a3b303">Vector2dd</a>) w1;
    <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2dd</a> w2_2d = (<a class="code" href="namespacecorecvs.html#af76dfccc4f8b3f0a802cc2dd27a3b303">Vector2dd</a>) w2;

<span class="preprocessor">#ifdef TRACE</span>
<span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;Normalized correctives:\n&quot;</span>);
    w1_2d.<a class="code" href="classcorecvs_1_1VectorOperationsBase.html#a7b9c5a3c775f0b9f5cc70bd390c9fd85">println</a>();
    w2_2d.<a class="code" href="classcorecvs_1_1VectorOperationsBase.html#a7b9c5a3c775f0b9f5cc70bd390c9fd85">println</a>();
    printf(<span class="stringliteral">&quot;Checks:\n&quot;</span>);
    printf(<span class="stringliteral">&quot;Dot product for 1st corrector: %lg (should be zero)\n&quot;</span>,
            E1 &amp; <a class="code" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>(w1_2d.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), w1_2d.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(), 1.0));
    printf(<span class="stringliteral">&quot;Dot product for 2nd corrector: %lg\n&quot;</span>,
            E2 &amp; <a class="code" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>(w2_2d.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), w2_2d.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(), 1.0));
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> projectivePartFirst  = <a class="code" href="classcorecvs_1_1Matrix33.html#ada0e689feb4d0bf6abe4ec25a50003c6" title="This function returns a matrix with only the projective components.">Matrix33::Projective</a>(w1_2d);
    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> projectivePartSecond = <a class="code" href="classcorecvs_1_1Matrix33.html#ada0e689feb4d0bf6abe4ec25a50003c6" title="This function returns a matrix with only the projective components.">Matrix33::Projective</a>(w2_2d);

    <span class="keywordtype">double</span> wc = 0;
    <span class="keywordtype">double</span> a, b;

    a = w2_2d.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() * F.a(2,2) - F.a(1,2);
    b = F.a(0,2) - w2_2d.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() * F.a(2,2);
    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> rotationalPartFirst(
         a,  b,  0,
        -b,  a,  wc,
         0,  0,  1 );

    a = F.a(2,1) - w1_2d.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() * F.a(2,2);
    b = w1_2d.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() * F.a(2,2) - F.a(2,0);
    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> rotationalPartSecond(
         a,  b,  0,
        -b,  a,  F.a(2,2) + wc,
         0,  0,  1 );

    <span class="keywordflow">if</span> (a &lt; 0)
    {   rotationalPartFirst = -rotationalPartFirst;
        rotationalPartFirst.<a class="code" href="classcorecvs_1_1Matrix33.html#a8596ffc77b92da2876c22900c02e9bec" title="Geting Matrix element functions block.">a</a>(2,2) = 1.0;
        rotationalPartSecond = -rotationalPartSecond;
        rotationalPartSecond.a(2,2) = 1.0;
        printf(<span class="stringliteral">&quot;Rotative negation done\n&quot;</span>);
    }

<span class="preprocessor">#ifdef TRACE</span>
<span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;Rotator1:\n&quot;</span>);
    rotationalPartFirst.print();
    printf(<span class="stringliteral">&quot;Rotator2:\n&quot;</span>);
    rotationalPartSecond.print();

    printf(<span class="stringliteral">&quot;Projector1:\n&quot;</span>);
    projectivePartSecond.<a class="code" href="classcorecvs_1_1Matrix33.html#ae38482e004b7670a910628ab650c8141">print</a>();
    printf(<span class="stringliteral">&quot;Projector2:\n&quot;</span>);
    projectivePartFirst.print();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> first  =  rotationalPartFirst  * projectivePartFirst;
    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> second =  rotationalPartSecond * projectivePartSecond;


<span class="comment">//#ifdef ASSERTS</span>
    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> Ix(
             0,  0,  0,
             0,  0, -1,
             0,  1,  0 );

    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> Fprim = first.<a class="code" href="classcorecvs_1_1Matrix33.html#a2a0f69195b6a28f87d39f7b4cb6711ad" title="Returning transposed matrix.">transposed</a>() * Ix * second;

    printf(<span class="stringliteral">&quot;Recollect\n&quot;</span>);
    Fprim.<a class="code" href="classcorecvs_1_1Matrix33.html#ae38482e004b7670a910628ab650c8141">print</a>();
    printf(<span class="stringliteral">&quot;\n&quot;</span>);
    printf(<span class="stringliteral">&quot;Old Matrix was\n&quot;</span>);
    F.print();
    printf(<span class="stringliteral">&quot;\n&quot;</span>);
    <a class="code" href="global_8h.html#aa38fef22b6434d04309637be89dac846">ASSERT_TRUE</a>(Fprim.<a class="code" href="classcorecvs_1_1VectorOperationsBase.html#aaf73e3572b51f970ed42776e8ffdca30" title="Equal with epsilon Doesn&#39;t have much sense in case of integers but with doubles - quite useful...">notTooFar</a>(F, 1e-5), <span class="stringliteral">&quot;Matrix reconstruction failed&quot;</span>);
<span class="comment">//#endif // ASSERTS</span>

    <span class="keywordtype">double</span> det1 = rotationalPartFirst .det();
    <span class="keywordtype">double</span> det2 = rotationalPartSecond.det();

    printf(<span class="stringliteral">&quot;rotationalPartLeft .det() %lg\n&quot;</span>, det1);
    printf(<span class="stringliteral">&quot;rotationalPartRight.det() %lg\n&quot;</span>, det2);

    <span class="keywordtype">double</span> scaleFactor = det1 &gt; det2 ? det1 : det2;
    scaleFactor = sqrt(scaleFactor);


    printf(<span class="stringliteral">&quot;Scale factor %lg\n&quot;</span>, scaleFactor);
    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> scale =  <a class="code" href="classcorecvs_1_1Matrix33.html#a54ab8402ac3e4b1d845ab0432f0ef8d2" title="This function returns a matrix with only 2 scale components.">Matrix33::Scale2</a>(1.0 / scaleFactor, 1.0 / scaleFactor);

    *firstTransform  = scale * first;
    *secondTransform = scale * second;

<span class="preprocessor">#ifdef TRACE</span>
<span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;Final L %lg:\n&quot;</span>, detL);
    leftTransform-&gt;print();
    printf(<span class="stringliteral">&quot;Final R %lg:\n&quot;</span>, detR);
    rightTransform-&gt;print();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1StereoAligner_a4a83409ab3639e3784e7a1daf8bfff1d_cgraph.svg" width="100%" height="515"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a161543983492c219c6ba1564db333333"></a><!-- doxytag: member="corecvs::StereoAligner::getBestZ" ref="a161543983492c219c6ba1564db333333" args="(const Matrix33 &amp;F, const Vector2dd &amp;rect, unsigned granularity=512, double *leftDistortions=NULL, double *rightDistortions=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a> <a class="el" href="classcorecvs_1_1StereoAligner.html#a161543983492c219c6ba1564db333333">corecvs::StereoAligner::getBestZ</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> &amp;&#160;</td>
          <td class="paramname"><em>F</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacecorecvs.html#af76dfccc4f8b3f0a802cc2dd27a3b303">Vector2dd</a> &amp;&#160;</td>
          <td class="paramname"><em>rect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>granularity</em> = <code>512</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>leftDistortions</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>rightDistortions</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stereoAligner_8cpp_source.html#l00353">353</a> of file <a class="el" href="stereoAligner_8cpp_source.html">stereoAligner.cpp</a>.</p>

<p>References <a class="el" href="global_8h_source.html#l00107">ASSERT_TRUE</a>, <a class="el" href="stereoAligner_8cpp_source.html#l00489">getDistortion()</a>, <a class="el" href="mathUtils_8h_source.html#l00021">M_PI</a>, <a class="el" href="vector3d_8h_source.html#l00152">corecvs::Vector3d&lt; ElementType &gt;::normalizeProjective()</a>, and <a class="el" href="essentialMatrix_8h_source.html#l00494">corecvs::EssentialMatrix::nullspaces()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a> E1;
    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a> E2;
    <a class="code" href="classcorecvs_1_1EssentialMatrix.html" title="Both essential and fundamental matrices hold the following property:">EssentialMatrix</a>(F).<a class="code" href="classcorecvs_1_1EssentialMatrix.html#a79d5938b0f4cbcd9607a2f1d1467718b" title="Calculating vectors for left and right nullspaces of the 3 by 3 matrix of rank 2.">nullspaces</a>(&amp;E2, &amp;E1);


    <span class="keywordtype">double</span> minsum = numeric_limits&lt;double&gt;::max();
    <span class="keywordtype">double</span> minalpha  = 0;

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; granularity; i++)
    {
        <span class="keywordtype">double</span> alpha = i / (double)granularity * (<a class="code" href="mathUtils_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * 2.0);
        <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a> z = <a class="code" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>(cos(alpha), sin(alpha), 0.0);

        <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a> w1 = z ^ E1;
        <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a> w2 = F * z;

        w1 = w1.<a class="code" href="classcorecvs_1_1Vector3d.html#a2b48cba4c11c3054b50523ce83cfffa9" title="Add xy(), yz() and other sub-methods.">normalizeProjective</a>();
        w2 = w2.<a class="code" href="classcorecvs_1_1Vector3d.html#a2b48cba4c11c3054b50523ce83cfffa9" title="Add xy(), yz() and other sub-methods.">normalizeProjective</a>();

        <span class="keywordtype">double</span> distLeft = <a class="code" href="classcorecvs_1_1StereoAligner.html#aa3dd0c4493aae3c1b23fc953c3b8bbb7">getDistortion</a>(w1, rect);
        <span class="keywordtype">double</span> distRight = <a class="code" href="classcorecvs_1_1StereoAligner.html#aa3dd0c4493aae3c1b23fc953c3b8bbb7">getDistortion</a>(w2, rect);
        <span class="keywordflow">if</span> (leftDistortions != NULL)
            leftDistortions[i] = distLeft;
        <span class="keywordflow">if</span> (rightDistortions != NULL)
            rightDistortions[i] = distRight;

        <a class="code" href="global_8h.html#aa38fef22b6434d04309637be89dac846">ASSERT_TRUE</a>(distLeft &gt; 0 &amp;&amp; distRight &gt; 0, <span class="stringliteral">&quot;Internal error&quot;</span>);

        <span class="keywordflow">if</span> (distLeft + distRight &lt;  minsum)
        {
            minsum = distLeft + distRight;
            minalpha = alpha;
        }
    }
    <span class="keywordflow">return</span> <a class="code" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>(cos(minalpha), sin(minalpha), 0.0);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1StereoAligner_a161543983492c219c6ba1564db333333_cgraph.svg" width="100%" height="310"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa3dd0c4493aae3c1b23fc953c3b8bbb7"></a><!-- doxytag: member="corecvs::StereoAligner::getDistortion" ref="aa3dd0c4493aae3c1b23fc953c3b8bbb7" args="(Vector3dd projective, const Vector2dd &amp;rect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classcorecvs_1_1StereoAligner.html#aa3dd0c4493aae3c1b23fc953c3b8bbb7">corecvs::StereoAligner::getDistortion</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>&#160;</td>
          <td class="paramname"><em>projective</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacecorecvs.html#af76dfccc4f8b3f0a802cc2dd27a3b303">Vector2dd</a> &amp;&#160;</td>
          <td class="paramname"><em>rect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stereoAligner_8cpp_source.html#l00489">489</a> of file <a class="el" href="stereoAligner_8cpp_source.html">stereoAligner.cpp</a>.</p>

<p>References <a class="el" href="matrix33_8cpp_source.html#l00525">corecvs::Matrix33::VectorByVector()</a>, <a class="el" href="vector2d_8h_source.html#l00050">corecvs::Vector2d&lt; ElementType &gt;::x()</a>, and <a class="el" href="vector2d_8h_source.html#l00055">corecvs::Vector2d&lt; ElementType &gt;::y()</a>.</p>

<p>Referenced by <a class="el" href="stereoAligner_8cpp_source.html#l00353">getBestZ()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">double</span> h = rect.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>();
    <span class="keywordtype">double</span> w = rect.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>();

    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> PPt = w * h * (1 / 12.0) *
        <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a>(
            w * w - 1,      0.0,  0.0,
                  0.0, h * h -1,  0.0,
                  0.0,      0.0,  0.0
        );

    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a> center = <a class="code" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>( w * 0.5, h * 0.5, 1.0);

    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> ppc = <a class="code" href="classcorecvs_1_1Matrix33.html#aff1f6646e390e773b8c0dfcadb174330" title="This function returns a matrix constucted as a product of two vectors .">Matrix33::VectorByVector</a>(center, center);

    <span class="keywordtype">double</span> distortion =
            ((projective * PPt) &amp; projective) /
            ((projective * ppc) &amp; projective);

    <span class="keywordflow">return</span> distortion;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1StereoAligner_aa3dd0c4493aae3c1b23fc953c3b8bbb7_cgraph.svg" width="100%" height="210"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1ce446a4e73589d4d4c48214b747fb9"></a><!-- doxytag: member="corecvs::StereoAligner::getLateralCorrection" ref="af1ce446a4e73589d4d4c48214b747fb9" args="(Matrix33 *leftTransform, Matrix33 *rightTransform, CorrespondanceList *list, unsigned threshold=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcorecvs_1_1StereoAligner.html#af1ce446a4e73589d4d4c48214b747fb9">corecvs::StereoAligner::getLateralCorrection</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *&#160;</td>
          <td class="paramname"><em>leftTransform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *&#160;</td>
          <td class="paramname"><em>rightTransform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcorecvs_1_1CorrespondanceList.html">CorrespondanceList</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>threshold</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stereoAligner_8cpp_source.html#l00425">425</a> of file <a class="el" href="stereoAligner_8cpp_source.html">stereoAligner.cpp</a>.</p>

<p>References <a class="el" href="global_8h_source.html#l00107">ASSERT_TRUE</a>, <a class="el" href="matrix33_8cpp_source.html#l00474">corecvs::Matrix33::ShiftProj()</a>, and <a class="el" href="vector2d_8h_source.html#l00050">corecvs::Vector2d&lt; ElementType &gt;::x()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="global_8h.html#aa38fef22b6434d04309637be89dac846">ASSERT_TRUE</a>(list-&gt;size() != 0, <span class="stringliteral">&quot;Input list should not ne empty&quot;</span>);
    <span class="keywordtype">double</span> min = numeric_limits&lt;double&gt;::max();
    <span class="keywordtype">double</span> max = numeric_limits&lt;double&gt;::min();
    vector&lt;double&gt; sortedLaterals;
    sortedLaterals.reserve(list-&gt;size());

<span class="comment">//    double totalMisrectify = 0;</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; list-&gt;size(); i++)
    {
        <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2dd</a> left  = (*leftTransform) * list-&gt;at(i).start;
        <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2dd</a> right = (*rightTransform) * list-&gt;at(i).end;
<span class="comment">//        totalMisrectify += fabs(left.y() - right.y());</span>
        <span class="keywordtype">double</span> diff = left.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() - right.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>();
        <span class="keywordflow">if</span> (diff &lt; min) {
            diff = min;
        }

        <span class="keywordflow">if</span> (diff &gt; max) {
            diff = max;
        }

        sortedLaterals.push_back(diff);
    }

    sort(sortedLaterals.begin(), sortedLaterals.end());
    <span class="keywordtype">double</span> shift;
    <span class="keywordflow">if</span> (threshold &gt; sortedLaterals.size())
        shift = max;
    <span class="keywordflow">else</span>
        shift = sortedLaterals[sortedLaterals.size() - 1 - threshold];
    (*leftTransform)  = <a class="code" href="classcorecvs_1_1Matrix33.html#a9848216933d001ad7fea0adb3b7d3212" title="This function returns a matrix with only shift components.">Matrix33::ShiftProj</a>( shift / 2.0, 0.0) * (*leftTransform);
    (*rightTransform) = <a class="code" href="classcorecvs_1_1Matrix33.html#a9848216933d001ad7fea0adb3b7d3212" title="This function returns a matrix with only shift components.">Matrix33::ShiftProj</a>(-shift / 2.0, 0.0) * (*rightTransform);



 <span class="comment">//   DOTRACE((&quot;Total misrectify is %lf&quot;, totalMisrectify));</span>

}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1StereoAligner_af1ce446a4e73589d4d4c48214b747fb9_cgraph.svg" width="100%" height="110"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab43f4f4bf32180773f08c7d7f1f62285"></a><!-- doxytag: member="corecvs::StereoAligner::getLateralCorrectionFixPoint" ref="ab43f4f4bf32180773f08c7d7f1f62285" args="(Matrix33 *leftTransform, Matrix33 *rightb, Vector2dd fixedPoint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcorecvs_1_1StereoAligner.html#ab43f4f4bf32180773f08c7d7f1f62285">corecvs::StereoAligner::getLateralCorrectionFixPoint</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *&#160;</td>
          <td class="paramname"><em>leftTransform</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcorecvs_1_1Matrix33.html">Matrix33</a> *&#160;</td>
          <td class="paramname"><em>rightb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecorecvs.html#af76dfccc4f8b3f0a802cc2dd27a3b303">Vector2dd</a>&#160;</td>
          <td class="paramname"><em>fixedPoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="stereoAligner_8cpp_source.html#l00471">471</a> of file <a class="el" href="stereoAligner_8cpp_source.html">stereoAligner.cpp</a>.</p>

<p>References <a class="el" href="matrix33_8cpp_source.html#l00474">corecvs::Matrix33::ShiftProj()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2dd</a> fixedPointShift = (*leftTransform) * fixedPoint;
    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> backShift = <a class="code" href="classcorecvs_1_1Matrix33.html#a9848216933d001ad7fea0adb3b7d3212" title="This function returns a matrix with only shift components.">Matrix33::ShiftProj</a>(fixedPoint - fixedPointShift);

    *leftTransform = backShift * (*leftTransform);
    *rightTransform = backShift * (*rightTransform);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1StereoAligner_ab43f4f4bf32180773f08c7d7f1f62285_cgraph.svg" width="100%" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>core/rectification/<a class="el" href="stereoAligner_8h_source.html">stereoAligner.h</a></li>
<li>core/rectification/<a class="el" href="stereoAligner_8cpp_source.html">stereoAligner.cpp</a></li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 12 2013 23:44:57 for DeepView by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
