<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DeepView: core/clegacy/math/algebra.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">DeepView
   &#160;<span id="projectnumber">0.02</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">core/clegacy/math/algebra.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This files contains the fast implementation for algebraic functions, such as sqrt(), atan2(), etc.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="algebra_8h_source.html">algebra.h</a>&quot;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for algebra.c:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="algebra_8c__incl.svg" width="323" height="195"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="algebra_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#a032503e76d6f69bc67e99e909c8125da">TABLE_SIZE</a>&#160;&#160;&#160;512</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#a911ecfe019d407694b8fadd68b53efc6">MAX_FUCTION_VALUE</a>&#160;&#160;&#160;(0xFFFFFF)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#a445300242f33311fdde3524f222e3686">MIN_FUCTION_VALUE</a>&#160;&#160;&#160;(0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#a7b97ce112ba2bcf695a2feabc2837843">SLOPE_MULTIPLIER_SHIFT</a>&#160;&#160;&#160;(23)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint__win_8h.html#a9a941819355e6f658991890ff66b4b0e">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#a2b9b480d69cc1e20d8d204e606c47e1d">getDirection5bit</a> (<a class="el" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a> dx, <a class="el" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a> dy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint__win_8h.html#a9a941819355e6f658991890ff66b4b0e">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#ad4ba292cd009c404d0122c19d9f13e16">getMagnitude7bit</a> (<a class="el" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a> dx, <a class="el" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a> dy)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Expecting two Sobel derivatives of the 12bit image This will make the range 12 + 3 bits for the derivatives (due to Sobel matrix coefficients)  <a href="#ad4ba292cd009c404d0122c19d9f13e16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#ac35612b9ebd9e49d567a4ec9041d998c">getLengthStable</a> (double a, double b)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#a813b8ba4bade438e91533e0ae58f950b">getIntegerRootFast</a> (<a class="el" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> input)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The fast approximation of the square root with the method similar to Newton's.  <a href="#a813b8ba4bade438e91533e0ae58f950b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#a25fd76a00bc58b348e008079f192586e">divideBy25_16</a> (<a class="el" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> <a class="el" href="structin.html">in</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">As 1/25 is 0b0.  <a href="#a25fd76a00bc58b348e008079f192586e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#a06fd1022bf3d7f6a97be394c361eb211">divideBy25_32</a> (<a class="el" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> <a class="el" href="structin.html">in</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">As 1/25 is 0b0.  <a href="#a06fd1022bf3d7f6a97be394c361eb211"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#ab77df89019d5eec59daacc66614b89c5">rootLUT</a> [128]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="algebra_8c.html#aad7aae225518d4b6b6765e694d333baf">sqare_root_lut</a> [<a class="el" href="algebra_8c.html#a032503e76d6f69bc67e99e909c8125da">TABLE_SIZE</a>]</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This files contains the fast implementation for algebraic functions, such as sqrt(), atan2(), etc. </p>
<dl class="date"><dt><b>Date:</b></dt><dd>Jul 10, 2009 </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Alexander Pimenov </dd></dl>

<p>Definition in file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a911ecfe019d407694b8fadd68b53efc6"></a><!-- doxytag: member="algebra.c::MAX_FUCTION_VALUE" ref="a911ecfe019d407694b8fadd68b53efc6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="algebra_8c.html#a911ecfe019d407694b8fadd68b53efc6">MAX_FUCTION_VALUE</a>&#160;&#160;&#160;(0xFFFFFF)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00254">254</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>

</div>
</div>
<a class="anchor" id="a445300242f33311fdde3524f222e3686"></a><!-- doxytag: member="algebra.c::MIN_FUCTION_VALUE" ref="a445300242f33311fdde3524f222e3686" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="algebra_8c.html#a445300242f33311fdde3524f222e3686">MIN_FUCTION_VALUE</a>&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00255">255</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7b97ce112ba2bcf695a2feabc2837843"></a><!-- doxytag: member="algebra.c::SLOPE_MULTIPLIER_SHIFT" ref="a7b97ce112ba2bcf695a2feabc2837843" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="algebra_8c.html#a7b97ce112ba2bcf695a2feabc2837843">SLOPE_MULTIPLIER_SHIFT</a>&#160;&#160;&#160;(23)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00257">257</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>

</div>
</div>
<a class="anchor" id="a032503e76d6f69bc67e99e909c8125da"></a><!-- doxytag: member="algebra.c::TABLE_SIZE" ref="a032503e76d6f69bc67e99e909c8125da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="algebra_8c.html#a032503e76d6f69bc67e99e909c8125da">TABLE_SIZE</a>&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00253">253</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a25fd76a00bc58b348e008079f192586e"></a><!-- doxytag: member="algebra.c::divideBy25_16" ref="a25fd76a00bc58b348e008079f192586e" args="(uint16_t in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> <a class="el" href="algebra_8c.html#a25fd76a00bc58b348e008079f192586e">divideBy25_16</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a>&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>As 1/25 is 0b0. </p>
<p>(00001010001111010111)</p>
<p>The period is presented as follows:</p>
<p>|1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20|21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 |0 0 0 0 1 0 1 0 0 0 1 1 1 1 0 1 0 1 1 1| 0 0 0 0 1 0 1 0 0 0 1 1 1 1 0 1 0 1 1 1</p>
<p>the division result could be computed as the addition of the shifted values.</p>
<p>This version is for 16bit </p>

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00214">214</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> in0_101 = (<a class="code" href="structin.html">in</a> &gt;&gt; 1)  + (<a class="code" href="structin.html">in</a> &gt;&gt; 3);
        <a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> in0_111 = in0_101 + (<a class="code" href="structin.html">in</a> &gt;&gt; 2);
        <a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> result = ((in0_101) + (in0_101 &gt;&gt; 9) + (in0_111 &gt;&gt; 6) + (in0_111 &gt;&gt; 13)) &gt;&gt; 4;

        <a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> r = <a class="code" href="structin.html">in</a> - result * 25;
        <span class="keywordflow">if</span> (r &gt;= 25) result++;
        <span class="keywordflow">return</span> result;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a06fd1022bf3d7f6a97be394c361eb211"></a><!-- doxytag: member="algebra.c::divideBy25_32" ref="a06fd1022bf3d7f6a97be394c361eb211" args="(uint32_t in)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> <a class="el" href="algebra_8c.html#a06fd1022bf3d7f6a97be394c361eb211">divideBy25_32</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>As 1/25 is 0b0. </p>
<p>(00001010001111010111)</p>
<p>The period is presented as follows:</p>
<p>|1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20|21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 |0 0 0 0 1 0 1 0 0 0 1 1 1 1 0 1 0 1 1 1| 0 0 0 0 1 0 1 0 0 0 1 1 1 1 0 1 0 1 1 1</p>
<p>the division result could be computed as the addition of the shifted values.</p>
<p>This version is for 32bit </p>

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00240">240</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> in0_101 = (<a class="code" href="structin.html">in</a> &gt;&gt; 1)  + (<a class="code" href="structin.html">in</a> &gt;&gt; 3);
        <a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> in0_111 = in0_101 + (<a class="code" href="structin.html">in</a> &gt;&gt; 2);
        <a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> in0_00001010001111010111 = ((in0_101) + (in0_101 &gt;&gt; 9) + (in0_111 &gt;&gt; 6) + (in0_111 &gt;&gt; 13)) &gt;&gt; 4;
        <a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> result = (in0_00001010001111010111) + (in0_00001010001111010111 &gt;&gt; 20);

        <a class="code" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> r = <a class="code" href="structin.html">in</a> - result * 25;
        <span class="keywordflow">if</span> (r &gt;= 25) result++;
        <span class="keywordflow">if</span> (r &gt;= 50) result++;
        <span class="keywordflow">return</span> result;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2b9b480d69cc1e20d8d204e606c47e1d"></a><!-- doxytag: member="algebra.c::getDirection5bit" ref="a2b9b480d69cc1e20d8d204e606c47e1d" args="(int16_t dx, int16_t dy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint__win_8h.html#a9a941819355e6f658991890ff66b4b0e">uint8_t</a> <a class="el" href="algebra_8c.html#a2b9b480d69cc1e20d8d204e606c47e1d">getDirection5bit</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a>&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a>&#160;</td>
          <td class="paramname"><em>dy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>So far use double. Later no double should be used. </dd></dl>

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00051">51</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="stdint__win_8h.html#a9a941819355e6f658991890ff66b4b0e">uint8_t</a> accumulator = 0;
        <a class="code" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a> rx;
        <a class="code" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a> ry;
        <span class="comment">/* \todo TODO: Make this faster*/</span>
        <span class="comment">// Reduce the circle to the 1st quadrant</span>
        <span class="keywordflow">if</span> (dx &lt; 0)
        {
                <span class="keywordflow">if</span> (dy &lt; 0)
                {
                        accumulator = 16;
                        rx = -dx;
                        ry = -dy;
                }
                <span class="keywordflow">else</span>
                {
                        accumulator = 8;
                        rx =  dy;
                        ry = -dx;
                }
        }
        <span class="keywordflow">else</span>
        {
                <span class="keywordflow">if</span> (dy &lt; 0)
                {
                        accumulator = 24;
                        rx = -dy;
                        ry = dx;
                }
                <span class="keywordflow">else</span>
                {
                        accumulator = 0;
                        rx = dx;
                        ry = dy;
                }
        }

        <span class="comment">// Do the tree search</span>
        <span class="keywordflow">if</span> (ry &lt;= rx)
        {<span class="comment"></span>
<span class="comment">                /// @todo So far use double. Later no double should be used.</span>
<span class="comment"></span>                <span class="keywordflow">if</span> (rx &lt;= 0.414213562 * ry)
                {
                        <span class="keywordflow">if</span> (rx &lt;= 0.198912367 * ry)
                                <span class="keywordflow">return</span> accumulator;
                        <span class="keywordflow">else</span>
                                <span class="keywordflow">return</span> accumulator + 1;
                }
                <span class="keywordflow">else</span>
                {
                        <span class="keywordflow">if</span> (rx &lt;= 0.668178638 * ry)
                                <span class="keywordflow">return</span> accumulator + 2;
                        <span class="keywordflow">else</span>
                                <span class="keywordflow">return</span> accumulator + 3;
                }
        }
        <span class="keywordflow">else</span>
        {
                <span class="keywordflow">if</span> (ry &lt;= 0.414213562 * rx)
                {
                        <span class="keywordflow">if</span> (ry &lt;= 0.198912367 * rx)
                                <span class="keywordflow">return</span> accumulator + 7;
                        <span class="keywordflow">else</span>
                                <span class="keywordflow">return</span> accumulator + 6;
                }
                <span class="keywordflow">else</span>
                {
                        <span class="keywordflow">if</span> (ry &lt;= 0.668178638 * rx)
                                <span class="keywordflow">return</span> accumulator + 5;
                        <span class="keywordflow">else</span>
                                <span class="keywordflow">return</span> accumulator + 4;
                }
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a813b8ba4bade438e91533e0ae58f950b"></a><!-- doxytag: member="algebra.c::getIntegerRootFast" ref="a813b8ba4bade438e91533e0ae58f950b" args="(uint32_t input)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> <a class="el" href="algebra_8c.html#a813b8ba4bade438e91533e0ae58f950b">getIntegerRootFast</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a>&#160;</td>
          <td class="paramname"><em>input</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The fast approximation of the square root with the method similar to Newton's. </p>

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00186">186</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> x;
        x = (input / 0x3f + 0x3f) &gt;&gt; 1;
        x = (input / x + x) &gt;&gt; 1;
        x = (input / x + x) &gt;&gt; 1;
<span class="comment">/*        x = (input / x + x) &gt;&gt; 1;</span>
<span class="comment">        x = (input / x + x) &gt;&gt; 1;</span>
<span class="comment">        x = (input / x + x) &gt;&gt; 1;</span>
<span class="comment">        x = (input / x + x) &gt;&gt; 1;*/</span>
        <span class="keywordflow">return</span> x;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac35612b9ebd9e49d567a4ec9041d998c"></a><!-- doxytag: member="algebra.c::getLengthStable" ref="ac35612b9ebd9e49d567a4ec9041d998c" args="(double a, double b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="algebra_8c.html#ac35612b9ebd9e49d567a4ec9041d998c">getLengthStable</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00161">161</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>

<p>Referenced by <a class="el" href="triangulation_8h_source.html#l00120">Triangulation::Point::length()</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keywordtype">double</span> ma = (a &gt; 0) ? a : -a;
        <span class="keywordtype">double</span> mb = (b &gt; 0) ? b : -b;

        <span class="keywordflow">if</span> (ma == 0 &amp;&amp; mb == 0) <span class="keywordflow">return</span> 0;
        <span class="keywordflow">if</span> (ma &gt; mb)
        {
                <span class="keywordtype">double</span> div = (mb / ma);
                <span class="keywordflow">return</span> ma * sqrt(1.0 + div * div );
        }
        <span class="keywordflow">else</span>
        {
                <span class="keywordtype">double</span> div = (ma / mb);
                <span class="keywordflow">return</span> mb * sqrt(1.0 + div * div );
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad4ba292cd009c404d0122c19d9f13e16"></a><!-- doxytag: member="algebra.c::getMagnitude7bit" ref="ad4ba292cd009c404d0122c19d9f13e16" args="(int16_t dx, int16_t dy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint__win_8h.html#a9a941819355e6f658991890ff66b4b0e">uint8_t</a> <a class="el" href="algebra_8c.html#ad4ba292cd009c404d0122c19d9f13e16">getMagnitude7bit</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a>&#160;</td>
          <td class="paramname"><em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint__win_8h.html#a044293bfeff56852a28ed6c2cfbb2649">int16_t</a>&#160;</td>
          <td class="paramname"><em>dy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Expecting two Sobel derivatives of the 12bit image This will make the range 12 + 3 bits for the derivatives (due to Sobel matrix coefficients) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dx</td><td>- X Sobel derivative </td></tr>
    <tr><td class="paramname">dy</td><td>- Y Sobel derivative </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00136">136</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>

<p>References <a class="el" href="algebra_8c_source.html#l00015">rootLUT</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//                        24bit      +       24bit          = 25bit</span>
        <a class="code" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> distsq = ((<a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a>)dx * dx) + ((<a class="code" href="stdint__win_8h.html#a37994e3b11c72957c6f454c6ec96d43d">int32_t</a>)dy * dy);
        <span class="comment">//   reduce to 14bits</span>
        distsq &gt;&gt;= 11;
        <span class="comment">//   And now use search in LUT</span>
        <a class="code" href="stdint__win_8h.html#a9a941819355e6f658991890ff66b4b0e">uint8_t</a> start = 0, end = 127;
        <span class="keywordflow">while</span> (start != end) {
                <a class="code" href="stdint__win_8h.html#a9a941819355e6f658991890ff66b4b0e">uint8_t</a> middle = (start + end) &gt;&gt; 1;
                <span class="keywordflow">if</span> (<a class="code" href="algebra_8c.html#ab77df89019d5eec59daacc66614b89c5">rootLUT</a>[middle] == distsq)
                        <span class="keywordflow">return</span> middle;
                <span class="keywordflow">if</span> (<a class="code" href="algebra_8c.html#ab77df89019d5eec59daacc66614b89c5">rootLUT</a>[middle] &gt; distsq)
                {
                        end = middle - 1;
                }
                <span class="keywordflow">else</span>
                {
                        start = middle + 1;
                }
        }
        <span class="keywordflow">return</span> start;
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ab77df89019d5eec59daacc66614b89c5"></a><!-- doxytag: member="algebra.c::rootLUT" ref="ab77df89019d5eec59daacc66614b89c5" args="[128]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint__win_8h.html#a30af71eaf40c925c9832eb289a48da35">uint16_t</a> <a class="el" href="algebra_8c.html#ab77df89019d5eec59daacc66614b89c5">rootLUT</a>[128]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00015">15</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>

<p>Referenced by <a class="el" href="algebra_8c_source.html#l00136">corecvs::getMagnitude7bit()</a>.</p>

</div>
</div>
<a class="anchor" id="aad7aae225518d4b6b6765e694d333baf"></a><!-- doxytag: member="algebra.c::sqare_root_lut" ref="aad7aae225518d4b6b6765e694d333baf" args="[TABLE_SIZE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint__win_8h.html#a6eb1e68cc391dd753bc8ce896dbb8315">uint32_t</a> <a class="el" href="algebra_8c.html#aad7aae225518d4b6b6765e694d333baf">sqare_root_lut</a>[<a class="el" href="algebra_8c.html#a032503e76d6f69bc67e99e909c8125da">TABLE_SIZE</a>]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="algebra_8c_source.html#l00260">260</a> of file <a class="el" href="algebra_8c_source.html">algebra.c</a>.</p>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 12 2013 23:44:39 for DeepView by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
