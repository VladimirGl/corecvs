<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DeepView: corecvs::EssentialEstimator Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">DeepView
   &#160;<span id="projectnumber">0.02</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacecorecvs.html">corecvs</a>      </li>
      <li class="navelem"><a class="el" href="classcorecvs_1_1EssentialEstimator.html">EssentialEstimator</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">corecvs::EssentialEstimator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="corecvs::EssentialEstimator" -->
<p><code>#include &lt;<a class="el" href="essentialEstimator_8h_source.html">essentialEstimator.h</a>&gt;</code></p>

<p><a href="classcorecvs_1_1EssentialEstimator-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator_1_1CostFunction7to1.html">CostFunction7to1</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalized cost function try to trick the optimization algorithms by re-normalising the direction and the rotation quaternion every time it is used.  <a href="classcorecvs_1_1EssentialEstimator_1_1CostFunction7to1.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator_1_1CostFunction7toN.html">CostFunction7toN</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that returned.  <a href="classcorecvs_1_1EssentialEstimator_1_1CostFunction7toN.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html">CostFunctionBase</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a class that describe the translation form state in form of the array of doubles into an Essential matrix.  <a href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator_1_1NormalizeFunction.html">NormalizeFunction</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that normalizes the current state.  <a href="classcorecvs_1_1EssentialEstimator_1_1NormalizeFunction.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edd">OptimisationMethod</a> { <br/>
&#160;&#160;<a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda34dbe807c80efc17e82cac335a4b35eb">METHOD_SVD_LSE</a>, 
<a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda61a23378353cb4ebcea7d30721e2c159">METHOD_GRAD_DESC</a>, 
<a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57eddae847eb312fa366addc3573a7c474b68f">METHOD_MARQ_LEV</a>, 
<a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda70bb05d47e884f21838277a7fb95d7a2">METHOD_CLASSIC_KALMAN</a>, 
<br/>
&#160;&#160;<a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57eddad4213613eabc245f97711cc6f82652c8">METHOD_ITERATIVE_KALMAN</a>, 
<a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda77ab18ac714095f25dec2d7e9d603a56">METHOD_GRAD_DESC_RM</a>, 
<a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda2edcecfe5e0fb942c76ab79994328f56">METHOD_LAST</a>, 
<a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57eddad8294e61bf396b608c7a8c22d5eb8372">METHOD_DEFAULT</a> =  METHOD_MARQ_LEV
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#a511285b5cc9ef98ccb7becda5087d008">getEssential</a> (const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;samples, <a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edd">OptimisationMethod</a> method=<a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57eddad8294e61bf396b608c7a8c22d5eb8372">METHOD_DEFAULT</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#a1db17322c1ac1d75389f5321c3795c61">getEssentialLSE</a> (const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;samples)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Both essential and fundamental matrices can be searched with 8 point algorithm.  <a href="#a1db17322c1ac1d75389f5321c3795c61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#ae87186f8c55a91f772c812853fcade62">getEssentialLM</a> (const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;samples)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#ab0284e0fa94b60b6ac5835b9366ada1a">getEssentialGrad</a> (const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;samples)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#abdbd2281c8df198ce900b0faf4447e8e">getEssentialGradToRm</a> (const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;samples)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#aaf2843585a01f38d26a4ff1dde226ddd">getEssentialSimpleKalman</a> (const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;samples)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#ae919d22b400777c273d986d033a89516">EssentialEstimator</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#aa63abdf3a05d7f4959acd5600e7717b5">~EssentialEstimator</a> ()</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="essentialEstimator_8h_source.html#l00018">18</a> of file <a class="el" href="essentialEstimator_8h_source.html">essentialEstimator.h</a>.</p>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a82dc9bb6b1d1608f86b233e37fe57edd"></a><!-- doxytag: member="corecvs::EssentialEstimator::OptimisationMethod" ref="a82dc9bb6b1d1608f86b233e37fe57edd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edd">corecvs::EssentialEstimator::OptimisationMethod</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a82dc9bb6b1d1608f86b233e37fe57edda34dbe807c80efc17e82cac335a4b35eb"></a><!-- doxytag: member="METHOD_SVD_LSE" ref="a82dc9bb6b1d1608f86b233e37fe57edda34dbe807c80efc17e82cac335a4b35eb" args="" -->METHOD_SVD_LSE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a82dc9bb6b1d1608f86b233e37fe57edda61a23378353cb4ebcea7d30721e2c159"></a><!-- doxytag: member="METHOD_GRAD_DESC" ref="a82dc9bb6b1d1608f86b233e37fe57edda61a23378353cb4ebcea7d30721e2c159" args="" -->METHOD_GRAD_DESC</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a82dc9bb6b1d1608f86b233e37fe57eddae847eb312fa366addc3573a7c474b68f"></a><!-- doxytag: member="METHOD_MARQ_LEV" ref="a82dc9bb6b1d1608f86b233e37fe57eddae847eb312fa366addc3573a7c474b68f" args="" -->METHOD_MARQ_LEV</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a82dc9bb6b1d1608f86b233e37fe57edda70bb05d47e884f21838277a7fb95d7a2"></a><!-- doxytag: member="METHOD_CLASSIC_KALMAN" ref="a82dc9bb6b1d1608f86b233e37fe57edda70bb05d47e884f21838277a7fb95d7a2" args="" -->METHOD_CLASSIC_KALMAN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a82dc9bb6b1d1608f86b233e37fe57eddad4213613eabc245f97711cc6f82652c8"></a><!-- doxytag: member="METHOD_ITERATIVE_KALMAN" ref="a82dc9bb6b1d1608f86b233e37fe57eddad4213613eabc245f97711cc6f82652c8" args="" -->METHOD_ITERATIVE_KALMAN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a82dc9bb6b1d1608f86b233e37fe57edda77ab18ac714095f25dec2d7e9d603a56"></a><!-- doxytag: member="METHOD_GRAD_DESC_RM" ref="a82dc9bb6b1d1608f86b233e37fe57edda77ab18ac714095f25dec2d7e9d603a56" args="" -->METHOD_GRAD_DESC_RM</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a82dc9bb6b1d1608f86b233e37fe57edda2edcecfe5e0fb942c76ab79994328f56"></a><!-- doxytag: member="METHOD_LAST" ref="a82dc9bb6b1d1608f86b233e37fe57edda2edcecfe5e0fb942c76ab79994328f56" args="" -->METHOD_LAST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a82dc9bb6b1d1608f86b233e37fe57eddad8294e61bf396b608c7a8c22d5eb8372"></a><!-- doxytag: member="METHOD_DEFAULT" ref="a82dc9bb6b1d1608f86b233e37fe57eddad8294e61bf396b608c7a8c22d5eb8372" args="" -->METHOD_DEFAULT</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="essentialEstimator_8h_source.html#l00022">22</a> of file <a class="el" href="essentialEstimator_8h_source.html">essentialEstimator.h</a>.</p>
<div class="fragment"><pre class="fragment">                            {
        <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda34dbe807c80efc17e82cac335a4b35eb">METHOD_SVD_LSE</a>,
        <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda61a23378353cb4ebcea7d30721e2c159">METHOD_GRAD_DESC</a>,
        <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57eddae847eb312fa366addc3573a7c474b68f">METHOD_MARQ_LEV</a>,
        <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda70bb05d47e884f21838277a7fb95d7a2">METHOD_CLASSIC_KALMAN</a>,
        <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57eddad4213613eabc245f97711cc6f82652c8">METHOD_ITERATIVE_KALMAN</a>,
        <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda77ab18ac714095f25dec2d7e9d603a56">METHOD_GRAD_DESC_RM</a>,
        <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda2edcecfe5e0fb942c76ab79994328f56">METHOD_LAST</a>,
        <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57eddad8294e61bf396b608c7a8c22d5eb8372">METHOD_DEFAULT</a> = METHOD_MARQ_LEV
    };
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae919d22b400777c273d986d033a89516"></a><!-- doxytag: member="corecvs::EssentialEstimator::EssentialEstimator" ref="ae919d22b400777c273d986d033a89516" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#ae919d22b400777c273d986d033a89516">corecvs::EssentialEstimator::EssentialEstimator</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="essentialEstimator_8cpp_source.html#l00022">22</a> of file <a class="el" href="essentialEstimator_8cpp_source.html">essentialEstimator.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa63abdf3a05d7f4959acd5600e7717b5"></a><!-- doxytag: member="corecvs::EssentialEstimator::~EssentialEstimator" ref="aa63abdf3a05d7f4959acd5600e7717b5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#aa63abdf3a05d7f4959acd5600e7717b5">corecvs::EssentialEstimator::~EssentialEstimator</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="essentialEstimator_8cpp_source.html#l00582">582</a> of file <a class="el" href="essentialEstimator_8cpp_source.html">essentialEstimator.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a511285b5cc9ef98ccb7becda5087d008"></a><!-- doxytag: member="corecvs::EssentialEstimator::getEssential" ref="a511285b5cc9ef98ccb7becda5087d008" args="(const vector&lt; Correspondance * &gt; &amp;samples, OptimisationMethod method=METHOD_DEFAULT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a> <a class="el" href="classcorecvs_1_1EssentialEstimator.html#a511285b5cc9ef98ccb7becda5087d008">corecvs::EssentialEstimator::getEssential</a> </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edd">OptimisationMethod</a>&#160;</td>
          <td class="paramname"><em>method</em> = <code><a class="el" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57eddad8294e61bf396b608c7a8c22d5eb8372">METHOD_DEFAULT</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="essentialEstimator_8cpp_source.html#l00377">377</a> of file <a class="el" href="essentialEstimator_8cpp_source.html">essentialEstimator.cpp</a>.</p>

<p>References <a class="el" href="essentialEstimator_8cpp_source.html#l00168">getEssentialGrad()</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00131">getEssentialLM()</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00070">getEssentialLSE()</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00212">getEssentialSimpleKalman()</a>, <a class="el" href="essentialEstimator_8h_source.html#l00026">METHOD_CLASSIC_KALMAN</a>, <a class="el" href="essentialEstimator_8h_source.html#l00024">METHOD_GRAD_DESC</a>, <a class="el" href="essentialEstimator_8h_source.html#l00028">METHOD_GRAD_DESC_RM</a>, <a class="el" href="essentialEstimator_8h_source.html#l00027">METHOD_ITERATIVE_KALMAN</a>, <a class="el" href="essentialEstimator_8h_source.html#l00025">METHOD_MARQ_LEV</a>, and <a class="el" href="essentialEstimator_8h_source.html#l00023">METHOD_SVD_LSE</a>.</p>

<p>Referenced by <a class="el" href="iterativeEstimator_8cpp_source.html#l00016">corecvs::IterativeEstimator::getEssential()</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00465">corecvs::EssentialEstimator::CostFunction7to1::getJacobian()</a>, <a class="el" href="ransacEstimator_8cpp_source.html#l00033">corecvs::Model8Point::Model8Point()</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00457">corecvs::EssentialEstimator::CostFunction7to1::operator()()</a>, and <a class="el" href="essentialEstimator_8cpp_source.html#l00556">corecvs::EssentialEstimator::CostFunction7toN::operator()()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">switch</span> (method)
    {
        <span class="keywordflow">case</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda34dbe807c80efc17e82cac335a4b35eb">METHOD_SVD_LSE</a>:
            <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a1db17322c1ac1d75389f5321c3795c61" title="Both essential and fundamental matrices can be searched with 8 point algorithm.">getEssentialLSE</a>(samples);
        <span class="keywordflow">case</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda61a23378353cb4ebcea7d30721e2c159">METHOD_GRAD_DESC</a>:
            <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#ab0284e0fa94b60b6ac5835b9366ada1a">getEssentialGrad</a>(samples);
        <span class="keywordflow">case</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57eddae847eb312fa366addc3573a7c474b68f">METHOD_MARQ_LEV</a>:
            <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#ae87186f8c55a91f772c812853fcade62">getEssentialLM</a>(samples);
        <span class="keywordflow">case</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda70bb05d47e884f21838277a7fb95d7a2">METHOD_CLASSIC_KALMAN</a>:
            <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#aaf2843585a01f38d26a4ff1dde226ddd">getEssentialSimpleKalman</a>(samples);
        <span class="keywordflow">case</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57eddad4213613eabc245f97711cc6f82652c8">METHOD_ITERATIVE_KALMAN</a>:
<span class="comment">//            return getEssentialKalman(samples);</span>
        <span class="keywordflow">case</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#a82dc9bb6b1d1608f86b233e37fe57edda77ab18ac714095f25dec2d7e9d603a56">METHOD_GRAD_DESC_RM</a>:
<span class="comment">//            return getEssentialGradToRm(samples);</span>

        <span class="keywordflow">default</span>:
            <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialEstimator.html#ae87186f8c55a91f772c812853fcade62">getEssentialLM</a>(samples);
    }

    <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialMatrix.html" title="Both essential and fundamental matrices hold the following property:">EssentialMatrix</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1EssentialEstimator_a511285b5cc9ef98ccb7becda5087d008_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab0284e0fa94b60b6ac5835b9366ada1a"></a><!-- doxytag: member="corecvs::EssentialEstimator::getEssentialGrad" ref="ab0284e0fa94b60b6ac5835b9366ada1a" args="(const vector&lt; Correspondance * &gt; &amp;samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a> <a class="el" href="classcorecvs_1_1EssentialEstimator.html#ab0284e0fa94b60b6ac5835b9366ada1a">corecvs::EssentialEstimator::getEssentialGrad</a> </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>samples</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="essentialEstimator_8cpp_source.html#l00168">168</a> of file <a class="el" href="essentialEstimator_8cpp_source.html">essentialEstimator.cpp</a>.</p>

<p>References <a class="el" href="gradientDescent_8h_source.html#l00021">corecvs::GradientDescent::f</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00430">corecvs::EssentialEstimator::CostFunctionBase::getEssential()</a>, <a class="el" href="gradientDescent_8h_source.html#l00023">corecvs::GradientDescent::lambda</a>, <a class="el" href="gradientDescent_8h_source.html#l00024">corecvs::GradientDescent::maxIterations</a>, <a class="el" href="gradientDescent_8cpp_source.html#l00015">corecvs::GradientDescent::minimise()</a>, <a class="el" href="gradientDescent_8h_source.html#l00022">corecvs::GradientDescent::normalisation</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00435">corecvs::EssentialEstimator::CostFunctionBase::packState()</a>, <a class="el" href="quaternion_8h_source.html#l00276">corecvs::GenericQuaternion&lt; ElementType &gt;::RotationIdentity()</a>, and <a class="el" href="essentialEstimator_8h_source.html#l00050">corecvs::EssentialEstimator::CostFunctionBase::VECTOR_SIZE</a>.</p>

<p>Referenced by <a class="el" href="essentialEstimator_8cpp_source.html#l00377">getEssential()</a>.</p>
<div class="fragment"><pre class="fragment">{
    CostFunction7to1 costFunction(&amp;samples);
    NormalizeFunction normalise;
    <a class="code" href="classcorecvs_1_1GradientDescent.html">GradientDescent</a> GDfit;

    GDfit.<a class="code" href="classcorecvs_1_1GradientDescent.html#a1c51f57e61400570f748f9b004999df9">f</a> = &amp;costFunction;
    GDfit.<a class="code" href="classcorecvs_1_1GradientDescent.html#a4b1adb3f67f11bf519d4b05e244fe4ba">normalisation</a> = &amp;normalise;
    GDfit.<a class="code" href="classcorecvs_1_1GradientDescent.html#a2e4c3988fac01f84c30a62df5a38d7c0">maxIterations</a> = 10000000;
    GDfit.<a class="code" href="classcorecvs_1_1GradientDescent.html#acaad248b4509118d6b31bba5b3e1a8b8">lambda</a> = 0.003;

    vector&lt;double&gt; input(<a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#ad6116ceed2f5e2ecc974185da3cfd110a6f9b06093e0b5cd07f90ceab5a9b7cea">CostFunctionBase::VECTOR_SIZE</a>);
    <a class="code" href="classcorecvs_1_1GenericQuaternion.html">Quaternion</a> rotation    = <a class="code" href="classcorecvs_1_1GenericQuaternion.html#aa76740d91bfbad4bba1d0f5019c3f251">Quaternion::RotationIdentity</a>();
    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a>  translation = <a class="code" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>(-1.0, 0.0, 0.0);
    <a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#a0b00036a507b64f23da94e458e14614a">CostFunctionBase::packState</a>(&amp;input[0], rotation, translation);

    vector&lt;double&gt; optInput = GDfit.<a class="code" href="classcorecvs_1_1GradientDescent.html#af871aeaa7efc3f6dde9ff8925d1f7cf2">minimise</a>(input);
    <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#a160b8efefc233e2ab31c7795f966ae00">CostFunctionBase::getEssential</a>(&amp;optInput[0]);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1EssentialEstimator_ab0284e0fa94b60b6ac5835b9366ada1a_cgraph.svg" width="100%" height="384"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="abdbd2281c8df198ce900b0faf4447e8e"></a><!-- doxytag: member="corecvs::EssentialEstimator::getEssentialGradToRm" ref="abdbd2281c8df198ce900b0faf4447e8e" args="(const vector&lt; Correspondance * &gt; &amp;samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a> <a class="el" href="classcorecvs_1_1EssentialEstimator.html#abdbd2281c8df198ce900b0faf4447e8e">corecvs::EssentialEstimator::getEssentialGradToRm</a> </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>samples</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="essentialEstimator_8cpp_source.html#l00188">188</a> of file <a class="el" href="essentialEstimator_8cpp_source.html">essentialEstimator.cpp</a>.</p>

<p>References <a class="el" href="gradientDescent_8h_source.html#l00048">corecvs::GradientDescentRnToRm::f</a>, <a class="el" href="gradientDescent_8cpp_source.html#l00128">corecvs::GradientDescentRnToRm::fit()</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00430">corecvs::EssentialEstimator::CostFunctionBase::getEssential()</a>, <a class="el" href="gradientDescent_8h_source.html#l00050">corecvs::GradientDescentRnToRm::lambda</a>, <a class="el" href="gradientDescent_8h_source.html#l00051">corecvs::GradientDescentRnToRm::maxIterations</a>, <a class="el" href="gradientDescent_8h_source.html#l00049">corecvs::GradientDescentRnToRm::normalisation</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00435">corecvs::EssentialEstimator::CostFunctionBase::packState()</a>, <a class="el" href="quaternion_8h_source.html#l00276">corecvs::GenericQuaternion&lt; ElementType &gt;::RotationIdentity()</a>, and <a class="el" href="essentialEstimator_8h_source.html#l00050">corecvs::EssentialEstimator::CostFunctionBase::VECTOR_SIZE</a>.</p>
<div class="fragment"><pre class="fragment">{
    CostFunction7toN costFunction(&amp;samples);
    NormalizeFunction normalise;
    <a class="code" href="classcorecvs_1_1GradientDescentRnToRm.html" title="This class implements a solver that uses Gradient descent for functions .">GradientDescentRnToRm</a> GDfit;
    GDfit.<a class="code" href="classcorecvs_1_1GradientDescentRnToRm.html#abb474d4e7476c6182f76b3f30e3c917b">f</a> = &amp;costFunction;
    GDfit.<a class="code" href="classcorecvs_1_1GradientDescentRnToRm.html#aa395c0afbd12b112b0d29d74ac73f68f">normalisation</a> = &amp;normalise;
    GDfit.<a class="code" href="classcorecvs_1_1GradientDescentRnToRm.html#a7f1c5355f4c7424fecd70196e364bde0">maxIterations</a> = 1000000;
    GDfit.<a class="code" href="classcorecvs_1_1GradientDescentRnToRm.html#a6862f99a9f4fa2acb7dd8bd23ef2e616">lambda</a> = 0.003;

    vector&lt;double&gt; input(<a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#ad6116ceed2f5e2ecc974185da3cfd110a6f9b06093e0b5cd07f90ceab5a9b7cea">CostFunctionBase::VECTOR_SIZE</a>);
    <a class="code" href="classcorecvs_1_1GenericQuaternion.html">Quaternion</a> rotation    = <a class="code" href="classcorecvs_1_1GenericQuaternion.html#aa76740d91bfbad4bba1d0f5019c3f251">Quaternion::RotationIdentity</a>();
    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a>  translation = <a class="code" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>(-1.0, 0.0, 0.0);
    <a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#a0b00036a507b64f23da94e458e14614a">CostFunctionBase::packState</a>(&amp;input[0], rotation, translation);

    vector&lt;double&gt; output(samples.size());
    <span class="comment">/* This is an overkill*/</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; output.size(); i++)
        output[i] = 0.0;

    vector&lt;double&gt; optInput = GDfit.<a class="code" href="classcorecvs_1_1GradientDescentRnToRm.html#a440ab398050e5b897334a8e8d50181fe">fit</a>(input, output);
    <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#a160b8efefc233e2ab31c7795f966ae00">CostFunctionBase::getEssential</a>(&amp;optInput[0]);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1EssentialEstimator_abdbd2281c8df198ce900b0faf4447e8e_cgraph.svg" width="100%" height="350"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae87186f8c55a91f772c812853fcade62"></a><!-- doxytag: member="corecvs::EssentialEstimator::getEssentialLM" ref="ae87186f8c55a91f772c812853fcade62" args="(const vector&lt; Correspondance * &gt; &amp;samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a> <a class="el" href="classcorecvs_1_1EssentialEstimator.html#ae87186f8c55a91f772c812853fcade62">corecvs::EssentialEstimator::getEssentialLM</a> </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>samples</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="essentialEstimator_8cpp_source.html#l00131">131</a> of file <a class="el" href="essentialEstimator_8cpp_source.html">essentialEstimator.cpp</a>.</p>

<p>References <a class="el" href="math_2levenmarq_8h_source.html#l00026">corecvs::LevenbergMarquardt::f</a>, <a class="el" href="math_2levenmarq_8cpp_source.html#l00022">corecvs::LevenbergMarquardt::fit()</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00430">corecvs::EssentialEstimator::CostFunctionBase::getEssential()</a>, <a class="el" href="math_2levenmarq_8h_source.html#l00029">corecvs::LevenbergMarquardt::lambdaFactor</a>, <a class="el" href="math_2levenmarq_8h_source.html#l00030">corecvs::LevenbergMarquardt::maxIterations</a>, <a class="el" href="math_2levenmarq_8h_source.html#l00027">corecvs::LevenbergMarquardt::normalisation</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00435">corecvs::EssentialEstimator::CostFunctionBase::packState()</a>, <a class="el" href="quaternion_8h_source.html#l00276">corecvs::GenericQuaternion&lt; ElementType &gt;::RotationIdentity()</a>, <a class="el" href="math_2levenmarq_8h_source.html#l00028">corecvs::LevenbergMarquardt::startLambda</a>, and <a class="el" href="essentialEstimator_8h_source.html#l00050">corecvs::EssentialEstimator::CostFunctionBase::VECTOR_SIZE</a>.</p>

<p>Referenced by <a class="el" href="essentialEstimator_8cpp_source.html#l00377">getEssential()</a>.</p>
<div class="fragment"><pre class="fragment">{
    CostFunction7toN costFunction(&amp;samples);
    NormalizeFunction normalise;
    <a class="code" href="classcorecvs_1_1LevenbergMarquardt.html">LevenbergMarquardt</a> LMfit;

    LMfit.<a class="code" href="classcorecvs_1_1LevenbergMarquardt.html#a8c7de0abea784407dac957c93d9bdc76">f</a> = &amp;costFunction;
    LMfit.<a class="code" href="classcorecvs_1_1LevenbergMarquardt.html#a1ad1d9ad49d7b94d0d3f807664bdb161">normalisation</a> = &amp;normalise;
    LMfit.<a class="code" href="classcorecvs_1_1LevenbergMarquardt.html#a50409f96bfed1fdedc13aafad2f02e20">maxIterations</a> = 100000;
    LMfit.<a class="code" href="classcorecvs_1_1LevenbergMarquardt.html#a79a9db92beb828852fde1585bdc0fd46">startLambda</a> = 10;
    LMfit.<a class="code" href="classcorecvs_1_1LevenbergMarquardt.html#a33c83377bbcecfcef15a95aa471a0537">lambdaFactor</a> = 20.0;

    vector&lt;double&gt; input(<a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#ad6116ceed2f5e2ecc974185da3cfd110a6f9b06093e0b5cd07f90ceab5a9b7cea">CostFunctionBase::VECTOR_SIZE</a>);
    <span class="comment">/* Left camera is in the negative direction of right camera */</span>
    <a class="code" href="classcorecvs_1_1GenericQuaternion.html">Quaternion</a> rotation    = <a class="code" href="classcorecvs_1_1GenericQuaternion.html#aa76740d91bfbad4bba1d0f5019c3f251">Quaternion::RotationIdentity</a>();
    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a>  translation = <a class="code" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>(-1.0, 0.0, 0.0);
    <a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#a0b00036a507b64f23da94e458e14614a">CostFunctionBase::packState</a>(&amp;input[0], rotation, translation);

    vector&lt;double&gt; output(samples.size());
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; samples.size(); i++)
        output[i] = 0.0;

    vector&lt;double&gt; optInput = LMfit.<a class="code" href="classcorecvs_1_1LevenbergMarquardt.html#aaf1a9f35927ce33827590ca21895aa34" title="Marquardt-Levenberg algoritim is a fast optimisation algorithm.">fit</a>(input, output);

    <a class="code" href="classcorecvs_1_1PrinterVisitor.html">PrinterVisitor</a> visitor;

   <span class="comment">/* cout &lt;&lt; &quot;Axis&quot; &lt;&lt; endl;</span>
<span class="comment">    CostFunctionBase::getRotationAxis(&amp;optInput[0]).accept(visitor);</span>
<span class="comment">    cout &lt;&lt; &quot;Angle:&quot; &lt;&lt; endl;</span>
<span class="comment">    cout &lt;&lt; radToDeg(CostFunctionBase::getRotationAngle(&amp;optInput[0]))  &lt;&lt; &quot;deg&quot; &lt;&lt; endl;</span>
<span class="comment">    cout &lt;&lt; &quot;Baseline:&quot; &lt;&lt; endl;</span>
<span class="comment">    CostFunctionBase::getTranslation(&amp;optInput[0]).accept(visitor);</span>
<span class="comment">*/</span>

    <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#a160b8efefc233e2ab31c7795f966ae00">CostFunctionBase::getEssential</a>(&amp;optInput[0]);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1EssentialEstimator_ae87186f8c55a91f772c812853fcade62_cgraph.svg" width="100%" height="538"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1db17322c1ac1d75389f5321c3795c61"></a><!-- doxytag: member="corecvs::EssentialEstimator::getEssentialLSE" ref="a1db17322c1ac1d75389f5321c3795c61" args="(const vector&lt; Correspondance * &gt; &amp;samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a> <a class="el" href="classcorecvs_1_1EssentialEstimator.html#a1db17322c1ac1d75389f5321c3795c61">corecvs::EssentialEstimator::getEssentialLSE</a> </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>samples</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Both essential and fundamental matrices can be searched with 8 point algorithm. </p>
<div class="fragment"><pre class="fragment">             [ a_11   a_12  a_13 ]  [ x<span class="stringliteral">&#39;]    [ 0 ]</span>
<span class="stringliteral"> [x, y ,1]   [ a_21   a_22  a_23 ]  [ y&#39;</span>] =  [ 0 ]
             [ a_31   a_32  a_33 ]  [ 1 ]    [ 0 ]
</pre></div><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \pmatrix{ x &amp; y &amp; 1 } \pmatrix{ F_{1,1} &amp; F_{1,2} &amp; F_{1,3}\cr F_{2,1} &amp; F_{2,2} &amp; F_{2,3}\cr F_{3,1} &amp; F_{3,2} &amp; F_{3,3}} \pmatrix{ x' \cr y' \cr 1} = \pmatrix{ 0 \cr 0 \cr 0} \]" src="form_216.png"/>
</p>
<p>We reconstruct the model by LSE estimation.</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ F_{1,1} x x' + F_{1,2} x y' + F_{1,3} x + F_{2,1} y x' + F_{2,2} y y' + F_{2,3} y + F_{3,1} x' + F_{3,2} y' + F_{3,3} = 0 \]" src="form_217.png"/>
</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \left( \begin{array}{ccccccccc} x_1 x_1' &amp; x_1 y_1' &amp; x_1 &amp; y_1 x_1' &amp; y_1 y_1' &amp; y_1 &amp; x_1' &amp; y_1' &amp; 1 \\ \multicolumn{9}{c}{\cdots} \\ x_n x_n' &amp; x_n y_n' &amp; x_n &amp; y_n x_n' &amp; y_n y_n' &amp; y_n &amp; x_n' &amp; y_n' &amp; 1 \end{array} \right ) \pmatrix{ F_{1,1} \cr F_{1,2} \cr F_{1,3} \cr F_{2,1} \cr F_{2,2} \cr F_{2,3} \cr F_{3,1} \cr F_{3,2} \cr F_{3,3} } = \vec 0 \]" src="form_218.png"/>
</p>
 <dl class="todo"><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd>TODO Here the transform should be done to increase the precision. The choice should be centered to 0 and scaled to average of sqrt(2) </dd></dl>

<p>Definition at line <a class="el" href="essentialEstimator_8cpp_source.html#l00070">70</a> of file <a class="el" href="essentialEstimator_8cpp_source.html">essentialEstimator.cpp</a>.</p>

<p>References <a class="el" href="matrix33_8h_source.html#l00246">corecvs::Matrix33::a()</a>, <a class="el" href="math_2matrix_2matrix_8h_source.html#l00132">corecvs::Matrix::a()</a>, <a class="el" href="matrix_8cpp_source.html#l00577">corecvs::Matrix::svd()</a>, <a class="el" href="clusteringDirectionType_8h_source.html#l00026">ClusteringDirectionType::X</a>, <a class="el" href="vector2d_8h_source.html#l00050">corecvs::Vector2d&lt; ElementType &gt;::x()</a>, and <a class="el" href="vector2d_8h_source.html#l00055">corecvs::Vector2d&lt; ElementType &gt;::y()</a>.</p>

<p>Referenced by <a class="el" href="essentialEstimator_8cpp_source.html#l00377">getEssential()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classcorecvs_1_1Matrix.html">Matrix</a> <a class="code" href="namespaceClusteringDirectionType.html#ac6c734163930f84155fdf639ea012599a3bf817574a3d248fe1bb494e386ef9c7" title="X Sort by X axis.">X</a>((<span class="keywordtype">int</span>)samples.size(), 9);
    <a class="code" href="classcorecvs_1_1Matrix.html">Matrix</a> W(1,9);
    <a class="code" href="classcorecvs_1_1Matrix.html">Matrix</a> V(9,9);
    <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a> F(0.0);

    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; samples.size(); i++)
    {
        <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2dd</a> first  = samples[i]-&gt;start;
        <a class="code" href="classcorecvs_1_1Vector2d.html">Vector2dd</a> second = samples[i]-&gt;end;

        <a class="code" href="namespaceClusteringDirectionType.html#ac6c734163930f84155fdf639ea012599a3bf817574a3d248fe1bb494e386ef9c7" title="X Sort by X axis.">X</a>.fillLineWithArgs(i,
        first.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() * second.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), first.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>() * second.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(), first.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(),
        first.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() * second.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), first.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>() * second.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(), first.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(),
        second.<a class="code" href="classcorecvs_1_1Vector2d.html#a944721c41f044c1388d9dc42ca899bce">x</a>(), second.<a class="code" href="classcorecvs_1_1Vector2d.html#ae1ea2ad4c0821001408bf963cffa8413">y</a>(),  1.0);
    }

<span class="preprocessor">#ifdef DEEP_TRACE</span>
<span class="preprocessor"></span>        <a class="code" href="namespaceClusteringDirectionType.html#ac6c734163930f84155fdf639ea012599a3bf817574a3d248fe1bb494e386ef9c7" title="X Sort by X axis.">X</a>.print();
        cout &lt;&lt; endl;
        fflush(stdout);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="comment"></span>
<span class="comment">    /** \todo TODO Here the transform should be done to increase the precision.</span>
<span class="comment">     * The choice should be centered to 0 and scaled to average of sqrt(2) */</span>

    <a class="code" href="classcorecvs_1_1Matrix.html#ab00a85b071aab144f3a2860189150e7f" title="This method contains SVD implementation.">Matrix::svd</a>(&amp;<a class="code" href="namespaceClusteringDirectionType.html#ac6c734163930f84155fdf639ea012599a3bf817574a3d248fe1bb494e386ef9c7" title="X Sort by X axis.">X</a>, &amp;W, &amp;V);

<span class="preprocessor">#ifdef DEEP_TRACE</span>
<span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;The singular values:\n&quot;</span>);
    W.print();
    printf(<span class="stringliteral">&quot;\n&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

    <span class="keywordtype">int</span> min = -1;
    <span class="keywordtype">double</span> minval = std::numeric_limits&lt;double&gt;::max();
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; 9; i ++)
    {
        <span class="keywordflow">if</span> (W.a(0, i) &lt;= minval)
        {
            min = i;
            minval = W.a(0, i);
        }
    }

    F = <a class="code" href="classcorecvs_1_1Matrix33.html" title="Class describes the 3 by 3 matrix.">Matrix33</a>(
        V.a(0,min), V.a(1,min), V.a(2,min),
        V.a(3,min), V.a(4,min), V.a(5,min),
        V.a(6,min), V.a(7,min), V.a(8,min)
    );

    <span class="keywordflow">if</span> (F.a(2,1) &lt; 0) {
        F = -F;
    }

    <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialMatrix.html" title="Both essential and fundamental matrices hold the following property:">EssentialMatrix</a>(F);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1EssentialEstimator_a1db17322c1ac1d75389f5321c3795c61_cgraph.svg" width="100%" height="228"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaf2843585a01f38d26a4ff1dde226ddd"></a><!-- doxytag: member="corecvs::EssentialEstimator::getEssentialSimpleKalman" ref="aaf2843585a01f38d26a4ff1dde226ddd" args="(const vector&lt; Correspondance * &gt; &amp;samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcorecvs_1_1EssentialMatrix.html">EssentialMatrix</a> <a class="el" href="classcorecvs_1_1EssentialEstimator.html#aaf2843585a01f38d26a4ff1dde226ddd">corecvs::EssentialEstimator::getEssentialSimpleKalman</a> </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; <a class="el" href="namespacecorecvs.html#a57553ba545a780e2a07167fd7595ef8f">Correspondance</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>samples</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="essentialEstimator_8cpp_source.html#l00212">212</a> of file <a class="el" href="essentialEstimator_8cpp_source.html">essentialEstimator.cpp</a>.</p>

<p>References <a class="el" href="essentialEstimator_8cpp_source.html#l00430">corecvs::EssentialEstimator::CostFunctionBase::getEssential()</a>, <a class="el" href="essentialEstimator_8cpp_source.html#l00435">corecvs::EssentialEstimator::CostFunctionBase::packState()</a>, <a class="el" href="classicKalman_8cpp_source.html#l00024">corecvs::ClassicKalman::predict()</a>, <a class="el" href="quaternion_8h_source.html#l00276">corecvs::GenericQuaternion&lt; ElementType &gt;::RotationIdentity()</a>, <a class="el" href="classicKalman_8cpp_source.html#l00047">corecvs::ClassicKalman::update()</a>, <a class="el" href="essentialEstimator_8h_source.html#l00050">corecvs::EssentialEstimator::CostFunctionBase::VECTOR_SIZE</a>, <a class="el" href="classicKalman_8h_source.html#l00073">corecvs::ClassicKalman::x</a>, <a class="el" href="classicKalman_8h_source.html#l00074">corecvs::ClassicKalman::xPredicted</a>, and <a class="el" href="classicKalman_8h_source.html#l00076">corecvs::ClassicKalman::z</a>.</p>

<p>Referenced by <a class="el" href="essentialEstimator_8cpp_source.html#l00377">getEssential()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classcorecvs_1_1IdentityFunction.html">IdentityFunction</a> F(<a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#ad6116ceed2f5e2ecc974185da3cfd110a6f9b06093e0b5cd07f90ceab5a9b7cea">CostFunctionBase::VECTOR_SIZE</a>);
    CostFunction7to1 H(&amp;samples);
    NormalizeFunction N;

    <span class="comment">// We know almost nothing about the essential matrix</span>
    <a class="code" href="classcorecvs_1_1Matrix.html">Matrix</a> P(<a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#ad6116ceed2f5e2ecc974185da3cfd110a6f9b06093e0b5cd07f90ceab5a9b7cea">CostFunctionBase::VECTOR_SIZE</a>, <a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#ad6116ceed2f5e2ecc974185da3cfd110a6f9b06093e0b5cd07f90ceab5a9b7cea">CostFunctionBase::VECTOR_SIZE</a>, 500.0);
    <span class="comment">// Our model evolution is precise</span>
    <a class="code" href="classcorecvs_1_1Matrix.html">Matrix</a> Q(<a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#ad6116ceed2f5e2ecc974185da3cfd110a6f9b06093e0b5cd07f90ceab5a9b7cea">CostFunctionBase::VECTOR_SIZE</a>, <a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#ad6116ceed2f5e2ecc974185da3cfd110a6f9b06093e0b5cd07f90ceab5a9b7cea">CostFunctionBase::VECTOR_SIZE</a>, 0.0);
    <span class="comment">// Our measurement is precise up to 2px.</span>
    <a class="code" href="classcorecvs_1_1Matrix.html">Matrix</a> R(1,1, 2.0);

    <a class="code" href="classcorecvs_1_1FixedArray.html">Vector</a> input(<a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#ad6116ceed2f5e2ecc974185da3cfd110a6f9b06093e0b5cd07f90ceab5a9b7cea">CostFunctionBase::VECTOR_SIZE</a>);
    <a class="code" href="classcorecvs_1_1GenericQuaternion.html">Quaternion</a> rotation    = <a class="code" href="classcorecvs_1_1GenericQuaternion.html#aa76740d91bfbad4bba1d0f5019c3f251">Quaternion::RotationIdentity</a>();
    <a class="code" href="classcorecvs_1_1Vector3d.html">Vector3dd</a>  translation = <a class="code" href="namespacecorecvs.html#a8c6504d3d8b574bfb908b9fe5a7a3974">Vector3dd</a>(-1.0, 0.0, 0.0);
    <a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#a0b00036a507b64f23da94e458e14614a">CostFunctionBase::packState</a>(&amp;input[0], rotation, translation);

    <a class="code" href="classcorecvs_1_1ClassicKalman.html" title="TODO: Could be nice to make this template.">ClassicKalman</a> kalmanFilter(
        &amp;F,
        &amp;H,
        Q,
        R,
        P,
        input);


    <a class="code" href="classcorecvs_1_1FixedArray.html">Vector</a> normalised(<a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#ad6116ceed2f5e2ecc974185da3cfd110a6f9b06093e0b5cd07f90ceab5a9b7cea">CostFunctionBase::VECTOR_SIZE</a>);

    <span class="keyword">static</span> <span class="keywordtype">int</span> maxIterations = 2500000;

    cout &lt;&lt; <span class="stringliteral">&quot;================== Starting Simple Kalman optimisation ================== &quot;</span> &lt;&lt; endl;
    cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; flush;

    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> step = 0; step &lt; maxIterations; step++)
    {
        <span class="keywordflow">if</span> ((step % ((maxIterations / 100) + 1) == 0))
        {
            cout &lt;&lt; <span class="stringliteral">&quot;#&quot;</span> &lt;&lt; flush;
        }

        <span class="keywordtype">double</span> measurement = 0.0;
        kalmanFilter.predict();
        N(kalmanFilter.xPredicted, normalised);
        kalmanFilter.xPredicted = normalised;
        kalmanFilter.z[0] = measurement;
        kalmanFilter.update();
    }
    cout &lt;&lt; <span class="stringliteral">&quot;]&quot;</span> &lt;&lt; endl;

    <span class="keywordflow">return</span> <a class="code" href="classcorecvs_1_1EssentialEstimator_1_1CostFunctionBase.html#a160b8efefc233e2ab31c7795f966ae00">CostFunctionBase::getEssential</a>(&amp;kalmanFilter.x[0]);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classcorecvs_1_1EssentialEstimator_aaf2843585a01f38d26a4ff1dde226ddd_cgraph.svg" width="100%" height="424"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>core/rectification/<a class="el" href="essentialEstimator_8h_source.html">essentialEstimator.h</a></li>
<li>core/rectification/<a class="el" href="essentialEstimator_8cpp_source.html">essentialEstimator.cpp</a></li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 12 2013 23:44:57 for DeepView by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
